(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t(require('xmldom'),function(){try{return require('jszip')}catch(t){}}()):'function'==typeof define&&define.amd?define(['xmldom','jszip'],t):'object'==typeof exports?exports.ePub=t(require('xmldom'),function(){try{return require('jszip')}catch(t){}}()):e.ePub=t(e.xmldom,e.jszip)})('undefined'==typeof self?this:self,function(e,t){var n=Math.PI,a=String.prototype,r=Math.sqrt,o=Math.LN2,i=Math.log,s=Math.pow,l=Math.exp,d=Math.expm1,c=Math.abs,p=Math.sin,u=Math.round,g=Math.floor,h=Math.min,f=Math.max,m=String.fromCharCode,y=Math.ceil;return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='/dist/',t(t.s=167)}([function(e,t,n){var a=n(2),r=n(21),o=n(14),i=n(15),s=n(22),l='prototype',d=function(e,t,n){var c=e&d.F,p=e&d.G,u=e&d.S,g=e&d.P,h=e&d.B,f=p?a:u?a[t]||(a[t]={}):(a[t]||{})[l],m=p?r:r[t]||(r[t]={}),y=m[l]||(m[l]={}),v,b,_,x;for(v in p&&(n=t),n)b=!c&&f&&void 0!==f[v],_=(b?f:n)[v],x=h&&b?s(_,a):g&&'function'==typeof _?s(Function.call,_):_,f&&i(f,v,_,e&d.U),m[v]!=_&&o(m,v,x),g&&y[v]!=_&&(y[v]=_)};a.core=r,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},function(e,t,n){var a=n(5);e.exports=function(e){if(!a(e))throw TypeError(e+' is not an object!');return e}},function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e,t){(function(n,a){e.exports=t=a()})(this,function(){var e=e||function(e){var t=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),n={},a=n.lib={},r=a.Base=function(){return{extend:function(e){var n=t(this);return e&&n.mixIn(e),n.hasOwnProperty('init')&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty('toString')&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0==t?4*e.length:t},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,a=this.sigBytes,r=e.sigBytes;if(this.clamp(),a%4)for(var o=0,i;o<r;o++)i=255&n[o>>>2]>>>24-8*(o%4),t[a+o>>>2]|=i<<24-8*((a+o)%4);else for(var o=0;o<r;o+=4)t[a+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-8*(t%4),e.length=y(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],a=function(t){var t=t,n=987654321,a=4294967295;return function(){n=36969*(65535&n)+(n>>16)&a,t=18000*(65535&t)+(t>>16)&a;var r=(n<<16)+t&a;return r/=4294967296,r+=0.5,r*(.5<e.random()?1:-1)}},r=0,i,s;r<t;r+=4)s=a(4294967296*(i||e.random())),i=987654071*s(),n.push(0|4294967296*s());return new o.init(n,t)}}),i=n.enc={},s=i.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],r=0,o;r<n;r++)o=255&t[r>>>2]>>>24-8*(r%4),a.push((o>>>4).toString(16)),a.push((15&o).toString(16));return a.join('')},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n[a>>>3]|=parseInt(e.substr(a,2),16)<<24-4*(a%8);return new o.init(n,t/2)}},l=i.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],r=0,o;r<n;r++)o=255&t[r>>>2]>>>24-8*(r%4),a.push(m(o));return a.join('')},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a++)n[a>>>2]|=(255&e.charCodeAt(a))<<24-8*(a%4);return new o.init(n,t)}},d=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw new Error('Malformed UTF-8 data')}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){'string'==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,a=t.sigBytes,r=this.blockSize,i=a/(4*r);i=e?y(i):f((0|i)-this._minBufferSize,0);var s=i*r,l=h(4*s,a);if(s){for(var d=0;d<s;d+=r)this._doProcessBlock(n,d);var c=n.splice(0,s);t.sigBytes-=l}return new o.init(c,l)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=a.Hasher=c.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new u.HMAC.init(e,n).finalize(t)}}}),u=n.algo={};return n}(Math);return e})},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,n){var a=n(60)('wks'),r=n(39),o=n(2).Symbol,i='function'==typeof o,s=e.exports=function(e){return a[e]||(a[e]=i&&o[e]||(i?o:r)('Symbol.'+e))};s.store=a},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(){var e=new Date().getTime(),t='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var n=0|(e+16*Math.random())%16;return e=g(e/16),('x'==t?n:8|7&n).toString(16)});return t}function o(e){return!isNaN(parseFloat(e))&&isFinite(e)}function i(e,t,n,a,r){var o=a||0,s=r||t.length,l=parseInt(o+(s-o)/2),d;return(n||(n=function(e,t){return e>t?1:e<t?-1:e==t?0:void 0}),0>=s-o)?l:(d=n(t[l],e),1==s-o?0<=d?l:l+1:0===d?l:-1===d?i(e,t,n,l,s):i(e,t,n,o,l))}function s(e,t,n,a,r){var o=a||0,i=r||t.length,l=parseInt(o+(i-o)/2),d;return(n||(n=function(e,t){return e>t?1:e<t?-1:e==t?0:void 0}),0>=i-o)?-1:(d=n(t[l],e),1==i-o?0===d?l:-1:0===d?l:-1===d?s(e,t,n,l,i):s(e,t,n,o,l))}function l(e,t){for(var n=e.parentNode,a=n.childNodes,r=-1,o=0,i;o<a.length&&(i=a[o],i.nodeType===t&&r++,i!=e);o++);return r}function d(e,t){return new Blob([e],{type:t})}function c(e,t){return'undefined'==typeof e.querySelector?e.getElementsByTagName(t):e.querySelectorAll(t)}function p(e,t,n){for(var a=document.createTreeWalker(e,n,null,!1),r=void 0;r=a.nextNode();)t(r)}function u(e,t){if(t(e))return!0;if(e=e.firstChild,e)do{var n=u(e,t);if(n)return!0;e=e.nextSibling}while(e)}function h(e){for(var t=[e];e;e=e.parentNode)t.unshift(e);return t}Object.defineProperty(t,'__esModule',{value:!0});var m=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.uuid=r,t.documentHeight=function(){return f(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},t.isElement=function(e){return!!(e&&1==e.nodeType)},t.isNumber=o,t.isFloat=function(e){var t=parseFloat(e);return!1!==o(e)&&('string'==typeof e&&-1<e.indexOf('.')||g(t)!==t)},t.prefixed=function(e){var t=['-webkit-','-webkit-','-moz-','-o-','-ms-'],n=e.toLowerCase(),a=['Webkit','webkit','Moz','O','ms'].length;if('undefined'==typeof document||'undefined'!=typeof document.body.style[n])return e;for(var r=0;r<a;r++)if('undefined'!=typeof document.body.style[t[r]+n])return t[r]+n;return e},t.defaults=function(e){for(var t=1,n=arguments.length,a;t<n;t++)for(var r in a=arguments[t],a)void 0===e[r]&&(e[r]=a[r]);return e},t.extend=function(e){var t=[].slice.call(arguments,1);return t.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}),e},t.insert=function(e,t,n){var a=i(e,t,n);return t.splice(a,0,e),a},t.locationOf=i,t.indexOfSorted=s,t.bounds=function(e){var t=window.getComputedStyle(e),n=0,a=0;return['width','paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(e){n+=parseFloat(t[e])||0}),['height','paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(e){a+=parseFloat(t[e])||0}),{height:a,width:n}},t.borders=function(e){var t=window.getComputedStyle(e),n=0,a=0;return['paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(e){n+=parseFloat(t[e])||0}),['paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(e){a+=parseFloat(t[e])||0}),{height:a,width:n}},t.nodeBounds=function(e){var t=void 0,n=e.ownerDocument;if(e.nodeType==Node.TEXT_NODE){var a=n.createRange();a.selectNodeContents(e),t=a.getBoundingClientRect()}else t=e.getBoundingClientRect();return t},t.windowBounds=function(){var e=window.innerWidth,t=window.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}},t.indexOfNode=l,t.indexOfTextNode=function(e){return l(e,b)},t.indexOfElementNode=function(e){return l(e,v)},t.isXml=function(e){return-1<['xml','opf','ncx'].indexOf(e)},t.createBlob=d,t.createBlobUrl=function(e,t){var n=d(e,t),a;return a=_.createObjectURL(n),a},t.revokeBlobUrl=function(e){return _.revokeObjectURL(e)},t.createBase64Url=function(e,t){var n,a;if('string'==typeof e)return n=btoa(encodeURIComponent(e)),a='data:'+t+';base64,'+n,a},t.type=function(e){return Object.prototype.toString.call(e).slice(8,-1)},t.parse=function(e,t,a){var r,o;return o='undefined'==typeof DOMParser||a?n(387).DOMParser:DOMParser,65279===e.charCodeAt(0)&&(e=e.slice(1)),r=new o().parseFromString(e,t),r},t.qs=function(e,t){var n;if(!e)throw new Error('No Element Provided');return'undefined'==typeof e.querySelector?(n=e.getElementsByTagName(t),n.length)?n[0]:void 0:e.querySelector(t)},t.qsa=c,t.qsp=function(e,t,n){var a,r;if('undefined'!=typeof e.querySelector){for(var o in t+='[',n)t+=o+'~=\''+n[o]+'\'';return t+=']',e.querySelector(t)}return(a=e.getElementsByTagName(t),r=Array.prototype.slice.call(a,0).filter(function(e){for(var t in n)if(e.getAttribute(t)===n[t])return!0;return!1}),r)?r[0]:void 0},t.sprint=function(e,t){var n=e.ownerDocument||e;'undefined'==typeof n.createTreeWalker?u(e,function(e){e&&3===e.nodeType&&t(e)},!0):p(e,t,NodeFilter.SHOW_TEXT)},t.treeWalker=p,t.walk=u,t.blob2base64=function(e){return new Promise(function(t){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){t(n.result)}})},t.defer=function(){var e=this;this.resolve=null,this.reject=null,this.id=r(),this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),Object.freeze(this)},t.querySelectorByType=function(e,t,n){var a;if('undefined'!=typeof e.querySelector&&(a=e.querySelector(t+'[*|type="'+n+'"]')),!a||0===a.length){a=c(e,t);for(var r=0;r<a.length;r++)if(a[r].getAttributeNS('http://www.idpf.org/2007/ops','type')===n||a[r].getAttribute('epub:type')===n)return a[r]}else return a},t.findChildren=function(e){for(var t=[],n=e.childNodes,a=0,r;a<n.length;a++)r=n[a],1===r.nodeType&&t.push(r);return t},t.parents=h,t.filterChildren=function(e,t,n){for(var a=[],r=e.childNodes,o=0,i;o<r.length;o++)if(i=r[o],1===i.nodeType&&i.nodeName.toLowerCase()===t){if(n)return i;a.push(i)}if(!n)return a},t.getParentByTagName=function(e,t){var n;if(null!==e&&''!==t)for(n=e.parentNode;1===n.nodeType;){if(n.tagName.toLowerCase()===t)return n;n=n.parentNode}};var y=t.requestAnimationFrame='undefined'!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),v=1,b=3,_='undefined'==typeof URL?'undefined'==typeof window?void 0:window.URL||window.webkitURL||window.mozURL:URL,x=t.RangeObject=function(){function e(){a(this,e),this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}return m(e,[{key:'setStart',value:function(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}},{key:'setEnd',value:function(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}},{key:'collapse',value:function(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}},{key:'selectNode',value:function(e){var t=e.parentNode,n=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,n),this.setEnd(t,n+1)}},{key:'selectNodeContents',value:function(e){var t=e.childNodes[e.childNodes-1],n=3===e.nodeType?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,n)}},{key:'_commonAncestorContainer',value:function(e,t){var n=h(e||this.startContainer),a=h(t||this.endContainer);if(n[0]==a[0])for(var r=0;r<n.length;r++)if(n[r]!=a[r])return n[r-1]}},{key:'_checkCollapsed',value:function(){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}},{key:'toString',value:function(){}}]),e}()},function(e,t,n){e.exports=!n(4)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e,t,n){var a=n(1),r=n(117),o=n(27),i=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(a(e),t=o(t,!0),a(n),r)try{return i(e,t,n)}catch(t){}if('get'in n||'set'in n)throw TypeError('Accessors not supported!');return'value'in n&&(e[t]=n.value),e}},function(e,t,n){var a=n(29);e.exports=function(e){return 0<e?h(a(e),9007199254740991):0}},function(e,t,n){var a=n(28);e.exports=function(e){return Object(a(e))}},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(49))})(this,function(e){e.lib.Cipher||function(){var t=e,n=t.lib,a=n.Base,r=n.WordArray,o=n.BufferedBlockAlgorithm,i=t.enc,s=i.Utf8,l=i.Base64,d=t.algo,c=d.EvpKDF,p=n.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return'string'==typeof e?w:k}return function(t){return{encrypt:function(n,a,r){return e(a).encrypt(t,n,a,r)},decrypt:function(n,a,r){return e(a).decrypt(t,n,a,r)}}}}()}),u=n.StreamCipher=p.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),g=t.mode={},h=n.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=g.CBC=function(){function e(e,t,n){var a=this._iv;if(a){var r=a;this._iv=void 0}else var r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}var t=h.extend();return t.Encryptor=t.extend({processBlock:function(t,n){var a=this._cipher,r=a.blockSize;e.call(this,t,n,r),a.encryptBlock(t,n),this._prevBlock=t.slice(n,n+r)}}),t.Decryptor=t.extend({processBlock:function(t,n){var a=this._cipher,r=a.blockSize,o=t.slice(n,n+r);a.decryptBlock(t,n),e.call(this,t,n,r),this._prevBlock=o}}),t}(),m=t.pad={},y=m.Pkcs7={pad:function(e,t){for(var n=4*t,a=n-e.sigBytes%n,o=[],s=0;s<a;s+=4)o.push(a<<24|a<<16|a<<8|a);var i=r.create(o,a);e.concat(i)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=n.BlockCipher=p.extend({cfg:p.cfg.extend({mode:f,padding:y}),reset:function(){p.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=n.createEncryptor;else{var a=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==a?this._mode.init(this,t&&t.words):(this._mode=a.call(n,this,t&&t.words),this._mode.__creator=a)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),b=n.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),_=t.format={},x=_.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var a=r.create([1398893684,1701076831]).concat(n).concat(t);else var a=t;return a.toString(l)},parse:function(e){var t=l.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var a=r.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return b.create({ciphertext:t,salt:a})}},k=n.SerializableCipher=a.extend({cfg:a.extend({format:x}),encrypt:function(e,t,n,a){a=this.cfg.extend(a);var r=e.createEncryptor(n,a),o=r.finalize(t),i=r.cfg;return b.create({ciphertext:o,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:a.format})},decrypt:function(e,t,n,a){a=this.cfg.extend(a),t=this._parse(t,a.format);var r=e.createDecryptor(n,a).finalize(t.ciphertext);return r},_parse:function(e,t){return'string'==typeof e?t.parse(e,this):e}}),E=t.kdf={},S=E.OpenSSL={execute:function(e,t,n,a){a||(a=r.random(8));var o=c.create({keySize:t+n}).compute(e,a),i=r.create(o.words.slice(t),4*n);return o.sigBytes=4*t,b.create({key:o,iv:i,salt:a})}},w=n.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:S}),encrypt:function(e,t,n,a){a=this.cfg.extend(a);var r=a.kdf.execute(n,e.keySize,e.ivSize);a.iv=r.iv;var o=k.encrypt.call(this,e,t,r.key,a);return o.mixIn(r),o},decrypt:function(e,t,n,a){a=this.cfg.extend(a),t=this._parse(t,a.format);var r=a.kdf.execute(n,e.keySize,e.ivSize,t.salt);a.iv=r.iv;var o=k.decrypt.call(this,e,t,r.key,a);return o}})}()})},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e,t,n){var a=n(9),r=n(38);e.exports=n(8)?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var a=n(2),r=n(14),o=n(17),i=n(39)('src'),s='toString',l=Function[s],d=(''+l).split(s);n(21).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,s){var l='function'==typeof n;l&&(o(n,'name')||r(n,'name',t));e[t]===n||(l&&(o(n,i)||r(n,i,e[t]?''+e[t]:d.join(t+''))),e===a?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,s,function(){return'function'==typeof this&&this[i]||l.call(this)})},function(e,t,n){var a=n(0),r=n(4),o=n(28),i=/"/g,s=function(e,t,n,a){var r=o(e)+'',s='<'+t;return''!==n&&(s+=' '+n+'="'+(a+'').replace(i,'&quot;')+'"'),s+'>'+r+'</'+t+'>'};e.exports=function(e,t){var n={};n[e]=t(s),a(a.P+a.F*r(function(){var t=''[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),'String',n)}},function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,t,n){var a=n(57),r=n(28);e.exports=function(e){return a(r(e))}},function(e,t,n){var a=n(58),r=n(38),o=n(18),i=n(27),s=n(17),l=n(117),d=Object.getOwnPropertyDescriptor;t.f=n(8)?d:function(e,t){if(e=o(e),t=i(t,!0),l)try{return d(e,t)}catch(t){}return s(e,t)?r(!a.f.call(e,t),e[t]):void 0}},function(e,t,n){var a=n(17),r=n(11),o=n(82)('IE_PROTO'),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),a(e,o)?e[o]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e){var t=e.exports={version:'2.5.7'};'number'==typeof __e&&(__e=t)},function(e,t,n){var a=n(13);e.exports=function(e,t,n){return(a(e),void 0===t)?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,a){return e.call(t,n,a)}:3===n?function(n,a,r){return e.call(t,n,a,r)}:function(){return e.apply(t,arguments)}}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,t,n){'use strict';var a=n(4);e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(7),l=1,d=3,i=function(){function e(t,n,o){a(this,e);var i;if(this.str='',this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof e))return new e(t,n,o);if('string'==typeof n?this.base=this.parseComponent(n):'object'===('undefined'==typeof n?'undefined':r(n))&&n.steps&&(this.base=n),i=this.checkType(t),'string'===i)return this.str=t,(0,s.extend)(this,this.parse(t));if('range'===i)return(0,s.extend)(this,this.fromRange(t,this.base,o));if('node'===i)return(0,s.extend)(this,this.fromNode(t,this.base,o));if('EpubCFI'===i&&t.path)return t;if(!t)return this;throw new TypeError('not a valid argument for EpubCFI')}return o(e,[{key:'checkType',value:function(t){return this.isCfiString(t)?'string':t&&'object'===('undefined'==typeof t?'undefined':r(t))&&('Range'===(0,s.type)(t)||'undefined'!=typeof t.startContainer)?'range':t&&'object'===('undefined'==typeof t?'undefined':r(t))&&'undefined'!=typeof t.nodeType?'node':t&&'object'===('undefined'==typeof t?'undefined':r(t))&&t instanceof e&&'EpubCFI'}},{key:'parse',value:function(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},n,a,r;return'string'==typeof e?(0===e.indexOf('epubcfi(')&&')'===e[e.length-1]&&(e=e.slice(8,e.length-1)),n=this.getChapterComponent(e),!n)?{spinePos:-1}:(t.base=this.parseComponent(n),a=this.getPathComponent(e),t.path=this.parseComponent(a),r=this.getRange(e),r&&(t.range=!0,t.start=this.parseComponent(r[0]),t.end=this.parseComponent(r[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1}}},{key:'parseComponent',value:function(e){var t={steps:[],terminal:{offset:null,assertion:null}},n=e.split(':'),a=n[0].split('/'),r;return 1<n.length&&(r=n[1],t.terminal=this.parseTerminal(r)),''===a[0]&&a.shift(),t.steps=a.map(function(e){return this.parseStep(e)}.bind(this)),t}},{key:'parseStep',value:function(e){var t,n,a,r,o;if(r=e.match(/\[(.*)\]/),r&&r[1]&&(o=r[1]),n=parseInt(e),!isNaN(n))return 0==n%2?(t='element',a=n/2-1):(t='text',a=(n-1)/2),{type:t,index:a,id:o||null}}},{key:'parseTerminal',value:function(e){var t=e.match(/\[(.*)\]/),n,a;return t&&t[1]?(n=parseInt(e.split('[')[0]),a=t[1]):n=parseInt(e),(0,s.isNumber)(n)||(n=null),{offset:n,assertion:a}}},{key:'getChapterComponent',value:function(e){var t=e.split('!');return t[0]}},{key:'getPathComponent',value:function(e){var t=e.split('!');if(t[1]){var n=t[1].split(',');return n[0]}}},{key:'getRange',value:function(e){var t=e.split(',');return 3===t.length&&[t[1],t[2]]}},{key:'getCharecterOffsetComponent',value:function(e){var t=e.split(':');return t[1]||''}},{key:'joinSteps',value:function(e){return e?e.map(function(e){var t='';return'element'===e.type&&(t+=2*(e.index+1)),'text'===e.type&&(t+=1+2*e.index),e.id&&(t+='['+e.id+']'),t}).join('/'):''}},{key:'segmentString',value:function(e){var t='/';return t+=this.joinSteps(e.steps),e.terminal&&null!=e.terminal.offset&&(t+=':'+e.terminal.offset),e.terminal&&null!=e.terminal.assertion&&(t+='['+e.terminal.assertion+']'),t}},{key:'toString',value:function(){var e='epubcfi(';return e+=this.segmentString(this.base),e+='!',e+=this.segmentString(this.path),this.range&&this.start&&(e+=',',e+=this.segmentString(this.start)),this.range&&this.end&&(e+=',',e+=this.segmentString(this.end)),e+=')',e}},{key:'compare',value:function(t,n){var a,r,o,s,l,l;if('string'==typeof t&&(t=new e(t)),'string'==typeof n&&(n=new e(n)),t.spinePos>n.spinePos)return 1;if(t.spinePos<n.spinePos)return-1;t.range?(a=t.path.steps.concat(t.start.steps),o=t.start.terminal):(a=t.path.steps,o=t.path.terminal),n.range?(r=n.path.steps.concat(n.start.steps),s=n.start.terminal):(r=n.path.steps,s=n.path.terminal);for(var d=0;d<a.length;d++){if(!a[d])return-1;if(!r[d])return 1;if(a[d].index>r[d].index)return 1;if(a[d].index<r[d].index)return-1}return a.length<r.length?-1:o.offset>s.offset?1:o.offset<s.offset?-1:0}},{key:'step',value:function(e){var t=e.nodeType===d?'text':'element';return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}},{key:'filteredStep',value:function(e,t){var n=this.filter(e,t),a;if(n)return a=n.nodeType===d?'text':'element',{id:n.id,tagName:n.tagName,type:a,index:this.filteredPosition(n,t)}}},{key:'pathTo',value:function(e,t,n){for(var a={steps:[],terminal:{offset:null,assertion:null}},r=e,o;r&&r.parentNode&&r.parentNode.nodeType!=9;)o=n?this.filteredStep(r,n):this.step(r),o&&a.steps.unshift(o),r=r.parentNode;return null!=t&&0<=t&&(a.terminal.offset=t,'text'!=a.steps[a.steps.length-1].type&&a.steps.push({type:'text',index:0})),a}},{key:'equalStep',value:function(e,t){return e&&t&&e.index===t.index&&e.id===t.id&&e.type===t.type}},{key:'fromRange',value:function(e,t,n){var a={range:!1,base:{},path:{},start:null,end:null},o=e.startContainer,s=e.endContainer,l=e.startOffset,d=e.endOffset,c=!1;if(n&&(c=null!=o.ownerDocument.querySelector('.'+n)),'string'==typeof t?(a.base=this.parseComponent(t),a.spinePos=a.base.steps[1].index):'object'===('undefined'==typeof t?'undefined':r(t))&&(a.base=t),e.collapsed)c&&(l=this.patchOffset(o,l,n)),a.path=this.pathTo(o,l,n);else{a.range=!0,c&&(l=this.patchOffset(o,l,n)),a.start=this.pathTo(o,l,n),c&&(d=this.patchOffset(s,d,n)),a.end=this.pathTo(s,d,n),a.path={steps:[],terminal:null};var p=a.start.steps.length,u;for(u=0;u<p&&this.equalStep(a.start.steps[u],a.end.steps[u]);u++)u===p-1?a.start.terminal===a.end.terminal&&(a.path.steps.push(a.start.steps[u]),a.range=!1):a.path.steps.push(a.start.steps[u]);a.start.steps=a.start.steps.slice(a.path.steps.length),a.end.steps=a.end.steps.slice(a.path.steps.length)}return a}},{key:'fromNode',value:function(e,t,n){var a={range:!1,base:{},path:{},start:null,end:null};return'string'==typeof t?(a.base=this.parseComponent(t),a.spinePos=a.base.steps[1].index):'object'===('undefined'==typeof t?'undefined':r(t))&&(a.base=t),a.path=this.pathTo(e,null,n),a}},{key:'filter',value:function(e,t){var n=!1,a,r,o,i,s;return e.nodeType===d?(n=!0,o=e.parentNode,a=e.parentNode.classList.contains(t)):(n=!1,a=e.classList.contains(t)),a&&n?(i=o.previousSibling,s=o.nextSibling,i&&i.nodeType===d?r=i:s&&s.nodeType===d&&(r=s),r?r:e):a&&!n?!1:e}},{key:'patchOffset',value:function(e,t,n){if(e.nodeType!=d)throw new Error('Anchor must be a text node');var a=e,r=t;for(e.parentNode.classList.contains(n)&&(a=e.parentNode);a.previousSibling;){if(a.previousSibling.nodeType!==l)r+=a.previousSibling.textContent.length;else if(a.previousSibling.classList.contains(n))r+=a.previousSibling.textContent.length;else break;a=a.previousSibling}return r}},{key:'normalizedMap',value:function(e,t,n){var a={},r=-1,o=e.length,s,i,c;for(s=0;s<o;s++)i=e[s].nodeType,i===l&&e[s].classList.contains(n)&&(i=d),0<s&&i===d&&c===d?a[s]=r:t===i&&(++r,a[s]=r),c=i;return a}},{key:'position',value:function(e){var t,n;return e.nodeType===l?(t=e.parentNode.children,!t&&(t=(0,s.findChildren)(e.parentNode)),n=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),n=t.indexOf(e)),n}},{key:'filteredPosition',value:function(e,t){var n,a,r;return e.nodeType===l?(n=e.parentNode.children,r=this.normalizedMap(n,l,t)):(n=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,n=e.parentNode.childNodes),r=this.normalizedMap(n,d,t)),a=Array.prototype.indexOf.call(n,e),r[a]}},{key:'stepsToXpath',value:function(e){var t=['.','*'];return e.forEach(function(e){var n=e.index+1;e.id?t.push('*[position()='+n+' and @id=\''+e.id+'\']'):'text'===e.type?t.push('text()['+n+']'):t.push('*['+n+']')}),t.join('/')}},{key:'stepsToQuerySelector',value:function(e){var t=['html'];return e.forEach(function(e){var n=e.index+1;e.id?t.push('#'+e.id):'text'===e.type||t.push('*:nth-child('+n+')')}),t.join('>')}},{key:'textNodes',value:function(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(e){return e.nodeType===d||t&&e.classList.contains(t)})}},{key:'walkToNode',value:function(e,t,n){var a=t||document,r=a.documentElement,o=e.length,l,d,c;for(c=0;c<o&&(d=e[c],'element'===d.type?d.id?r=a.getElementById(d.id):(l=r.children||(0,s.findChildren)(r),r=l[d.index]):'text'===d.type&&(r=this.textNodes(r,n)[d.index]),!!r);c++);return r}},{key:'findNode',value:function(e,t,n){var a=t||document,r,o;return n||'undefined'==typeof a.evaluate?n?r=this.walkToNode(e,a,n):r=this.walkToNode(e,a):(o=this.stepsToXpath(e),r=a.evaluate(o,a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),r}},{key:'fixMiss',value:function(e,t,n,a){var r=this.findNode(e.slice(0,-1),n,a),o=r.childNodes,i=this.normalizedMap(o,d,a),s=e[e.length-1].index,c,p;for(var u in i){if(!i.hasOwnProperty(u))return;if(i[u]===s)if(c=o[u],p=c.textContent.length,t>p)t-=p;else{r=c.nodeType===l?c.childNodes[0]:c;break}}return{container:r,offset:t}}},{key:'toRange',value:function(e,t){var n=e||document,a=this,r=!!t&&null!=n.querySelector('.'+t),o,i,l,d,c,p,u,g;if(o='undefined'==typeof n.createRange?new s.RangeObject:n.createRange(),a.range?(i=a.start,p=a.path.steps.concat(i.steps),d=this.findNode(p,n,r?t:null),l=a.end,u=a.path.steps.concat(l.steps),c=this.findNode(u,n,r?t:null)):(i=a.path,p=a.path.steps,d=this.findNode(a.path.steps,n,r?t:null)),d)try{null==i.terminal.offset?o.setStart(d,0):o.setStart(d,i.terminal.offset)}catch(a){g=this.fixMiss(p,i.terminal.offset,n,r?t:null),o.setStart(g.container,g.offset)}else return console.log('No startContainer found for',this.toString()),null;if(c)try{null==l.terminal.offset?o.setEnd(c,0):o.setEnd(c,l.terminal.offset)}catch(i){g=this.fixMiss(u,a.end.terminal.offset,n,r?t:null),o.setEnd(g.container,g.offset)}return o}},{key:'isCfiString',value:function(e){return'string'==typeof e&&0===e.indexOf('epubcfi(')&&')'===e[e.length-1]}},{key:'generateChapterComponent',value:function(e,t,n){var a=parseInt(t),r='/'+2*(e+1)+'/';return r+=2*(a+1),n&&(r+='['+n+']'),r}},{key:'collapse',value:function(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}]),e}();t.default=i,e.exports=t['default']},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=t.EPUBJS_VERSION='0.3',a=t.DOM_EVENTS=['keydown','keyup','keypressed','mouseup','mousedown','click','touchend','touchstart','touchmove'],r=t.EVENTS={BOOK:{OPEN_FAILED:'openFailed'},CONTENTS:{EXPAND:'expand',RESIZE:'resize',SELECTED:'selected',SELECTED_RANGE:'selectedRange',LINK_CLICKED:'linkClicked'},LOCATIONS:{CHANGED:'changed'},MANAGERS:{RESIZE:'resize',RESIZED:'resized',ORIENTATION_CHANGE:'orientationchange',ADDED:'added',SCROLL:'scroll',SCROLLED:'scrolled',REMOVED:'removed'},VIEWS:{AXIS:'axis',LOAD_ERROR:'loaderror',RENDERED:'rendered',RESIZED:'resized',DISPLAYED:'displayed',SHOWN:'shown',HIDDEN:'hidden',MARK_CLICKED:'markClicked'},RENDITION:{STARTED:'started',ATTACHED:'attached',DISPLAYED:'displayed',DISPLAY_ERROR:'displayerror',RENDERED:'rendered',REMOVED:'removed',RESIZED:'resized',ORIENTATION_CHANGE:'orientationchange',LOCATION_CHANGED:'locationChanged',RELOCATED:'relocated',MARK_CLICKED:'markClicked',SELECTED:'selected',LAYOUT:'layout'},LAYOUT:{UPDATED:'updated'},ANNOTATION:{ATTACH:'attach',DETACH:'detach'}}},function(e,t,n){var a=n(5);e.exports=function(e,t){if(!a(e))return e;var n,r;if(t&&'function'==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if('function'==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&'function'==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError('Can\'t convert object to primitive value')}},function(e){e.exports=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e}},function(e){e.exports=function(e){return isNaN(e=+e)?0:(0<e?g:y)(e)}},function(e,t,n){var a=n(0),r=n(21),o=n(4);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],i={};i[e]=t(n),a(a.S+a.F*o(function(){n(1)}),'Object',i)}},function(e,t,n){var a=n(22),r=n(57),o=n(11),i=n(10),s=n(99);e.exports=function(e,t){var n=1==e,l=4==e,d=6==e,c=t||s;return function(t,s,p){for(var u=o(t),g=r(u),h=a(s,p,3),f=i(g.length),m=0,y=n?c(t,f):2==e?c(t,0):void 0,v,b;f>m;m++)if((5==e||d||m in g)&&(v=g[m],b=h(v,m,u),e))if(n)y[m]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return m;case 2:y.push(v);}else if(l)return!1;return d?-1:3==e||l?l:y}}},function(e,t,n){'use strict';var a=n(372),r=n(386),o=Function.prototype.apply,s=Function.prototype.call,i=Object.create,l=Object.defineProperty,d=Object.defineProperties,c=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0},u,g,h,f,m,y,v;u=function(e,t){var n;return r(t),c.call(this,'__ee__')?n=this.__ee__:(n=p.value=i(null),l(this,'__ee__',p),p.value=null),n[e]?'object'==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},g=function(e,t){var n,a;return r(t),a=this,u.call(this,e,n=function(){h.call(a,e,n),o.call(t,this,arguments)}),n.__eeOnceListener__=t,this},h=function(e,t){var n,a,o,s;if(r(t),!c.call(this,'__ee__'))return this;if(n=this.__ee__,!n[e])return this;if(a=n[e],'object'==typeof a)for(s=0;o=a[s];++s)(o===t||o.__eeOnceListener__===t)&&(2===a.length?n[e]=a[s?0:1]:a.splice(s,1));else(a===t||a.__eeOnceListener__===t)&&delete n[e];return this},f=function(e){var t,n,a,r,i;if(c.call(this,'__ee__')&&(r=this.__ee__[e],!!r))if('object'==typeof r){for(n=arguments.length,i=Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(r=r.slice(),t=0;a=r[t];++t)o.call(a,this,i)}else switch(arguments.length){case 1:s.call(r,this);break;case 2:s.call(r,this,arguments[1]);break;case 3:s.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];o.call(r,this,i);}},m={on:u,once:g,off:h,emit:f},y={on:a(u),once:a(g),off:a(h),emit:a(f)},v=d({},y),e.exports=t=function(e){return null==e?i(v):d(Object(e),y)},t.methods=m},function(e,t,n){'use strict';if(n(8)){var a=n(36),r=n(2),o=n(4),i=n(0),s=n(71),l=n(105),d=n(22),c=n(45),p=n(38),h=n(14),f=n(47),m=n(29),y=n(10),v=n(143),b=n(41),_=n(27),x=n(17),k=n(59),E=n(5),S=n(11),w=n(96),N=n(42),T=n(20),C=n(43).f,R=n(98),A=n(39),I=n(6),O=n(31),P=n(61),L=n(68),D=n(101),B=n(53),M=n(65),z=n(44),F=n(100),j=n(133),U=n(9),H=n(19),q=U.f,W=H.f,V=r.RangeError,Y=r.TypeError,G=r.Uint8Array,X='ArrayBuffer',K='Shared'+X,Z='BYTES_PER_ELEMENT',$='prototype',J=Array[$],Q=l.ArrayBuffer,ee=l.DataView,te=O(0),ne=O(2),ae=O(3),re=O(4),oe=O(5),ie=O(6),se=P(!0),le=P(!1),de=D.values,ce=D.keys,pe=D.entries,ue=J.lastIndexOf,ge=J.reduce,he=J.reduceRight,fe=J.join,me=J.sort,ye=J.slice,ve=J.toString,be=J.toLocaleString,_e=I('iterator'),xe=I('toStringTag'),ke=A('typed_constructor'),Ee=A('def_constructor'),Se=s.CONSTR,we=s.TYPED,Ne=s.VIEW,Te='Wrong length!',Ce=O(1,function(e,t){return Pe(L(e,e[Ee]),t)}),Re=o(function(){return 1===new G(new Uint16Array([1]).buffer)[0]}),Ae=!!G&&!!G[$].set&&o(function(){new G(1).set({})}),Ie=function(e,t){var n=m(e);if(0>n||n%t)throw V('Wrong offset!');return n},Oe=function(e){if(E(e)&&we in e)return e;throw Y(e+' is not a typed array!')},Pe=function(e,t){if(!(E(e)&&ke in e))throw Y('It is not a typed array constructor!');return new e(t)},Le=function(e,t){return De(L(e,e[Ee]),t)},De=function(e,t){for(var n=0,a=t.length,r=Pe(e,a);a>n;)r[n]=t[n++];return r},Be=function(e,t,n){q(e,t,{get:function(){return this._d[n]}})},Me=function(e){var t=S(e),n=arguments.length,a=1<n?arguments[1]:void 0,r=a!==void 0,o=R(t),s,i,l,c,p,u;if(o!=void 0&&!w(o)){for(u=o.call(t),l=[],s=0;!(p=u.next()).done;s++)l.push(p.value);t=l}for(r&&2<n&&(a=d(a,arguments[2],2)),s=0,i=y(t.length),c=Pe(this,i);i>s;s++)c[s]=r?a(t[s],s):t[s];return c},ze=function(){for(var e=0,t=arguments.length,n=Pe(this,t);t>e;)n[e]=arguments[e++];return n},Fe=!!G&&o(function(){be.call(new G(1))}),je=function(){return be.apply(Fe?ye.call(Oe(this)):Oe(this),arguments)},Ue={copyWithin:function(e,t){return j.call(Oe(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return re(Oe(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(){return F.apply(Oe(this),arguments)},filter:function(e){return Le(this,ne(Oe(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return oe(Oe(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ie(Oe(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){te(Oe(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return le(Oe(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return se(Oe(this),e,1<arguments.length?arguments[1]:void 0)},join:function(){return fe.apply(Oe(this),arguments)},lastIndexOf:function(){return ue.apply(Oe(this),arguments)},map:function(e){return Ce(Oe(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(){return ge.apply(Oe(this),arguments)},reduceRight:function(){return he.apply(Oe(this),arguments)},reverse:function(){for(var e=this,t=Oe(e).length,n=g(t/2),a=0,r;a<n;)r=e[a],e[a++]=e[--t],e[t]=r;return e},some:function(e){return ae(Oe(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return me.call(Oe(this),e)},subarray:function(e,t){var n=Oe(this),a=n.length,r=b(e,a);return new(L(n,n[Ee]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,y((t===void 0?a:b(t,a))-r))}},He=function(e,t){return Le(this,ye.call(Oe(this),e,t))},qe=function(e){Oe(this);var t=Ie(arguments[1],1),n=this.length,a=S(e),r=y(a.length),o=0;if(r+t>n)throw V(Te);for(;o<r;)this[t+o]=a[o++]},We={entries:function(){return pe.call(Oe(this))},keys:function(){return ce.call(Oe(this))},values:function(){return de.call(Oe(this))}},Ve=function(e,t){return E(e)&&e[we]&&'symbol'!=typeof t&&t in e&&+t+''==t+''},Ye=function(e,t){return Ve(e,t=_(t,!0))?p(2,e[t]):W(e,t)},Ge=function(e,t,n){return Ve(e,t=_(t,!0))&&E(n)&&x(n,'value')&&!x(n,'get')&&!x(n,'set')&&!n.configurable&&(!x(n,'writable')||n.writable)&&(!x(n,'enumerable')||n.enumerable)?(e[t]=n.value,e):q(e,t,n)};Se||(H.f=Ye,U.f=Ge),i(i.S+i.F*!Se,'Object',{getOwnPropertyDescriptor:Ye,defineProperty:Ge}),o(function(){ve.call({})})&&(ve=be=function(){return fe.call(this)});var Xe=f({},Ue);f(Xe,We),h(Xe,_e,We.values),f(Xe,{slice:He,set:qe,constructor:function(){},toString:ve,toLocaleString:je}),Be(Xe,'buffer','b'),Be(Xe,'byteOffset','o'),Be(Xe,'byteLength','l'),Be(Xe,'length','e'),q(Xe,xe,{get:function(){return this[we]}}),e.exports=function(e,t,n,l){l=!!l;var d=e+(l?'Clamped':'')+'Array',p=r[d],g=p||{},f=p&&T(p),m=!p||!s.ABV,b={},_=p&&p[$],x=function(n,a){var r=n._d;return r.v['get'+e](a*t+r.o,Re)},S=function(n,a,r){var o=n._d;l&&(r=0>(r=u(r))?0:255<r?255:255&r),o.v['set'+e](a*t+o.o,r,Re)},w=function(e,t){q(e,t,{get:function(){return x(this,t)},set:function(e){return S(this,t,e)},enumerable:!0})};m?(p=n(function(e,n,a,r){c(e,p,d,'_d');var o=0,i=0,s,l,u,g;if(!E(n))u=v(n),l=u*t,s=new Q(l);else if(n instanceof Q||(g=k(n))==X||g==K){s=n,i=Ie(a,t);var f=n.byteLength;if(void 0===r){if(f%t)throw V(Te);if(l=f-i,0>l)throw V(Te)}else if(l=y(r)*t,l+i>f)throw V(Te);u=l/t}else return we in n?De(p,n):Me.call(p,n);for(h(e,'_d',{b:s,o:i,l:l,e:u,v:new ee(s)});o<u;)w(e,o++)}),_=p[$]=N(Xe),h(_,'constructor',p)):(!o(function(){p(1)})||!o(function(){new p(-1)})||!M(function(e){new p,new p(null),new p(1.5),new p(e)},!0))&&(p=n(function(e,n,a,r){c(e,p,d);var o;return E(n)?n instanceof Q||(o=k(n))==X||o==K?void 0===r?void 0===a?new g(n):new g(n,Ie(a,t)):new g(n,Ie(a,t),r):we in n?De(p,n):Me.call(p,n):new g(v(n))}),te(f===Function.prototype?C(g):C(g).concat(C(f)),function(e){e in p||h(p,e,g[e])}),p[$]=_,!a&&(_.constructor=p));var R=_[_e],A=!!R&&('values'==R.name||R.name==void 0),I=We.values;h(p,ke,!0),h(_,we,d),h(_,Ne,!0),h(_,Ee,p),(l?new p(1)[xe]!=d:!(xe in _))&&q(_,xe,{get:function(){return d}}),b[d]=p,i(i.G+i.W+i.F*(p!=g),b),i(i.S,d,{BYTES_PER_ELEMENT:t}),i(i.S+i.F*o(function(){g.of.call(p,1)}),d,{from:Me,of:ze}),Z in _||h(_,Z,t),i(i.P,d,Ue),z(d),i(i.P+i.F*Ae,d,{set:qe}),i(i.P+i.F*!A,d,We),a||_.toString==ve||(_.toString=ve),i(i.P+i.F*o(function(){new p(1).slice()}),d,{slice:He}),i(i.P+i.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),d,{toLocaleString:je}),B[d]=A?R:I,a||A||h(_,_e,I)}}else e.exports=function(){}},function(e,t,n){var a=n(138),r=n(0),o=n(60)('metadata'),i=o.store||(o.store=new(n(141))),s=function(e,t,n){var r=i.get(e);if(!r){if(!n)return;i.set(e,r=new a)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new a)}return o};e.exports={store:i,map:s,has:function(e,t,n){var a=s(t,n,!1);return a!==void 0&&a.has(e)},get:function(e,t,n){var a=s(t,n,!1);return a===void 0?void 0:a.get(e)},set:function(e,t,n,a){s(n,a,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),a=[];return n&&n.forEach(function(e,t){a.push(t)}),a},key:function(e){return e===void 0||'symbol'==typeof e?e:e+''},exp:function(e){r(r.S,'Reflect',e)}}},function(e,t,n){var a=n(39)('meta'),r=n(5),o=n(17),i=n(9).f,s=0,l=Object.isExtensible||function(){return!0},d=!n(4)(function(){return l(Object.preventExtensions({}))}),c=function(e){i(e,a,{value:{i:'O'+ ++s,w:{}}})},p=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!r(e))return'symbol'==typeof e?e:('string'==typeof e?'S':'P')+e;if(!o(e,a)){if(!l(e))return'F';if(!t)return'E';c(e)}return e[a].i},getWeak:function(e,t){if(!o(e,a)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[a].w},onFreeze:function(e){return d&&p.NEED&&l(e)&&!o(e,a)&&c(e),e}}},function(e){e.exports=!1},function(e,t,n){var a=n(6)('unscopables'),r=Array.prototype;r[a]==void 0&&n(14)(r,a,{}),e.exports=function(e){r[a][e]=!0}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){var t=0,n=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+n).toString(36))}},function(e,t,n){var a=n(119),r=n(83);e.exports=Object.keys||function(e){return a(e,r)}},function(e,t,n){var a=n(29);e.exports=function(e,t){return e=a(e),0>e?f(e+t,0):h(e,t)}},function(e,t,n){var a=n(1),r=n(120),o=n(83),i=n(82)('IE_PROTO'),s=function(){},l='prototype',d=function(){var e=n(80)('iframe'),t=o.length,a='<',r='>',i;for(e.style.display='none',n(84).appendChild(e),e.src='javascript:',i=e.contentWindow.document,i.open(),i.write(a+'script'+r+'document.F=Object'+a+'/script'+r),i.close(),d=i.F;t--;)delete d[l][o[t]];return d()};e.exports=Object.create||function(e,t){var n;return null===e?n=d():(s[l]=a(e),n=new s,s[l]=null,n[i]=e),void 0===t?n:r(n,t)}},function(e,t,n){var a=n(119),r=n(83).concat('length','prototype');t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},function(e,t,n){'use strict';var a=n(2),r=n(9),o=n(8),i=n(6)('species');e.exports=function(e){var t=a[e];o&&t&&!t[i]&&r.f(t,i,{configurable:!0,get:function(){return this}})}},function(e){e.exports=function(e,t,n,a){if(!(e instanceof t)||a!==void 0&&a in e)throw TypeError(n+': incorrect invocation!');return e}},function(e,t,n){var a=n(22),r=n(131),o=n(96),i=n(1),s=n(10),l=n(98),d={},c={},t=e.exports=function(e,t,n,p,u){var g=u?function(){return e}:l(e),h=a(n,p,t?2:1),f=0,m,y,v,b;if('function'!=typeof g)throw TypeError(e+' is not iterable!');if(o(g)){for(m=s(e.length);m>f;f++)if(b=t?h(i(y=e[f])[0],y[1]):h(e[f]),b===d||b===c)return b;}else for(v=g.call(e);!(y=v.next()).done;)if(b=r(v,h,y.value,t),b===d||b===c)return b};t.BREAK=d,t.RETURN=c},function(e,t,n){var a=n(15);e.exports=function(e,t,n){for(var r in t)a(e,r,t[r],n);return e}},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(76),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){a(this,e);var n,r;n=t.indexOf('://'),-1<n&&(t=new URL(t).pathname),r=this.parse(t),this.path=t,this.directory=this.isDirectory(t)?t:r.dir+'/',this.filename=r.base,this.extension=r.ext.slice(1)}return r(e,[{key:'parse',value:function(e){return i.default.parse(e)}},{key:'isAbsolute',value:function(e){return i.default.isAbsolute(e||this.path)}},{key:'isDirectory',value:function(e){return'/'===e.charAt(e.length-1)}},{key:'resolve',value:function(e){return i.default.resolve(this.directory,e)}},{key:'relative',value:function(e){var t=e&&-1<e.indexOf('://');return t?e:i.default.relative(this.directory,e)}},{key:'splitPath',value:function(e){return this.splitPathRe.exec(e).slice(1)}},{key:'toString',value:function(){return this.path}}]),e}();t.default=s,e.exports=t['default']},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(108),n(109))})(this,function(e){return function(){var t=e,n=t.lib,a=n.Base,r=n.WordArray,o=t.algo,i=o.MD5,s=o.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=n.hasher.create(),o=r.create(),s=o.words,l=n.keySize,d=n.iterations;s.length<l;){c&&a.update(c);var c=a.update(e).finalize(t);a.reset();for(var p=1;p<d;p++)c=a.finalize(c),a.reset();o.concat(c)}return o.sigBytes=4*l,o}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF})},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,n){var a=n(9).f,r=n(17),o=n(6)('toStringTag');e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&a(e,o,{configurable:!0,value:t})}},function(e,t,n){var a=n(0),r=n(28),o=n(4),i=n(86),s='['+i+']',l='\u200B\x85',d=RegExp('^'+s+s+'*'),c=RegExp(s+s+'*$'),p=function(e,t,n){var r={},s=o(function(){return!!i[e]()||l[e]()!=l}),d=r[e]=s?t(u):i[e];n&&(r[n]=d),a(a.P+a.F*s,'String',r)},u=p.trim=function(e,t){return e=r(e)+'',1&t&&(e=e.replace(d,'')),2&t&&(e=e.replace(c,'')),e};e.exports=p},function(e){e.exports={}},function(e,t,n){var a=n(5);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError('Incompatible receiver, '+t+' required!');return e}},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){function t(e,t,n){for(var a=[],o=0,s=0;s<t;s++)if(s%4){var i=n[e.charCodeAt(s-1)]<<2*(s%4),l=n[e.charCodeAt(s)]>>>6-2*(s%4);a[o>>>2]|=(i|l)<<24-8*(o%4),o++}return r.create(a,o)}var n=e,a=n.lib,r=a.WordArray,o=n.enc,i=o.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,a=this._map;e.clamp();for(var r=[],o=0;o<n;o+=3)for(var i=255&t[o>>>2]>>>24-8*(o%4),s=255&t[o+1>>>2]>>>24-8*((o+1)%4),l=255&t[o+2>>>2]>>>24-8*((o+2)%4),d=0;4>d&&o+0.75*d<n;d++)r.push(a.charAt(63&(i<<16|s<<8|l)>>>6*(3-d)));var c=a.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join('')},parse:function(e){var n=e.length,a=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<a.length;o++)r[a.charCodeAt(o)]=o}var i=a.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(n=s)}return t(e,n,r)},_map:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='}}(),e.enc.Base64})},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){function t(e,a,r,o,i,l,s){var t=e+(a&r|~a&o)+i+s;return(t<<l|t>>>32-l)+a}function n(e,a,r,o,i,l,s){var t=e+(a&o|r&~o)+i+s;return(t<<l|t>>>32-l)+a}function r(e,a,r,o,i,l,s){var t=e+(a^r^o)+i+s;return(t<<l|t>>>32-l)+a}function o(e,a,r,o,i,l,s){var t=e+(r^(a|~o))+i+s;return(t<<l|t>>>32-l)+a}var a=e,i=a.lib,s=i.WordArray,l=i.Hasher,d=a.algo,u=[];(function(){for(var e=0;64>e;e++)u[e]=0|4294967296*c(p(e+1))})();var h=d.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var l=0;16>l;l++){var i=s+l,p=e[i];e[i]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}var g=this._hash.words,h=e[s+0],f=e[s+1],m=e[s+2],y=e[s+3],v=e[s+4],_=e[s+5],x=e[s+6],k=e[s+7],E=e[s+8],S=e[s+9],w=e[s+10],N=e[s+11],T=e[s+12],C=e[s+13],R=e[s+14],A=e[s+15],I=g[0],a=g[1],b=g[2],c=g[3];I=t(I,a,b,c,h,7,u[0]),c=t(c,I,a,b,f,12,u[1]),b=t(b,c,I,a,m,17,u[2]),a=t(a,b,c,I,y,22,u[3]),I=t(I,a,b,c,v,7,u[4]),c=t(c,I,a,b,_,12,u[5]),b=t(b,c,I,a,x,17,u[6]),a=t(a,b,c,I,k,22,u[7]),I=t(I,a,b,c,E,7,u[8]),c=t(c,I,a,b,S,12,u[9]),b=t(b,c,I,a,w,17,u[10]),a=t(a,b,c,I,N,22,u[11]),I=t(I,a,b,c,T,7,u[12]),c=t(c,I,a,b,C,12,u[13]),b=t(b,c,I,a,R,17,u[14]),a=t(a,b,c,I,A,22,u[15]),I=n(I,a,b,c,f,5,u[16]),c=n(c,I,a,b,x,9,u[17]),b=n(b,c,I,a,N,14,u[18]),a=n(a,b,c,I,h,20,u[19]),I=n(I,a,b,c,_,5,u[20]),c=n(c,I,a,b,w,9,u[21]),b=n(b,c,I,a,A,14,u[22]),a=n(a,b,c,I,v,20,u[23]),I=n(I,a,b,c,S,5,u[24]),c=n(c,I,a,b,R,9,u[25]),b=n(b,c,I,a,y,14,u[26]),a=n(a,b,c,I,E,20,u[27]),I=n(I,a,b,c,C,5,u[28]),c=n(c,I,a,b,m,9,u[29]),b=n(b,c,I,a,k,14,u[30]),a=n(a,b,c,I,T,20,u[31]),I=r(I,a,b,c,_,4,u[32]),c=r(c,I,a,b,E,11,u[33]),b=r(b,c,I,a,N,16,u[34]),a=r(a,b,c,I,R,23,u[35]),I=r(I,a,b,c,f,4,u[36]),c=r(c,I,a,b,v,11,u[37]),b=r(b,c,I,a,k,16,u[38]),a=r(a,b,c,I,w,23,u[39]),I=r(I,a,b,c,C,4,u[40]),c=r(c,I,a,b,h,11,u[41]),b=r(b,c,I,a,y,16,u[42]),a=r(a,b,c,I,x,23,u[43]),I=r(I,a,b,c,S,4,u[44]),c=r(c,I,a,b,T,11,u[45]),b=r(b,c,I,a,A,16,u[46]),a=r(a,b,c,I,m,23,u[47]),I=o(I,a,b,c,h,6,u[48]),c=o(c,I,a,b,k,10,u[49]),b=o(b,c,I,a,R,15,u[50]),a=o(a,b,c,I,_,21,u[51]),I=o(I,a,b,c,T,6,u[52]),c=o(c,I,a,b,y,10,u[53]),b=o(b,c,I,a,w,15,u[54]),a=o(a,b,c,I,f,21,u[55]),I=o(I,a,b,c,E,6,u[56]),c=o(c,I,a,b,A,10,u[57]),b=o(b,c,I,a,x,15,u[58]),a=o(a,b,c,I,C,21,u[59]),I=o(I,a,b,c,v,6,u[60]),c=o(c,I,a,b,N,10,u[61]),b=o(b,c,I,a,m,15,u[62]),a=o(a,b,c,I,S,21,u[63]),g[0]=0|g[0]+I,g[1]=0|g[1]+a,g[2]=0|g[2]+b,g[3]=0|g[3]+c},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32;var r=g(n/4294967296),o=n;t[(a+64>>>9<<4)+15]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[(a+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,l=s.words,d=0,i;4>d;d++)i=l[d],l[d]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return s},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=l._createHelper(h),a.HmacMD5=l._createHmacHelper(h)}(Math),e.MD5})},function(e,t,n){var a=n(23);e.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==a(e)?e.split(''):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var a=n(23),r=n(6)('toStringTag'),o='Arguments'==a(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,n,s;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(n=i(t=Object(e),r))?n:o?a(t):'Object'==(s=a(t))&&'function'==typeof t.callee?'Arguments':s}},function(e,t,n){var a=n(21),r=n(2),o='__core-js_shared__',i=r[o]||(r[o]={});(e.exports=function(e,t){return i[e]||(i[e]=t===void 0?{}:t)})('versions',[]).push({version:a.version,mode:n(36)?'pure':'global',copyright:'\xA9 2018 Denis Pushkarev (zloirock.ru)'})},function(e,t,n){var a=n(18),r=n(10),o=n(41);e.exports=function(e){return function(t,n,i){var s=a(t),l=r(s.length),d=o(i,l),c;if(e&&n!=n){for(;l>d;)if(c=s[d++],c!=c)return!0;}else for(;l>d;d++)if((e||d in s)&&s[d]===n)return e||d||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var a=n(23);e.exports=Array.isArray||function(e){return'Array'==a(e)}},function(e,t,n){var a=n(5),r=n(23),o=n(6)('match');e.exports=function(e){var t;return a(e)&&((t=e[o])===void 0?'RegExp'==r(e):!!t)}},function(e,t,n){var a=n(6)('iterator'),r=!1;try{var o=[7][a]();o['return']=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],i=o[a]();i.next=function(){return{done:n=!0}},o[a]=function(){return i},e(o)}catch(t){}return n}},function(e,t,n){'use strict';var a=n(1);e.exports=function(){var e=a(this),t='';return e.global&&(t+='g'),e.ignoreCase&&(t+='i'),e.multiline&&(t+='m'),e.unicode&&(t+='u'),e.sticky&&(t+='y'),t}},function(e,t,n){'use strict';var a=n(14),r=n(15),o=n(4),i=n(28),s=n(6);e.exports=function(e,t,n){var l=s(e),d=n(i,l,''[e]),c=d[0],p=d[1];o(function(){var t={};return t[l]=function(){return 7},7!=''[e](t)})&&(r(String.prototype,e,c),a(RegExp.prototype,l,2==t?function(e,t){return p.call(e,this,t)}:function(e){return p.call(e,this)}))}},function(e,t,n){var a=n(1),r=n(13),o=n(6)('species');e.exports=function(e,t){var n=a(e).constructor,i;return n===void 0||(i=a(n)[o])==void 0?t:r(i)}},function(e,t,n){var a=n(2),r=a.navigator;e.exports=r&&r.userAgent||''},function(e,t,n){'use strict';var a=n(2),r=n(0),o=n(15),i=n(47),s=n(35),l=n(46),d=n(45),c=n(5),p=n(4),u=n(65),g=n(51),h=n(87);e.exports=function(e,t,n,f,m,y){var v=a[e],b=v,_=m?'set':'add',x=b&&b.prototype,k={},E=function(e){var t=x[e];o(x,e,'delete'==e?function(e){return y&&!c(e)?!1:t.call(this,0===e?0:e)}:'has'==e?function(e){return y&&!c(e)?!1:t.call(this,0===e?0:e)}:'get'==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:'add'==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if('function'!=typeof b||!(y||x.forEach&&!p(function(){new b().entries().next()})))b=f.getConstructor(t,e,m,_),i(b.prototype,n),s.NEED=!0;else{var S=new b,w=S[_](y?{}:-0,1)!=S,N=p(function(){S.has(1)}),T=u(function(e){new b(e)}),R=!y&&p(function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)});T||(b=t(function(t,n){d(t,b,e);var a=h(new v,t,b);return void 0!=n&&l(n,m,a[_],a),a}),b.prototype=x,x.constructor=b),(N||R)&&(E('delete'),E('has'),m&&E('get')),(R||w)&&E(_),y&&x.clear&&delete x.clear}return g(b,e),k[e]=b,r(r.G+r.W+r.F*(b!=v),k),y||f.setStrong(b,e,m),b}},function(e,t,n){for(var a=n(2),r=n(14),o=n(39),s=o('typed_array'),l=o('view'),d=!!(a.ArrayBuffer&&a.DataView),c=d,p=0,i=['Int8Array','Uint8Array','Uint8ClampedArray','Int16Array','Uint16Array','Int32Array','Uint32Array','Float32Array','Float64Array'],u;p<9;)(u=a[i[p++]])?(r(u.prototype,s,!0),r(u.prototype,l,!0)):c=!1;e.exports={ABV:d,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,n){'use strict';e.exports=n(36)||!n(4)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(2)[e]})},function(e,t,n){'use strict';var a=n(0);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){'use strict';var a=n(0),r=n(13),o=n(22),i=n(46);e.exports=function(e){a(a.S,e,{from:function(e){var t=arguments[1],a,s,l,n;return(r(this),a=void 0!==t,a&&r(t),void 0==e)?new this:(s=[],a?(l=0,n=o(t,arguments[2],2),i(e,!1,function(e){s.push(n(e,l++))})):i(e,!1,s.push,s),new this(s))}})}},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(48),s=a(i),l=n(76),d=a(l),c=function(){function e(t,n){r(this,e);var a=-1<t.indexOf('://'),o=t,i;if(this.Url=void 0,this.href=t,this.protocol='',this.origin='',this.hash='',this.hash='',this.search='',this.base=n,!a&&!1!==n&&'string'!=typeof n&&window&&window.location&&(this.base=window.location.href),a||this.base)try{this.Url=this.base?new URL(t,this.base):new URL(t),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,o=this.Url.pathname}catch(t){this.Url=void 0,this.base&&(i=new s.default(this.base),o=i.resolve(o))}this.Path=new s.default(o),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}return o(e,[{key:'path',value:function(){return this.Path}},{key:'resolve',value:function(e){var t=-1<e.indexOf('://'),n;return t?e:(n=d.default.resolve(this.directory,e),this.origin+n)}},{key:'relative',value:function(e){return d.default.relative(e,this.directory)}},{key:'toString',value:function(){return this.href}}]),e}();t.default=c,e.exports=t['default']},function(e){'use strict';function t(e){if('string'!=typeof e)throw new TypeError('Path must be a string. Received '+e)}function n(e,t){for(var n='',a=-1,r=0,o=0,i;o<=e.length;++o){if(o<e.length)i=e.charCodeAt(o);else if(47===i)break;else i=47;if(47===i){if(a==o-1||1==r);else if(a!=o-1&&2==r){if(2>n.length||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){for(var s=n.length-1,l=s;0<=l&&47!==n.charCodeAt(l);--l);if(l!=s){n=-1==l?'':n.slice(0,l),a=o,r=0;continue}}else if(2===n.length||1===n.length){n='',a=o,r=0;continue}t&&(0<n.length?n+='/..':n='..')}else 0<n.length?n+='/'+e.slice(a+1,o):n=e.slice(a+1,o);a=o,r=0}else 46===i&&-1!=r?++r:r=-1}return n}function a(e,t){var n=t.dir||t.root,a=t.base||(t.name||'')+(t.ext||'');return n?n===t.root?n+a:n+e+a:a}if(!r)var r={cwd:function(){return'/'}};var o={resolve:function(){for(var e='',a=!1,o=arguments.length-1,i;-1<=o&&!a;o--){var s;(0<=o?s=arguments[o]:(void 0==i&&(i=r.cwd()),s=i),t(s),0!==s.length)&&(e=s+'/'+e,a=47===s.charCodeAt(0))}return e=n(e,!a),a?0<e.length?'/'+e:'/':0<e.length?e:'.'},normalize:function(e){if(t(e),0===e.length)return'.';var a=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return e=n(e,!a),0!==e.length||a||(e='.'),0<e.length&&r&&(e+='/'),a?'/'+e:e},isAbsolute:function(e){return t(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return'.';for(var e=0,n,a;e<arguments.length;++e)a=arguments[e],t(a),0<a.length&&(void 0==n?n=a:n+='/'+a);return void 0===n?'.':o.normalize(n)},relative:function(e,n){if(t(e),t(n),e===n)return'';if(e=o.resolve(e),n=o.resolve(n),e===n)return'';for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var r=e.length,s=r-a,l=1;l<n.length&&47===n.charCodeAt(l);++l);for(var d=n.length,c=d-l,p=s<c?s:c,u=-1,g=0;g<=p;++g){if(g==p){if(c>p){if(47===n.charCodeAt(l+g))return n.slice(l+g+1);if(0==g)return n.slice(l+g)}else s>p&&(47===e.charCodeAt(a+g)?u=g:0==g&&(u=0));break}var i=e.charCodeAt(a+g),h=n.charCodeAt(l+g);if(i!==h)break;else 47===i&&(u=g)}var f='';for(g=a+u+1;g<=r;++g)(g===r||47===e.charCodeAt(g))&&(f+=0===f.length?'..':'/..');return 0<f.length?f+n.slice(l+u):(l+=u,47===n.charCodeAt(l)&&++l,n.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return'.';for(var n=e.charCodeAt(0),a=47===n,r=-1,o=!0,s=e.length-1;1<=s;--s)if(n=e.charCodeAt(s),47!==n)o=!1;else if(!o){r=s;break}return-1===r?a?'/':'.':a&&1===r?'//':e.slice(0,r)},basename:function(e,n){if(n!==void 0&&'string'!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var a=0,r=-1,o=!0,s;if(void 0!==n&&0<n.length&&n.length<=e.length){if(n.length===e.length&&n===e)return'';var i=n.length-1,l=-1;for(s=e.length-1;0<=s;--s){var d=e.charCodeAt(s);if(47!==d)-1==l&&(o=!1,l=s+1),0<=i&&(d===n.charCodeAt(i)?-1==--i&&(r=s):(i=-1,r=l));else if(!o){a=s+1;break}}return a===r?r=l:-1===r&&(r=e.length),e.slice(a,r)}for(s=e.length-1;0<=s;--s)if(47!==e.charCodeAt(s))-1==r&&(o=!1,r=s+1);else if(!o){a=s+1;break}return-1===r?'':e.slice(a,r)},extname:function(e){t(e);for(var n=-1,a=0,r=-1,o=!0,s=0,l=e.length-1,i;0<=l;--l){if(i=e.charCodeAt(l),47===i){if(!o){a=l+1;break}continue}-1==r&&(o=!1,r=l+1),46===i?-1==n?n=l:1!=s&&(s=1):-1!==n&&(s=-1)}return-1===n||-1===r||0==s||1==s&&n===r-1&&n===a+1?'':e.slice(n,r)},format:function(e){if(null===e||'object'!=typeof e)throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return a('/',e)},parse:function(e){t(e);var n={root:'',dir:'',base:'',ext:'',name:''};if(0===e.length)return n;var a=e.charCodeAt(0),r=47===a,o;r?(n.root='/',o=1):o=0;for(var s=-1,l=0,d=-1,c=!0,p=e.length-1,i=0;p>=o;--p){if(a=e.charCodeAt(p),47===a){if(!c){l=p+1;break}continue}-1==d&&(c=!1,d=p+1),46===a?-1==s?s=p:1!=i&&(i=1):-1!=s&&(i=-1)}return-1==s||-1==d||0==i||1==i&&s==d-1&&s==l+1?-1!=d&&(0==l&&r?n.base=n.name=e.slice(1,d):n.base=n.name=e.slice(l,d)):(0==l&&r?(n.name=e.slice(1,s),n.base=e.slice(1,d)):(n.name=e.slice(l,s),n.base=e.slice(l,d)),n.ext=e.slice(s,d)),0<l?n.dir=e.slice(0,l-1):r&&(n.dir='/'),n},sep:'/',delimiter:':',posix:null};e.exports=o},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.replaceBase=function(e,t){var n=t.url,a=-1<n.indexOf('://'),o,i;e&&(i=(0,r.qs)(e,'head'),o=(0,r.qs)(i,'base'),!o&&(o=e.createElement('base'),i.insertBefore(o,i.firstChild)),!a&&window&&window.location&&(n=window.location.origin+n),o.setAttribute('href',n))},t.replaceCanonical=function(e,t){var n=t.canonical,a,o;e&&(a=(0,r.qs)(e,'head'),o=(0,r.qs)(a,'link[rel=\'canonical\']'),o?o.setAttribute('href',n):(o=e.createElement('link'),o.setAttribute('rel','canonical'),o.setAttribute('href',n),a.appendChild(o)))},t.replaceMeta=function(e,t){var n=t.idref,a,o;e&&(a=(0,r.qs)(e,'head'),o=(0,r.qs)(a,'link[property=\'dc.identifier\']'),o?o.setAttribute('content',n):(o=e.createElement('meta'),o.setAttribute('name','dc.identifier'),o.setAttribute('content',n),a.appendChild(o)))},t.replaceLinks=function(e,t){var n=e.querySelectorAll('a[href]');if(n.length)for(var a=(0,r.qs)(e.ownerDocument,'base'),o=a?a.getAttribute('href'):void 0,s=function(e){var n=e.getAttribute('href');if(0!==n.indexOf('mailto:')){var a=-1<n.indexOf('://');if(a)e.setAttribute('target','_blank');else{var r;try{r=new i.default(n,o)}catch(e){}e.onclick=function(){return r&&r.hash?t(r.Path.path+r.hash):r?t(r.Path.path):t(n),!1}}}}.bind(this),l=0;l<n.length;l++)s(n[l])},t.substitute=function(e,t,n){return t.forEach(function(t,a){t&&n[a]&&(e=e.replace(new RegExp(t,'g'),n[a]))}),e};var r=n(7),o=n(75),i=a(o),s=n(48),l=a(s)},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=n(7),r=n(48),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(151);t.default=function(e,t,n,r){function s(t){p.reject(t)}function l(){var e=this,n=function(t){var n=t?t:e.response;if('arraybuffer'==e.responseType)return n;var a=window.sharedSettings;return a&&a.decryptionKey?(0,i.decrypt)(window.sharedSettings.decryptionKey,n):n};if(this.readyState===XMLHttpRequest.DONE){var o=!1;if((''===this.responseType||'document'===this.responseType)&&(o=this.responseXML),200===this.status||0===this.status||o){var s;if(!this.response&&!o)return p.reject({status:this.status,message:'Empty Response',stack:new Error().stack}),p.promise;if(403===this.status)return p.reject({status:this.status,response:this.response,message:'Forbidden',stack:new Error().stack}),p.promise;s=o?n(this.responseXML):(0,a.isXml)(t)?(0,a.parse)(n(),'text/xml'):'xhtml'==t?(0,a.parse)(n(),'application/xhtml+xml'):'html'==t||'htm'==t?(0,a.parse)(n(),'text/html'):'json'==t?JSON.parse(n()):'blob'==t?d?n():new Blob([n()]):n(),p.resolve(s)}else p.reject({status:this.status,message:this.response,stack:new Error().stack})}}var d='undefined'!=typeof window&&window.URL,c=d?'blob':'arraybuffer',p=new a.defer,u=new XMLHttpRequest,g=XMLHttpRequest.prototype,h;for(h in'overrideMimeType'in g||Object.defineProperty(g,'overrideMimeType',{value:function(){}}),n&&(u.withCredentials=!0),u.onreadystatechange=l,u.onerror=s,u.open('GET',e,!0),r)u.setRequestHeader(h,r[h]);return'json'==t&&u.setRequestHeader('Accept','application/json'),t||(t=new o.default(e).extension),'blob'==t&&(u.responseType=c),(0,a.isXml)(t)&&u.overrideMimeType('text/xml'),'xhtml'==t,'html'!=t&&'htm'!=t,'binary'==t&&(u.responseType='arraybuffer'),u.send(),p.promise},e.exports=t['default']},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){var t=e,n=t.lib,a=n.Base,r=n.WordArray,o=t.x64={},i=o.Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),s=o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0==t?8*e.length:t},toX32:function(){for(var e=this.words,t=e.length,n=[],a=0,o;a<t;a++)o=e[a],n.push(o.high),n.push(o.low);return r.create(n,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),e})},function(e,t,n){var a=n(5),r=n(2).document,o=a(r)&&a(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var a=n(2),r=n(21),o=n(36),i=n(118),s=n(9).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:a.Symbol||{});'_'==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},function(e,t,n){var a=n(60)('keys'),r=n(39);e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e){e.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(e,t,n){var a=n(2).document;e.exports=a&&a.documentElement},function(e,t,n){var a=n(5),r=n(1),o=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+': can\'t set as prototype!')};e.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(e,t,a){try{a=n(22)(Function.call,n(19).f(Object.prototype,'__proto__').set,2),a(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:o}},function(e){e.exports='\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF'},function(e,t,n){var a=n(5),r=n(85).set;e.exports=function(e,t,n){var o=t.constructor,i;return o!==n&&'function'==typeof o&&(i=o.prototype)!==n.prototype&&a(i)&&r&&r(e,i),e}},function(e,t,n){'use strict';var a=n(29),r=n(28);e.exports=function(e){var t=r(this)+'',o='',i=a(e);if(0>i||i==Infinity)throw RangeError('Count can\'t be negative');for(;0<i;(i>>>=1)&&(t+=t))1&i&&(o+=t);return o}},function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e){var t=d;e.exports=!t||22025.465794806718<t(10)||22025.465794806718>t(10)||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&1e-6>e?e+e*e/2:l(e)-1}:t},function(e,t,n){var r=n(29),o=n(28);e.exports=function(e){return function(t,n){var d=o(t)+'',s=r(n),i=d.length,l,a;return 0>s||s>=i?e?'':void 0:(l=d.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=d.charCodeAt(s+1))||57343<a?e?d.charAt(s):l:e?d.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},function(e,t,n){'use strict';var a=n(36),r=n(0),o=n(15),i=n(14),s=n(53),l=n(93),d=n(51),c=n(20),p=n(6)('iterator'),u=!([].keys&&'next'in[].keys()),g='keys',h='values',f=function(){return this};e.exports=function(e,t,n,m,y,v,b){l(n,t,m);var _=function(e){return!u&&e in S?S[e]:e===g?function(){return new n(this,e)}:e===h?function(){return new n(this,e)}:function(){return new n(this,e)}},x=t+' Iterator',k=y==h,E=!1,S=e.prototype,w=S[p]||S['@@iterator']||y&&S[y],N=w||_(y),T=y?k?_('entries'):N:void 0,C='Array'==t?S.entries||w:w,R,A,I;if(C&&(I=c(C.call(new e)),I!==Object.prototype&&I.next&&(d(I,x,!0),!a&&'function'!=typeof I[p]&&i(I,p,f))),k&&w&&w.name!==h&&(E=!0,N=function(){return w.call(this)}),(!a||b)&&(u||E||!S[p])&&i(S,p,N),s[t]=N,s[x]=f,y)if(R={values:k?N:_(h),keys:v?N:_(g),entries:T},b)for(A in R)A in S||o(S,A,R[A]);else r(r.P+r.F*(u||E),t,R);return R}},function(e,t,n){'use strict';var a=n(42),r=n(38),o=n(51),i={};n(14)(i,n(6)('iterator'),function(){return this}),e.exports=function(e,t,n){e.prototype=a(i,{next:r(1,n)}),o(e,t+' Iterator')}},function(e,t,n){var a=n(64),r=n(28);e.exports=function(e,t,n){if(a(t))throw TypeError('String#'+n+' doesn\'t accept regex!');return r(e)+''}},function(e,t,n){var a=n(6)('match');e.exports=function(e){var t=/./;try{'/./'[e](t)}catch(n){try{return t[a]=!1,!'/./'[e](t)}catch(e){}}return!0}},function(e,t,n){var a=n(53),r=n(6)('iterator'),o=Array.prototype;e.exports=function(e){return e!==void 0&&(a.Array===e||o[r]===e)}},function(e,t,n){'use strict';var a=n(9),r=n(38);e.exports=function(e,t,n){t in e?a.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var a=n(59),r=n(6)('iterator'),o=n(53);e.exports=n(21).getIteratorMethod=function(e){if(e!=void 0)return e[r]||e['@@iterator']||o[a(e)]}},function(e,t,n){var a=n(260);e.exports=function(e,t){return new(a(e))(t)}},function(e,t,n){'use strict';var a=n(11),r=n(41),o=n(10);e.exports=function(e){for(var t=a(this),n=o(t.length),i=arguments.length,s=r(1<i?arguments[1]:void 0,n),l=2<i?arguments[2]:void 0,d=void 0===l?n:r(l,n);d>s;)t[s++]=e;return t}},function(e,t,n){'use strict';var a=n(37),r=n(134),o=n(53),i=n(18);e.exports=n(92)(Array,'Array',function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):'keys'==t?r(0,n):'values'==t?r(0,e[n]):r(0,[n,e[n]])},'values'),o.Arguments=o.Array,a('keys'),a('values'),a('entries')},function(e,t,n){var a=n(22),r=n(124),o=n(84),i=n(80),s=n(2),l=s.process,d=s.setImmediate,c=s.clearImmediate,p=s.MessageChannel,u=s.Dispatch,g=0,h={},f='onreadystatechange',m=function(){var e=+this;if(h.hasOwnProperty(e)){var t=h[e];delete h[e],t()}},y=function(e){m.call(e.data)},v,b,_;d&&c||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return h[++g]=function(){r('function'==typeof e?e:Function(e),t)},v(g),g},c=function(e){delete h[e]},'process'==n(23)(l)?v=function(e){l.nextTick(a(m,e,1))}:u&&u.now?v=function(e){u.now(a(m,e,1))}:p?(b=new p,_=b.port2,b.port1.onmessage=y,v=a(_.postMessage,_,1)):s.addEventListener&&'function'==typeof postMessage&&!s.importScripts?(v=function(e){s.postMessage(e+'','*')},s.addEventListener('message',y,!1)):f in i('script')?v=function(e){o.appendChild(i('script'))[f]=function(){o.removeChild(this),m.call(e)}}:v=function(e){setTimeout(a(m,e,1),0)}),e.exports={set:d,clear:c}},function(e,t,n){var a=n(2),r=n(102).set,o=a.MutationObserver||a.WebKitMutationObserver,i=a.process,s=a.Promise,l='process'==n(23)(i);e.exports=function(){var e=function(){var e,a;for(l&&(e=i.domain)&&e.exit();t;){a=t.fn,t=t.next;try{a()}catch(a){throw t?d():n=void 0,a}}n=void 0,e&&e.enter()},t,n,d;if(l)d=function(){i.nextTick(e)};else if(o&&!(a.navigator&&a.navigator.standalone)){var c=!0,p=document.createTextNode('');new o(e).observe(p,{characterData:!0}),d=function(){p.data=c=!c}}else if(s&&s.resolve){var u=s.resolve(void 0);d=function(){u.then(e)}}else d=function(){r.call(a,e)};return function(e){var a={fn:e,next:void 0};n&&(n.next=a),t||(t=a,d()),n=a}}},function(e,t,n){'use strict';function a(e){var t,n;this.promise=new e(function(e,a){if(t!=void 0||n!=void 0)throw TypeError('Bad Promise constructor');t=e,n=a}),this.resolve=r(t),this.reject=r(n)}var r=n(13);e.exports.f=function(e){return new a(e)}},function(e,t,n){'use strict';function a(t,n,a){var r=Array(a),o=8*a-n-1,l=(1<<o)-1,d=l>>1,p=23===n?Y(2,-24)-Y(2,-77):0,u=0,i=0>t||0===t&&0>1/t?1:0,s,g,h;for(t=V(t),t!=t||t===q?(g=t==t?0:1,s=l):(s=G(X(t)/K),1>t*(h=Y(2,-s))&&(s--,h*=2),t+=1<=s+d?p/h:p*Y(2,1-d),2<=t*h&&(s++,h/=2),s+d>=l?(g=0,s=l):1<=s+d?(g=(t*h-1)*Y(2,n),s+=d):(g=t*Y(2,d-1)*Y(2,n),s=0));8<=n;r[u++]=255&g,g/=256,n-=8);for(s=s<<n|g,o+=n;0<o;r[u++]=255&s,s/=256,o-=8);return r[--u]|=128*i,r}function r(t,n,a){var r=8*a-n-1,o=(1<<r)-1,l=o>>1,d=r-7,c=a-1,i=t[c--],s=127&i,e;for(i>>=7;0<d;s=256*s+t[c],c--,d-=8);for(e=s&(1<<-d)-1,s>>=-d,d+=n;0<d;e=256*e+t[c],c--,d-=8);if(0===s)s=1-l;else{if(s===o)return e?NaN:i?-q:q;e+=Y(2,n),s-=l}return(i?-1:1)*e*Y(2,s-n)}function l(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function d(e){return[255&e]}function p(e){return[255&e,255&e>>8]}function u(e){return[255&e,255&e>>8,255&e>>16,255&e>>24]}function h(e){return a(e,52,8)}function f(e){return a(e,23,4)}function m(e,t,n){I(e[B],t,{get:function(){return this[n]}})}function y(e,t,n,a){var r=R(+n);if(r+t>e[ee])throw H(M);var o=e[Q]._b,i=r+e[te],s=o.slice(i,i+t);return a?s:s.reverse()}function v(e,t,n,a,r,o){var s=R(+n);if(s+t>e[ee])throw H(M);for(var l=e[Q]._b,d=s+e[te],c=a(+r),p=0;p<t;p++)l[d+p]=c[o?p:t-p-1]}var b=n(2),_=n(8),x=n(36),k=n(71),E=n(14),S=n(47),w=n(4),N=n(45),T=n(29),C=n(10),R=n(143),A=n(43).f,I=n(9).f,O=n(100),P=n(51),L='ArrayBuffer',D='DataView',B='prototype',M='Wrong index!',z=b[L],F=b[D],U=b.Math,H=b.RangeError,q=b.Infinity,W=z,V=c,Y=s,G=g,X=i,K=o,Z='buffer',$='byteLength',J='byteOffset',Q=_?'_b':Z,ee=_?'_l':$,te=_?'_o':J;if(!k.ABV)z=function(e){N(this,z,L);var t=R(e);this._b=O.call(Array(t),0),this[ee]=t},F=function(e,t,n){N(this,F,D),N(e,z,D);var a=e[ee],r=T(t);if(0>r||r>a)throw H('Wrong offset!');if(n=void 0===n?a-r:C(n),r+n>a)throw H('Wrong length!');this[Q]=e,this[te]=r,this[ee]=n},_&&(m(z,$,'_l'),m(F,Z,'_b'),m(F,$,'_l'),m(F,J,'_o')),S(F[B],{getInt8:function(e){return y(this,1,e)[0]<<24>>24},getUint8:function(e){return y(this,1,e)[0]},getInt16:function(e){var t=y(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=y(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return l(y(this,4,e,arguments[1]))},getUint32:function(e){return l(y(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return r(y(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return r(y(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){v(this,1,e,d,t)},setUint8:function(e,t){v(this,1,e,d,t)},setInt16:function(e,t){v(this,2,e,p,t,arguments[2])},setUint16:function(e,t){v(this,2,e,p,t,arguments[2])},setInt32:function(e,t){v(this,4,e,u,t,arguments[2])},setUint32:function(e,t){v(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){v(this,4,e,f,t,arguments[2])},setFloat64:function(e,t){v(this,8,e,h,t,arguments[2])}});else{if(!w(function(){z(1)})||!w(function(){new z(-1)})||w(function(){return new z,new z(1.5),new z(NaN),z.name!=L})){z=function(e){return N(this,z),new W(R(e))};for(var ne=z[B]=W[B],ae=A(W),re=0,j;ae.length>re;)(j=ae[re++])in z||E(z,j,W[j]);x||(ne.constructor=z)}var oe=new F(new z(2)),ie=F[B].setInt8;oe.setInt8(0,2147483648),oe.setInt8(1,2147483649),(oe.getInt8(0)||!oe.getInt8(1))&&S(F[B],{setInt8:function(e,t){ie.call(this,e,t<<24>>24)},setUint8:function(e,t){ie.call(this,e,t<<24>>24)}},!0)}P(z,L),P(F,D),E(F[B],k.VIEW,!0),t[L]=z,t[D]=F},function(e,t,n){'use strict';var a=n(379)();e.exports=function(e){return e!==a&&null!==e}},function(e,t){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.context=t||this,this.hooks=[]}return a(e,[{key:'register',value:function(){for(var e=0;e<arguments.length;++e)if('function'==typeof arguments[e])this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}},{key:'deregister',value:function(e){for(var t=void 0,n=0;n<this.hooks.length;n++)if(t=this.hooks[n],t===e){this.hooks.splice(n,1);break}}},{key:'trigger',value:function(){var e=arguments,t=this.context,n=[];return this.hooks.forEach(function(a){var r=a.apply(t,e);r&&'function'==typeof r.then&&n.push(r)}),Promise.all(n)}},{key:'list',value:function(){return this.hooks}},{key:'clear',value:function(){return this.hooks=[]}}]),e}();t.default=r,e.exports=t['default']},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){var t=e,n=t.lib,a=n.WordArray,r=n.Hasher,o=t.algo,s=[],i=o.SHA1=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(r,o){for(var l=this._hash.words,p=l[0],a=l[1],u=l[2],c=l[3],d=l[4],e=0;80>e;e++){if(16>e)s[e]=0|r[o+e];else{var i=s[e-3]^s[e-8]^s[e-14]^s[e-16];s[e]=i<<1|i>>>31}var n=(p<<5|p>>>27)+d+s[e];n+=20>e?(a&u|~a&c)+1518500249:40>e?(a^u^c)+1859775393:60>e?(a&u|a&c|u&c)-1894007588:(a^u^c)-899497514,d=c,c=u,u=a<<30|a>>>2,a=p,p=n}l[0]=0|l[0]+p,l[1]=0|l[1]+a,l[2]=0|l[2]+u,l[3]=0|l[3]+c,l[4]=0|l[4]+d},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[(a+64>>>9<<4)+14]=g(n/4294967296),t[(a+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=r._createHelper(i),t.HmacSHA1=r._createHmacHelper(i)}(),e.SHA1})},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){(function(){var t=e,n=t.lib,a=n.Base,r=t.enc,o=r.Utf8,i=t.algo,s=i.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,'string'==typeof t&&(t=o.parse(t));var n=e.blockSize,a=4*n;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),s=this._iKey=t.clone(),l=r.words,d=s.words,c=0;c<n;c++)l[c]^=1549556828,d[c]^=909522486;r.sigBytes=s.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var a=t.finalize(this._oKey.clone().concat(n));return a}})})()})},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.Task=void 0;var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(7),i=function(){function e(t){a(this,e),this._q=[],this.context=t,this.tick=o.requestAnimationFrame,this.running=!1,this.paused=!1}return r(e,[{key:'enqueue',value:function(){var e=[].shift.call(arguments),t=arguments,n,a,r;if(!e)throw new Error('No Task Provided');return'function'==typeof e?(n=new o.defer,a=n.promise,r={task:e,args:t,deferred:n,promise:a}):r={promise:e},this._q.push(r),!1!=this.paused||this.running||this.run(),r.promise}},{key:'dequeue',value:function(){var e,t,n;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return n=t.apply(this.context,e.args),n&&'function'==typeof n.then?n.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,n),e.promise);if(e.promise)return e.promise}else return e=new o.defer,e.deferred.resolve(),e.promise}},{key:'dump',value:function(){for(;this._q.length;)this.dequeue()}},{key:'run',value:function(){var e=this;return this.running||(this.running=!0,this.defered=new o.defer),this.tick.call(window,function(){e._q.length?e.dequeue().then(function(){this.run()}.bind(e)):(e.defered.resolve(),e.running=void 0)}),!0==this.paused&&(this.paused=!1),this.defered.promise}},{key:'flush',value:function(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}},{key:'clear',value:function(){this._q=[]}},{key:'length',value:function(){return this._q.length}},{key:'pause',value:function(){this.paused=!0}},{key:'stop',value:function(){this._q=[],this.running=!1,this.paused=!0}}]),e}();t.default=i,t.Task=function e(t,n,r){return a(this,e),function(){var e=this,n=arguments||[];return new Promise(function(a,o){n.push(function(e,t){!e&&t?o(t):a(e)}),t.apply(r||e,n)})}}},function(e){'use strict';var t={application:{ecmascript:['es','ecma'],javascript:'js',ogg:'ogx',pdf:'pdf',postscript:['ps','ai','eps','epsi','epsf','eps2','eps3'],"rdf+xml":'rdf',smil:['smi','smil'],"xhtml+xml":['xhtml','xht'],xml:['xml','xsl','xsd','opf','ncx'],zip:'zip',"x-httpd-eruby":'rhtml',"x-latex":'latex',"x-maker":['frm','maker','frame','fm','fb','book','fbdoc'],"x-object":'o',"x-shockwave-flash":['swf','swfl'],"x-silverlight":'scr',"epub+zip":'epub',"font-tdpfr":'pfr',"inkml+xml":['ink','inkml'],json:'json',"jsonml+json":'jsonml',"mathml+xml":'mathml',"metalink+xml":'metalink',mp4:'mp4s',"omdoc+xml":'omdoc',oxps:'oxps',"vnd.amazon.ebook":'azw',widget:'wgt',"x-dtbook+xml":'dtb',"x-dtbresource+xml":'res',"x-font-bdf":'bdf',"x-font-ghostscript":'gsf',"x-font-linux-psf":'psf',"x-font-otf":'otf',"x-font-pcf":'pcf',"x-font-snf":'snf',"x-font-ttf":['ttf','ttc'],"x-font-type1":['pfa','pfb','pfm','afm'],"x-font-woff":'woff',"x-mobipocket-ebook":['prc','mobi'],"x-mspublisher":'pub',"x-nzb":'nzb',"x-tgif":'obj',"xaml+xml":'xaml',"xml-dtd":'dtd',"xproc+xml":'xpl',"xslt+xml":'xslt',"internet-property-stream":'acx',"x-compress":'z',"x-compressed":'tgz',"x-gzip":'gz'},audio:{flac:'flac',midi:['mid','midi','kar','rmi'],mpeg:['mpga','mpega','mp2','mp3','m4a','mp2a','m2a','m3a'],mpegurl:'m3u',ogg:['oga','ogg','spx'],"x-aiff":['aif','aiff','aifc'],"x-ms-wma":'wma',"x-wav":'wav',adpcm:'adp',mp4:'mp4a',webm:'weba',"x-aac":'aac',"x-caf":'caf',"x-matroska":'mka',"x-pn-realaudio-plugin":'rmp',xm:'xm',mid:['mid','rmi']},image:{gif:'gif',ief:'ief',jpeg:['jpeg','jpg','jpe'],pcx:'pcx',png:'png',"svg+xml":['svg','svgz'],tiff:['tiff','tif'],"x-icon":'ico',bmp:'bmp',webp:'webp',"x-pict":['pic','pct'],"x-tga":'tga',"cis-cod":'cod'},text:{"cache-manifest":['manifest','appcache'],css:'css',csv:'csv',html:['html','htm','shtml','stm'],mathml:'mml',plain:['txt','text','brf','conf','def','list','log','in','bas'],richtext:'rtx',"tab-separated-values":'tsv',"x-bibtex":'bib'},video:{mpeg:['mpeg','mpg','mpe','m1v','m2v','mp2','mpa','mpv2'],mp4:['mp4','mp4v','mpg4'],quicktime:['qt','mov'],ogg:'ogv',"vnd.mpegurl":['mxu','m4u'],"x-flv":'flv',"x-la-asf":['lsf','lsx'],"x-mng":'mng',"x-ms-asf":['asf','asx','asr'],"x-ms-wm":'wm',"x-ms-wmv":'wmv',"x-ms-wmx":'wmx',"x-ms-wvx":'wvx',"x-msvideo":'avi',"x-sgi-movie":'movie',"x-matroska":['mpv','mkv','mk3d','mks'],"3gpp2":'3g2',h261:'h261',h263:'h263',h264:'h264',jpeg:'jpgv',jpm:['jpm','jpgm'],mj2:['mj2','mjp2'],"vnd.ms-playready.media.pyv":'pyv',"vnd.uvvu.mp4":['uvu','uvvu'],"vnd.vivo":'viv',webm:'webm',"x-f4v":'f4v',"x-m4v":'m4v',"x-ms-vob":'vob',"x-smv":'smv'}},n=function(){var e={},n,a,r,o;for(n in t)if(t.hasOwnProperty(n))for(a in t[n])if(t[n].hasOwnProperty(a))if(r=t[n][a],'string'==typeof r)e[r]=n+'/'+a;else for(o=0;o<r.length;o++)e[r[o]]=n+'/'+a;return e}();e.exports={lookup:function(e){return e&&n[e.split('.').pop().toLowerCase()]||'text/plain'}}},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(32),s=a(i),l=n(7),d=n(25),c=a(d),p=n(156),g=a(p),h=n(77),f=n(26),m='undefined'!=typeof navigator,y=m&&/Chrome/.test(navigator.userAgent),v=m&&!y&&/AppleWebKit/.test(navigator.userAgent),b=function(){function e(t,n,a,o){r(this,e),this.epubcfi=new c.default,this.document=t,this.documentElement=this.document.documentElement,this.content=n||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=o||0,this.cfiBase=a||'',this.epubReadingSystem('epub.js',f.EPUBJS_VERSION),this.listeners()}return o(e,[{key:'width',value:function(e){var t=this.content;return e&&(0,l.isNumber)(e)&&(e+='px'),e&&(t.style.width=e),this.window.getComputedStyle(t).width}},{key:'height',value:function(e){var t=this.content;return e&&(0,l.isNumber)(e)&&(e+='px'),e&&(t.style.height=e),this.window.getComputedStyle(t).height}},{key:'contentWidth',value:function(e){var t=this.content||this.document.body;return e&&(0,l.isNumber)(e)&&(e+='px'),e&&(t.style.width=e),this.window.getComputedStyle(t).width}},{key:'contentHeight',value:function(e){var t=this.content||this.document.body;return e&&(0,l.isNumber)(e)&&(e+='px'),e&&(t.style.height=e),this.window.getComputedStyle(t).height}},{key:'textWidth',value:function(){var e=void 0,t=void 0,n=this.document.createRange(),a=this.content||this.document.body,r=(0,l.borders)(a);return n.selectNodeContents(a),e=n.getBoundingClientRect(),t=e.width,r&&r.width&&(t+=r.width),u(t)}},{key:'textHeight',value:function(){var e=void 0,t=void 0,n=this.document.createRange(),a=this.content||this.document.body,r=(0,l.borders)(a);return n.selectNodeContents(a),e=n.getBoundingClientRect(),t=e.height,t&&r.height&&(t+=r.height),t&&e.top&&(t+=e.top),u(t)}},{key:'scrollWidth',value:function(){var e=this.documentElement.scrollWidth;return e}},{key:'scrollHeight',value:function(){var e=this.documentElement.scrollHeight;return e}},{key:'overflow',value:function(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}},{key:'overflowX',value:function(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}},{key:'overflowY',value:function(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}},{key:'css',value:function(e,t,n){var a=this.content||this.document.body;return t&&a.style.setProperty(e,t,n?'important':''),this.window.getComputedStyle(a)[e]}},{key:'viewport',value:function(e){var t=this.document.querySelector('meta[name=\'viewport\']'),n={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},a=[],r={};if(t&&t.hasAttribute('content')){var o=t.getAttribute('content'),i=o.match(/width\s*=\s*([^,]*)/),s=o.match(/height\s*=\s*([^,]*)/),d=o.match(/initial-scale\s*=\s*([^,]*)/),c=o.match(/minimum-scale\s*=\s*([^,]*)/),p=o.match(/maximum-scale\s*=\s*([^,]*)/),u=o.match(/user-scalable\s*=\s*([^,]*)/);i&&i.length&&'undefined'!=typeof i[1]&&(n.width=i[1]),s&&s.length&&'undefined'!=typeof s[1]&&(n.height=s[1]),d&&d.length&&'undefined'!=typeof d[1]&&(n.scale=d[1]),c&&c.length&&'undefined'!=typeof c[1]&&(n.minimum=c[1]),p&&p.length&&'undefined'!=typeof p[1]&&(n.maximum=p[1]),u&&u.length&&'undefined'!=typeof u[1]&&(n.scalable=u[1])}return r=(0,l.defaults)(e||{},n),e&&(r.width&&a.push('width='+r.width),r.height&&a.push('height='+r.height),r.scale&&a.push('initial-scale='+r.scale),'no'===r.scalable?(a.push('minimum-scale='+r.scale),a.push('maximum-scale='+r.scale),a.push('user-scalable='+r.scalable)):(r.scalable&&a.push('user-scalable='+r.scalable),r.minimum&&a.push('minimum-scale='+r.minimum),r.maximum&&a.push('minimum-scale='+r.maximum)),!t&&(t=this.document.createElement('meta'),t.setAttribute('name','viewport'),this.document.querySelector('head').appendChild(t)),t.setAttribute('content',a.join(', ')),this.window.scrollTo(0,0)),r}},{key:'expand',value:function(){this.emit(f.EVENTS.CONTENTS.EXPAND)}},{key:'listeners',value:function(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),this.resizeListeners(),this.linksHandler()}},{key:'removeListeners',value:function(){this.removeEventListeners(),this.removeSelectionListeners(),clearTimeout(this.expanding)}},{key:'resizeCheck',value:function(){var e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(f.EVENTS.CONTENTS.RESIZE,this._size))}},{key:'resizeListeners',value:function(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}},{key:'transitionListeners',value:function(){var e=this.content;e.style.transitionProperty='font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height',e.style.transitionDuration='0.001ms',e.style.transitionTimingFunction='linear',e.style.transitionDelay='0',this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener('transitionend',this._resizeCheck)}},{key:'mediaQueryListeners',value:function(){for(var e=this.document.styleSheets,t=function(e){e.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),n=0;n<e.length;n+=1){var a;try{a=e[n].cssRules}catch(t){return}if(!a)return;for(var r=0;r<a.length;r+=1)if(a[r].media){var o=this.window.matchMedia(a[r].media.mediaText);o.addListener(t)}}}},{key:'resizeObservers',value:function(){var e=this;this.observer=new MutationObserver(function(){e.resizeCheck()});this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}},{key:'imageLoadListeners',value:function(){for(var e=this.document.querySelectorAll('img'),t=0,n;t<e.length;t++)n=e[t],'undefined'!=typeof n.naturalWidth&&0===n.naturalWidth&&(n.onload=this.expand.bind(this))}},{key:'fontLoadListeners',value:function(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}},{key:'root',value:function(){return this.document?this.document.documentElement:null}},{key:'locationOf',value:function(e,t){var n={left:0,top:0},a;if(!this.document)return n;if(this.epubcfi.isCfiString(e)){var r=new c.default(e).toRange(this.document,t);if(r)if(r.startContainer.nodeType===Node.ELEMENT_NODE)a=r.startContainer.getBoundingClientRect(),n.left=a.left,n.top=a.top;else if(v){var o=r.startContainer,i=new Range;try{o.nodeType===1?a=o.getBoundingClientRect():r.startOffset+2<o.length?(i.setStart(o,r.startOffset),i.setEnd(o,r.startOffset+2),a=i.getBoundingClientRect()):0<r.startOffset-2?(i.setStart(o,r.startOffset-2),i.setEnd(o,r.startOffset),a=i.getBoundingClientRect()):a=o.parentNode.getBoundingClientRect()}catch(t){console.error(t,t.stack)}}else a=r.getBoundingClientRect()}else if('string'==typeof e&&-1<e.indexOf('#')){var s=e.substring(e.indexOf('#')+1),l=this.document.getElementById(s);if(l)if(v){var d=new Range;d.selectNode(l),a=d.getBoundingClientRect()}else a=l.getBoundingClientRect()}return a&&(n.left=a.left,n.top=a.top),n}},{key:'addStylesheet',value:function(e){return new Promise(function(t){var n=!1,a;return this.document?(a=this.document.querySelector('link[href=\''+e+'\']'),a?void t(!0):void(a=this.document.createElement('link'),a.type='text/css',a.rel='stylesheet',a.href=e,a.onload=a.onreadystatechange=function(){n||this.readyState&&'complete'!=this.readyState||(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(a))):void t(!1)}.bind(this))}},{key:'addStylesheetRules',value:function(e){var t='epubjs-inserted-css',n,a;if(this.document&&e&&0!==e.length)if(n=this.document.getElementById('#'+t),n||(n=this.document.createElement('style'),n.id=t),this.document.head.appendChild(n),a=n.sheet,'[object Array]'===Object.prototype.toString.call(e))for(var r=0,o=e.length;r<o;r++){var i=1,s=e[r],l=e[r][0],d='';'[object Array]'===Object.prototype.toString.call(s[1][0])&&(s=s[1],i=0);for(var c=s.length,p;i<c;i++)p=s[i],d+=p[0]+':'+p[1]+(p[2]?' !important':'')+';\n';a.insertRule(l+'{'+d+'}',a.cssRules.length)}else{var u=Object.keys(e);u.forEach(function(t){var n=e[t];if(Array.isArray(n))n.forEach(function(e){var n=Object.keys(e),r=n.map(function(t){return t+':'+e[t]}).join(';');a.insertRule(t+'{'+r+'}',a.cssRules.length)});else{var r=Object.keys(n),o=r.map(function(e){return e+':'+n[e]}).join(';');a.insertRule(t+'{'+o+'}',a.cssRules.length)}})}}},{key:'addScript',value:function(e){return new Promise(function(t){var n=!1,a;return this.document?void(a=this.document.createElement('script'),a.type='text/javascript',a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){n||this.readyState&&'complete'!=this.readyState||(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(a)):void t(!1)}.bind(this))}},{key:'addClass',value:function(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}},{key:'removeClass',value:function(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}},{key:'addEventListeners',value:function(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),f.DOM_EVENTS.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}},{key:'removeEventListeners',value:function(){this.document&&(f.DOM_EVENTS.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}},{key:'triggerEvent',value:function(t){this.emit(t.type,t)}},{key:'addSelectionListeners',value:function(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener('selectionchange',this._onSelectionChange,{passive:!0}))}},{key:'removeSelectionListeners',value:function(){this.document&&(this.document.removeEventListener('selectionchange',this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}},{key:'onSelectionChange',value:function(){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var e=this.window.getSelection();this.triggerSelectedEvent(e)}.bind(this),250)}},{key:'triggerSelectedEvent',value:function(e){var t,n;e&&0<e.rangeCount&&(t=e.getRangeAt(0),!t.collapsed&&(n=new c.default(t,this.cfiBase).toString(),this.emit(f.EVENTS.CONTENTS.SELECTED,n),this.emit(f.EVENTS.CONTENTS.SELECTED_RANGE,t)))}},{key:'range',value:function(e,t){var n=new c.default(e);return n.toRange(this.document,t)}},{key:'cfiFromRange',value:function(e,t){return new c.default(e,this.cfiBase,t).toString()}},{key:'cfiFromNode',value:function(e,t){return new c.default(e,this.cfiBase,t).toString()}},{key:'map',value:function(e){var t=new g.default(e);return t.section()}},{key:'size',value:function(e,t){var n={scale:1,scalable:'no'};this.layoutStyle('scrolling'),0<=e&&(this.width(e),n.width=e,this.css('padding','0 '+e/12+'px')),0<=t&&(this.height(t),n.height=t),this.css('margin','0'),this.css('box-sizing','border-box'),this.viewport(n)}},{key:'columns',value:function(e,t,n,a){var r=(0,l.prefixed)('column-axis'),o=(0,l.prefixed)('column-gap'),i=(0,l.prefixed)('column-width'),s=(0,l.prefixed)('column-fill'),d=this.writingMode(),c=0===d.indexOf('vertical')?'vertical':'horizontal';this.layoutStyle('paginated'),'rtl'===this.content.dir&&this.direction('rtl'),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:'no'}),this.css('overflow-y','hidden'),this.css('margin','0',!0),'vertical'==c?(this.css('padding-top',a/2+'px',!0),this.css('padding-bottom',a/2+'px',!0),this.css('padding-left','20px'),this.css('padding-right','20px')):(this.css('padding-top','20px'),this.css('padding-bottom','20px'),this.css('padding-left',a/2+'px',!0),this.css('padding-right',a/2+'px',!0)),this.css('box-sizing','border-box'),this.css('max-width','inherit'),this.css(r,'horizontal'),this.css(s,'auto'),this.css(o,a+'px'),this.css(i,n+'px')}},{key:'scaler',value:function(e,t,n){var a='';this.css('transform-origin','top left'),(0<=t||0<=n)&&(a=' translate('+(t||0)+'px, '+(n||0)+'px )'),this.css('transform','scale('+e+')'+a)}},{key:'fit',value:function(e,t){var n=this.viewport(),a=parseInt(n.width),r=parseInt(n.height),o=e/a,i=t/r,s=o<i?o:i;this.layoutStyle('paginated'),this.width(a),this.height(r),this.overflow('hidden'),this.scaler(s,0,0),this.css('background-size',a*s+'px '+r*s+'px'),this.css('background-color','transparent')}},{key:'direction',value:function(e){this.documentElement&&(this.documentElement.style.direction=e)}},{key:'mapPage',value:function(e,t,n,a,r){var o=new g.default(t,r);return o.page(this,e,n,a)}},{key:'linksHandler',value:function(){var e=this;(0,h.replaceLinks)(this.content,function(t){e.emit(f.EVENTS.CONTENTS.LINK_CLICKED,t)})}},{key:'writingMode',value:function(e){var t=(0,l.prefixed)('writing-mode');return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||''}},{key:'layoutStyle',value:function(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||'paginated'}},{key:'epubReadingSystem',value:function(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(e){return'dom-manipulation'===e||'layout-changes'===e||'touch-events'===e||'mouse-events'===e||'keyboard-events'===e||'spine-scripting'!==e&&!1}},navigator.epubReadingSystem}},{key:'destroy',value:function(){this.observer&&this.observer.disconnect(),this.document.removeEventListener('transitionend',this._resizeCheck),this.removeListeners()}}],[{key:'listenedEvents',get:function(){return f.DOM_EVENTS}}]),e}();(0,s.default)(b.prototype),t.default=b,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(32),s=a(i),l=n(7),d=n(156),c=a(d),p=n(110),u=a(p),h=n(428),f=a(h),m=n(435),v=a(m),b=n(26),_=function(){function e(t){r(this,e),this.name='default',this.optsSettings=t.settings,this.View=t.view,this.request=t.request,this.renditionQueue=t.queue,this.q=new u.default(this),this.settings=(0,l.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,flow:'scrolled',ignoreClass:'',fullsize:void 0}),(0,l.extend)(this.settings,t.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0},this.rendered=!1}return o(e,[{key:'render',value:function(e,t){var n=e.tagName;'undefined'==typeof this.settings.fullsize&&n&&('body'==n.toLowerCase()||'html'==n.toLowerCase())&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow='visible',this.overflow=this.settings.overflow),this.settings.size=t,this.stage=new f.default({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new v.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}},{key:'addEventListeners',value:function(){var e;window.addEventListener('unload',function(){this.destroy()}.bind(this)),e=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener('scroll',this._onScroll)}},{key:'removeEventListeners',value:function(){var e;e=this.settings.fullsize?window:this.container,e.removeEventListener('scroll',this._onScroll),this._onScroll=void 0}},{key:'destroy',value:function(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}},{key:'onOrientationChange',value:function(){var e=window,t=e.orientation;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(b.EVENTS.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}},{key:'onResized',value:function(){this.resize()}},{key:'resize',value:function(e,t){var n=this.stage.size(e,t);return this.winBounds=(0,l.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height?void(this._stageSize=void 0):void(this._stageSize&&this._stageSize.width===n.width&&this._stageSize.height===n.height||(this._stageSize=n,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(b.EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height})))}},{key:'createView',value:function(e){return new this.View(e,this.viewSettings)}},{key:'display',value:function(e,t){var n=new l.defer,a=n.promise;(t===e.href||(0,l.isNumber)(t))&&(t=void 0);var r=this.views.find(e);if(r&&e){var o=r.offset();if('ltr'===this.settings.direction)this.scrollTo(o.left,o.top,!0);else{var i=r.width();this.scrollTo(o.left+i,o.top,!0)}if(t){var s=r.locationOf(t);this.moveTo(s)}return n.resolve(),a}return this.clear(),this.add(e).then(function(e){if(t){var n=e.locationOf(t);this.moveTo(n)}}.bind(this),function(e){n.reject(e)}).then(function(){var t;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&0<e.index&&(t=e.next(),t))return this.add(t)}.bind(this)).then(function(){this.views.show(),n.resolve()}.bind(this)),a}},{key:'afterDisplayed',value:function(e){this.emit(b.EVENTS.MANAGERS.ADDED,e)}},{key:'afterResized',value:function(e){this.emit(b.EVENTS.MANAGERS.RESIZE,e.section)}},{key:'moveTo',value:function(e){var t=0,n=0;this.isPaginated?(t=g(e.left/this.layout.delta)*this.layout.delta,t+this.layout.delta>this.container.scrollWidth&&(t=this.container.scrollWidth-this.layout.delta)):n=e.top,this.scrollTo(t,n,!0)}},{key:'add',value:function(e){var t=this,n=this.createView(e);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(b.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),n.display(this.request)}},{key:'append',value:function(e){var t=this,n=this.createView(e);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(b.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),n.display(this.request)}},{key:'prepend',value:function(e){var t=this,n=this.createView(e);return n.on(b.EVENTS.VIEWS.RESIZED,function(e){t.counter(e)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(b.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),n.display(this.request)}},{key:'counter',value:function(e){'vertical'===this.settings.axis?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}},{key:'next',value:function(){var e=this.settings.direction,t,n;if(this.views.length){if(this.isPaginated&&'horizontal'===this.settings.axis&&(!e||'ltr'===e))this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next();else if(this.isPaginated&&'horizontal'===this.settings.axis&&'rtl'===e)this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,0<n?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next();else if(this.isPaginated&&'vertical'===this.settings.axis){this.scrollTop=this.container.scrollTop;var a=this.container.scrollTop+this.container.offsetHeight;a<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):t=this.views.last().section.next()}else t=this.views.last().section.next();return t?(this.clear(),this.append(t).then(function(){var e;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(e=t.next(),e))return this.append(e)}.bind(this),function(e){return e}).then(function(){this.views.show()}.bind(this))):void 0}}},{key:'prev',value:function(){var e=this.settings.direction,t,n;if(this.views.length){if(this.isPaginated&&'horizontal'===this.settings.axis&&(!e||'ltr'===e))this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,0<n?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev();else if(this.isPaginated&&'horizontal'===this.settings.axis&&'rtl'===e)this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev();else if(this.isPaginated&&'vertical'===this.settings.axis){this.scrollTop=this.container.scrollTop;var a=this.container.scrollTop;0<a?this.scrollBy(0,-this.layout.height,!0):t=this.views.first().section.prev()}else t=this.views.first().section.prev();return t?(this.clear(),this.prepend(t).then(function(){var e;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(e=t.prev(),e))return this.prepend(e)}.bind(this),function(e){return e}).then(function(){this.isPaginated&&'horizontal'===this.settings.axis&&('rtl'===this.settings.direction?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))):void 0}}},{key:'current',value:function(){var e=this.visible();return e.length?e[e.length-1]:null}},{key:'clear',value:function(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}},{key:'currentLocation',value:function(){return this.location='vertical'===this.settings.axis?this.scrolledLocation():this.paginatedLocation(),this.location}},{key:'scrolledLocation',value:function(){var e=this,t=this.visible(),n=this.container.getBoundingClientRect(),a=n.height<window.innerHeight?n.height:window.innerHeight,r=0,o=0;this.settings.fullsize&&(r=window.scrollY);var i=t.map(function(t){var s=t.section,l=s.index,d=s.href,c=t.position(),p=t.height(),u=r+n.top-c.top+o,g=u+a-o;g>p&&(g=p,o=g-u);var h=e.layout.count(p,a).pages,f=y(u/a),m=[],v=y(g/a);m=[];for(var b=f,i;b<=v;b++)i=b+1,m.push(i);var _=e.mapping.page(t.contents,t.section.cfiBase,u,g);return{index:l,href:d,pages:m,totalPages:h,mapping:_}});return i}},{key:'paginatedLocation',value:function(){var e=this,t=this.visible(),n=this.container.getBoundingClientRect(),a=0,r=0;this.settings.fullsize&&(a=window.scrollX);var o=t.map(function(t){var o=t.section,s=o.index,l=o.href,d=t.offset().left,c=t.position().left,p=t.width(),u=a+n.left-c+r,h=u+e.layout.width-r,f=e.mapping.page(t.contents,t.section.cfiBase,u,h),m=e.layout.count(p).pages,y=g(u/e.layout.pageWidth),v=[],b=g(h/e.layout.pageWidth);if(0>y&&(y=0,++b),'rtl'===e.settings.direction){var _=y;y=m-b,b=m-_}for(var x=y+1,i;x<=b;x++)i=x,v.push(i);return{index:s,href:l,pages:v,totalPages:m,mapping:f}});return o}},{key:'isVisible',value:function(e,t,n,a){var r=e.position(),o=a||this.bounds();return'horizontal'===this.settings.axis&&r.right>o.left-t&&r.left<o.right+n||'vertical'===this.settings.axis&&r.bottom>o.top-t&&r.top<o.bottom+n}},{key:'visible',value:function(){for(var e=this.bounds(),t=this.views.displayed(),n=t.length,a=[],r=0,o,i;r<n;r++)i=t[r],o=this.isVisible(i,0,0,e),!0===o&&a.push(i);return a}},{key:'scrollBy',value:function(e,t,n){var a='rtl'===this.settings.direction?-1:1;n&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*a,t*a):(e&&(this.container.scrollLeft+=e*a),t&&(this.container.scrollTop+=t)),this.scrolled=!0}},{key:'scrollTo',value:function(e,t,n){n&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}},{key:'onScroll',value:function(){var e=void 0,t=void 0;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(b.EVENTS.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(b.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}},{key:'bounds',value:function(){var e;return e=this.stage.bounds(),e}},{key:'applyLayout',value:function(e){this.layout=e,this.updateLayout()}},{key:'updateLayout',value:function(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:'setLayout',value:function(e){this.viewSettings.layout=e,this.mapping=new c.default(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}},{key:'updateAxis',value:function(e,t){this.isPaginated||(e='vertical'),(t||e!==this.settings.axis)&&(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new c.default(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&('vertical'===e?this.layout.spread('none'):this.layout.spread(this.layout.settings.spread)))}},{key:'updateFlow',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'auto',n='paginated'===e||'auto'===e;this.isPaginated=n,'scrolled-doc'===e||'scrolled-continuous'===e||'scrolled'===e?this.updateAxis('vertical'):this.updateAxis('horizontal'),this.viewSettings.flow=e,this.overflow=this.settings.overflow?this.settings.overflow:n?'hidden':t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}},{key:'getContents',value:function(){var e=[];return this.views?(this.views.forEach(function(t){var n=t&&t.contents;n&&e.push(n)}),e):e}},{key:'direction',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'ltr';this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}},{key:'isRendered',value:function(){return this.rendered}}]),e}();(0,s.default)(_.prototype),t.default=_,e.exports=t['default']},function(e){e.exports=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e,t,n){var a=n(159),r=a.Symbol;e.exports=r},function(e){e.exports=function(e){return null!=e&&'object'==typeof e}},function(e,t,n){e.exports=!n(8)&&!n(4)(function(){return 7!=Object.defineProperty(n(80)('div'),'a',{get:function(){return 7}}).a})},function(e,t,n){t.f=n(6)},function(e,t,n){var a=n(17),r=n(18),o=n(61)(!1),i=n(82)('IE_PROTO');e.exports=function(e,t){var n=r(e),s=0,l=[],d;for(d in n)d!=i&&a(n,d)&&l.push(d);for(;t.length>s;)a(n,d=t[s++])&&(~o(l,d)||l.push(d));return l}},function(e,t,n){var a=n(9),r=n(1),o=n(40);e.exports=n(8)?Object.defineProperties:function(e,t){r(e);for(var n=o(t),s=n.length,l=0,i;s>l;)a.f(e,i=n[l++],t[i]);return e}},function(e,t,n){var a=n(18),r=n(43).f,o={}.toString,i='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&'[object Window]'==o.call(e)?s(e):r(a(e))}},function(e,t,n){'use strict';var a=n(40),r=n(62),o=n(58),i=n(11),s=n(57),l=Object.assign;e.exports=!l||n(4)(function(){var e={},t={},n=Symbol(),a='abcdefghijklmnopqrst';return e[n]=7,a.split('').forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join('')!=a})?function(e){for(var t=i(e),n=arguments.length,l=1,d=r.f,c=o.f;n>l;)for(var p=s(arguments[l++]),u=d?a(p).concat(d(p)):a(p),g=u.length,h=0,f;g>h;)c.call(p,f=u[h++])&&(t[f]=p[f]);return t}:l},function(e,t,n){'use strict';var a=n(13),r=n(5),o=n(124),i=[].slice,s={},l=function(e,t,a){if(!(t in s)){for(var r=[],n=0;n<t;n++)r[n]='a['+n+']';s[t]=Function('F,a','return new F('+r.join(',')+')')}return s[t](e,a)};e.exports=Function.bind||function(e){var t=a(this),n=i.call(arguments,1),s=function(){var a=n.concat(i.call(arguments));return this instanceof s?l(t,a.length,a):o(t,a,e)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e){e.exports=function(e,t,n){var a=n===void 0;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);}return e.apply(n,t)}},function(e,t,n){var a=n(2).parseInt,r=n(52).trim,o=n(86),i=/^[-+]?0[xX]/;e.exports=8!==a(o+'08')||22!==a(o+'0x16')?function(e,t){var n=r(e+'',3);return a(n,t>>>0||(i.test(n)?16:10))}:a},function(e,t,n){var a=n(2).parseFloat,r=n(52).trim;e.exports=1/a(n(86)+'-0')==-Infinity?a:function(e){var t=r(e+'',3),n=a(t);return 0===n&&'-'==t.charAt(0)?-0:n}},function(e,t,n){var a=n(23);e.exports=function(e,t){if('number'!=typeof e&&'Number'!=a(e))throw TypeError(t);return+e}},function(e,t,n){var a=n(5);e.exports=function(e){return!a(e)&&isFinite(e)&&g(e)===e}},function(e){e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&1e-8>e?e-e*e/2:i(1+e)}},function(e,t,n){var r=n(89),a=s,o=a(2,-52),i=a(2,-23),l=a(2,127)*(2-i),d=a(2,-126),p=function(e){return e+1/o-1/o};e.exports=Math.fround||function(e){var t=c(e),n=r(e),s,a;return t<d?n*p(t/d/i)*d*i:(s=(1+i/o)*t,a=s-(s-t),a>l||a!=a?n*Infinity:n*a)}},function(e,t,n){var a=n(1);e.exports=function(t,e,n,r){try{return r?e(a(n)[0],n[1]):e(n)}catch(n){var o=t['return'];throw void 0!==o&&a(o.call(t)),n}}},function(e,t,n){var a=n(13),r=n(11),o=n(57),s=n(10);e.exports=function(e,t,n,l,d){a(t);var c=r(e),p=o(c),u=s(c.length),g=d?u-1:0,h=d?-1:1;if(2>n)for(;;){if(g in p){l=p[g],g+=h;break}if(g+=h,d?0>g:u<=g)throw TypeError('Reduce of empty array with no initial value')}for(;d?0<=g:u>g;g+=h)g in p&&(l=t(l,p[g],g,c));return l}},function(e,t,n){'use strict';var a=n(11),r=n(41),o=n(10);e.exports=[].copyWithin||function(e,t){var n=a(this),i=o(n.length),s=r(e,i),l=r(t,i),d=2<arguments.length?arguments[2]:void 0,c=h((d===void 0?i:r(d,i))-l,i-s),p=1;for(l<s&&s<l+c&&(p=-1,l+=c-1,s+=c-1);0<c--;)l in n?n[s]=n[l]:delete n[s],s+=p,l+=p;return n}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(8)&&'g'!=/./g.flags&&n(9).f(RegExp.prototype,'flags',{configurable:!0,get:n(66)})},function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var a=n(1),r=n(5),o=n(104);e.exports=function(e,t){if(a(e),r(t)&&t.constructor===e)return t;var n=o.f(e),i=n.resolve;return i(t),n.promise}},function(e,t,n){'use strict';var a=n(139),r=n(54),o='Map';e.exports=n(70)(o,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=a.getEntry(r(this,o),e);return t&&t.v},set:function(e,t){return a.def(r(this,o),0===e?0:e,t)}},a,!0)},function(e,t,n){'use strict';var a=n(9).f,r=n(42),o=n(47),i=n(22),s=n(45),l=n(46),d=n(92),c=n(134),p=n(44),u=n(8),g=n(35).fastKey,h=n(54),f=u?'_s':'size',m=function(e,t){var n=g(t),a;if('F'!==n)return e._i[n];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,n,d){var c=e(function(e,a){s(e,c,t,'_i'),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[f]=0,void 0!=a&&l(a,n,e[d],e)});return o(c.prototype,{clear:function(){for(var e=h(this,t),n=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete n[a.i];e._f=e._l=void 0,e[f]=0},delete:function(e){var n=h(this,t),a=m(n,e);if(a){var r=a.n,o=a.p;delete n._i[a.i],a.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==a&&(n._f=r),n._l==a&&(n._l=o),n[f]--}return!!a},forEach:function(e){h(this,t);for(var n=i(e,1<arguments.length?arguments[1]:void 0,3),a;a=a?a.n:this._f;)for(n(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!m(h(this,t),e)}}),u&&a(c.prototype,'size',{get:function(){return h(this,t)[f]}}),c},def:function(e,t,n){var a=m(e,t),r,o;return a?a.v=n:(e._l=a={i:o=g(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},!e._f&&(e._f=a),r&&(r.n=a),e[f]++,'F'!==o&&(e._i[o]=a)),e},getEntry:m,setStrong:function(e,t,n){d(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?'keys'==t?c(0,n.k):'values'==t?c(0,n.v):c(0,[n.k,n.v]):(e._t=void 0,c(1))},n?'entries':'values',!n,!0),p(t)}}},function(e,t,n){'use strict';var a=n(139),r=n(54),o='Set';e.exports=n(70)(o,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return a.def(r(this,o),e=0===e?0:e,e)}},a)},function(e,t,n){'use strict';var a=n(31)(0),r=n(15),o=n(35),i=n(122),s=n(142),l=n(5),d=n(4),c=n(54),p='WeakMap',u=o.getWeak,g=Object.isExtensible,h=s.ufstore,f={},m=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},y={get:function(e){if(l(e)){var t=u(e);return!0===t?h(c(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(c(this,p),e,t)}},v=e.exports=n(70)(p,m,y,s,!0,!0),_;d(function(){return 7!=new v().set((Object.freeze||Object)(f),7).get(f)})&&(_=s.getConstructor(m,p),i(_.prototype,y),o.NEED=!0,a(['delete','has','get','set'],function(e){var t=v.prototype,n=t[e];r(t,e,function(t,a){if(l(t)&&!g(t)){this._f||(this._f=new _);var r=this._f[e](t,a);return'set'==e?this:r}return n.call(this,t,a)})}))},function(e,t,n){'use strict';var a=n(47),r=n(35).getWeak,o=n(1),i=n(5),s=n(45),l=n(46),d=n(31),c=n(17),p=n(54),u=d(5),g=d(6),h=0,f=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},y=function(e,t){return u(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=g(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var d=e(function(e,a){s(e,d,t,'_i'),e._t=t,e._i=h++,e._l=void 0,void 0!=a&&l(a,n,e[o],e)});return a(d.prototype,{delete:function(e){if(!i(e))return!1;var n=r(e);return!0===n?f(p(this,t))['delete'](e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!i(e))return!1;var n=r(e);return!0===n?f(p(this,t)).has(e):n&&c(n,this._i)}}),d},def:function(e,t,n){var a=r(o(t),!0);return!0===a?f(e).set(t,n):a[e._i]=n,e},ufstore:f}},function(e,t,n){var a=n(29),r=n(10);e.exports=function(e){if(e===void 0)return 0;var t=a(e),n=r(t);if(t!==n)throw RangeError('Wrong length!');return n}},function(e,t,n){var a=n(43),r=n(62),o=n(1),i=n(2).Reflect;e.exports=i&&i.ownKeys||function(e){var t=a.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){'use strict';function a(e,t,n,d,c,p,u,g){for(var h=c,f=0,m=!!u&&s(u,g,3),y,v;f<d;){if(f in n){if(y=m?m(n[f],f,t):n[f],v=!1,o(y)&&(v=y[l],v=void 0===v?r(y):!!v),v&&0<p)h=a(e,t,y,i(y.length),h,p-1)-1;else{if(9007199254740991<=h)throw TypeError();e[h]=y}h++}f++}return h}var r=n(63),o=n(5),i=n(10),s=n(22),l=n(6)('isConcatSpreadable');e.exports=a},function(e,t,n){var a=n(10),r=n(88),o=n(28);e.exports=function(e,t,n,i){var s=o(e)+'',l=s.length,d=void 0===n?' ':n+'',c=a(t);if(c<=l||''==d)return s;var p=c-l,u=r.call(d,y(p/d.length));return u.length>p&&(u=u.slice(0,p)),i?u+s:s+u}},function(e,t,n){var a=n(40),r=n(18),o=n(58).f;e.exports=function(e){return function(t){for(var n=r(t),s=a(n),l=s.length,d=0,i=[],c;l>d;)o.call(n,c=s[d++])&&i.push(e?[c,n[c]]:n[c]);return i}}},function(e,t,n){var a=n(59),r=n(149);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+'#toJSON isn\'t generic');return r(this)}}},function(e,t,n){var a=n(46);e.exports=function(e,t){var n=[];return a(e,!1,n.push,n,t),n}},function(e){e.exports=Math.scale||function(e,t,n,a,r){return 0===arguments.length||e!=e||t!=t||n!=n||a!=a||r!=r?NaN:e===Infinity||e===-Infinity?e:(e-t)*(r-a)/(n-t)+a}},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.decrypt=function(e,t){var n=a.enc.Hex.parse(e),r=a.enc.Base64.parse(t),o=a.lib.WordArray.create([r.words[0],r.words[1],r.words[2],r.words[3]],16),i=a.lib.WordArray.create(r.words.slice(4),r.sigBytes-16),s=a.lib.CipherParams.create({ciphertext:i}),l=a.AES.decrypt(s,n,{iv:o});return l.toString(a.enc.Utf8)};var a=n(390)},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){var t=e,n=t.lib,a=n.WordArray,o=n.Hasher,i=t.algo,l=[],p=[];(function(){function e(e){for(var t=r(e),n=2;n<=t;n++)if(!(e%n))return!1;return!0}function t(e){return 0|4294967296*(e-(0|e))}for(var a=2,n=0;64>n;)e(a)&&(8>n&&(l[n]=t(s(a,1/2))),p[n]=t(s(a,1/3)),n++),a++})();var u=[],d=i.SHA256=o.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(t,n){for(var r=this._hash.words,o=r[0],a=r[1],s=r[2],l=r[3],d=r[4],c=r[5],f=r[6],g=r[7],h=0;64>h;h++){if(16>h)u[h]=0|t[n+h];else{var i=u[h-15],m=u[h-2];u[h]=((i<<25|i>>>7)^(i<<14|i>>>18)^i>>>3)+u[h-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+u[h-16]}var y=d&c^~d&f,v=o&a^o&s^a&s,b=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),_=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),x=g+_+y+p[h]+u[h];g=f,f=c,c=d,d=0|l+x,l=s,s=a,a=o,o=0|x+(b+v)}r[0]=0|r[0]+o,r[1]=0|r[1]+a,r[2]=0|r[2]+s,r[3]=0|r[3]+l,r[4]=0|r[4]+d,r[5]=0|r[5]+c,r[6]=0|r[6]+f,r[7]=0|r[7]+g},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[(a+64>>>9<<4)+14]=g(n/4294967296),t[(a+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(d),t.HmacSHA256=o._createHmacHelper(d)}(Math),e.SHA256})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(79))})(this,function(e){return function(){function t(){return i.create.apply(i,arguments)}var n=e,a=n.lib,r=a.Hasher,o=n.x64,i=o.Word,s=o.WordArray,l=n.algo,d=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],c=[];(function(){for(var e=0;80>e;e++)c[e]=t()})();var p=l.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],r=n[1],o=n[2],s=n[3],l=n[4],p=n[5],u=n[6],g=n[7],h=a.high,f=a.low,m=r.high,y=r.low,v=o.high,b=o.low,_=s.high,x=s.low,k=l.high,E=l.low,S=p.high,w=p.low,N=u.high,T=u.low,C=g.high,R=g.low,A=h,I=f,O=m,P=y,L=v,D=b,B=_,M=x,z=k,F=E,j=S,U=w,H=N,q=T,W=C,V=R,Y=0,i;80>Y;Y++){if(i=c[Y],16>Y)var G=i.high=0|e[t+2*Y],X=i.low=0|e[t+2*Y+1];else{var K=c[Y-15],Z=K.high,$=K.low,J=($>>>1|Z<<31)^($>>>8|Z<<24)^($>>>7|Z<<25),Q=c[Y-2],ee=Q.high,te=Q.low,ne=(te>>>19|ee<<13)^(te<<3|ee>>>29)^(te>>>6|ee<<26),ae=c[Y-7],re=ae.high,oe=ae.low,ie=c[Y-16],se=ie.high,le=ie.low,X=J+oe,G=((Z>>>1|$<<31)^(Z>>>8|$<<24)^Z>>>7)+re+(X>>>0<J>>>0?1:0),X=X+ne,G=G+((ee>>>19|te<<13)^(ee<<3|te>>>29)^ee>>>6)+(X>>>0<ne>>>0?1:0),X=X+le,G=G+se+(X>>>0<le>>>0?1:0);i.high=G,i.low=X}var de=z&j^~z&H,ce=F&U^~F&q,pe=A&O^A&L^O&L,ue=I&P^I&D^P&D,ge=(A>>>28|I<<4)^(A<<30|I>>>2)^(A<<25|I>>>7),he=(I>>>28|A<<4)^(I<<30|A>>>2)^(I<<25|A>>>7),fe=(z>>>14|F<<18)^(z>>>18|F<<14)^(z<<23|F>>>9),me=(F>>>14|z<<18)^(F>>>18|z<<14)^(F<<23|z>>>9),ye=d[Y],ve=ye.high,be=ye.low,_e=V+me,xe=W+fe+(_e>>>0<V>>>0?1:0),_e=_e+ce,xe=xe+de+(_e>>>0<ce>>>0?1:0),_e=_e+be,xe=xe+ve+(_e>>>0<be>>>0?1:0),_e=_e+X,xe=xe+G+(_e>>>0<X>>>0?1:0),ke=he+ue,Ee=ge+pe+(ke>>>0<he>>>0?1:0);W=H,V=q,H=j,q=U,j=z,U=F,F=0|M+_e,z=0|B+xe+(F>>>0<M>>>0?1:0),B=L,M=D,L=O,D=P,O=A,P=I,I=0|_e+ke,A=0|xe+Ee+(I>>>0<_e>>>0?1:0)}f=a.low=f+I,a.high=h+A+(f>>>0<I>>>0?1:0),y=r.low=y+P,r.high=m+O+(y>>>0<P>>>0?1:0),b=o.low=b+D,o.high=v+L+(b>>>0<D>>>0?1:0),x=s.low=x+M,s.high=_+B+(x>>>0<M>>>0?1:0),E=l.low=E+F,l.high=k+z+(E>>>0<F>>>0?1:0),w=p.low=w+U,p.high=S+j+(w>>>0<U>>>0?1:0),T=u.low=T+q,u.high=N+H+(T>>>0<q>>>0?1:0),R=g.low=R+V,g.high=C+W+(R>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32,t[(a+128>>>10<<5)+30]=g(n/4294967296),t[(a+128>>>10<<5)+31]=n,e.sigBytes=4*t.length,this._process();var r=this._hash.toX32();return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});n.SHA512=r._createHelper(p),n.HmacSHA512=r._createHmacHelper(p)}(),e.SHA512})},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function a(e,a){var r=e.prototype;if(Object.create){var t=Object.create(a.prototype);r.__proto__=t}if(!(r instanceof a)){function o(){}o.prototype=a.prototype,o=new o,n(r,o),e.prototype=r=o}r.constructor!=e&&('function'!=typeof e&&console.error('unknow Class:'+e),r.constructor=e)}function r(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ae[e]),this.message=ae[e],Error.captureStackTrace&&Error.captureStackTrace(this,r);return n.code=e,t&&(this.message=this.message+': '+t),n}function o(){}function i(e,t){this._node=e,this._refresh=t,s(this)}function s(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var a=e._refresh(e._node);U(e,'length',a.length),n(a,e),e._inc=t}}function l(){}function d(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function c(e,t,n,a){if(a?t[d(t,a)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(a&&v(r,e,a),y(r,e,n))}}function p(e,t,n){var a=d(t,n);if(0<=a){for(var o=t.length-1;a<o;)t[a]=t[++a];if(t.length=o,e){var i=e.ownerDocument;i&&(v(i,e,n),n.ownerElement=null)}}else throw r(pe,new Error(e.tagName+'@'+n))}function u(e){if(this._features={},e)for(var t in e)this._features=e[t]}function g(){}function h(e){return'<'==e&&'&lt;'||'>'==e&&'&gt;'||'&'==e&&'&amp;'||'"'==e&&'&quot;'||'&#'+e.charCodeAt()+';'}function f(e,t){if(t(e))return!0;if(e=e.firstChild)do if(f(e,t))return!0;while(e=e.nextSibling)}function m(){}function y(e,t,n){e&&e._inc++;var a=n.namespaceURI;'http://www.w3.org/2000/xmlns/'==a&&(t._nsMap[n.prefix?n.localName:'']=n.value)}function v(e,t,n){e&&e._inc++;var a=n.namespaceURI;'http://www.w3.org/2000/xmlns/'==a&&delete t._nsMap[n.prefix?n.localName:'']}function b(e,t,n){if(e&&e._inc){e._inc++;var a=t.childNodes;if(n)a[a.length++]=n;else{for(var r=t.firstChild,o=0;r;)a[o++]=r,r=r.nextSibling;a.length=o}}}function _(e,t){var n=t.previousSibling,a=t.nextSibling;return n?n.nextSibling=a:e.firstChild=a,a?a.previousSibling=n:e.lastChild=n,b(e.ownerDocument,e),t}function x(e,t,n){var a=t.parentNode;if(a&&a.removeChild(t),t.nodeType===ee){var r=t.firstChild;if(null==r)return t;var o=t.lastChild}else r=o=t;var i=n?n.previousSibling:e.lastChild;r.previousSibling=i,o.nextSibling=n,i?i.nextSibling=r:e.firstChild=r,null==n?e.lastChild=o:n.previousSibling=o;do r.parentNode=e;while(r!==o&&(r=r.nextSibling));return b(e.ownerDocument||e,e),t.nodeType==ee&&(t.firstChild=t.lastChild=null),t}function k(e,t){var n=t.parentNode;if(n){var a=e.lastChild;n.removeChild(t);var a=e.lastChild}var a=e.lastChild;return t.parentNode=e,t.previousSibling=a,t.nextSibling=null,a?a.nextSibling=t:e.firstChild=t,e.lastChild=t,b(e.ownerDocument,e,t),t}function E(){this._nsMap={}}function S(){}function w(){}function N(){}function T(){}function C(){}function R(){}function A(){}function I(){}function O(){}function P(){}function L(){}function D(){}function B(e,t){var n=[],a=9==this.nodeType?this.documentElement:this,r=a.prefix,o=a.namespaceURI;if(o&&null==r){var r=a.lookupPrefix(o);if(null==r)var i=[{namespace:o,prefix:null}]}return z(this,n,e,t,i),n.join('')}function M(e,t,n){var a=e.prefix||'',r=e.namespaceURI;if(!a&&!r)return!1;if('xml'===a&&'http://www.w3.org/XML/1998/namespace'===r||'http://www.w3.org/2000/xmlns/'==r)return!1;for(var o=n.length;o--;){var i=n[o];if(i.prefix==a)return i.namespace!=r}return!0}function z(e,t,n,a,r){if(a){if(e=a(e),!e)return;if('string'==typeof e)return void t.push(e)}switch(e.nodeType){case W:r||(r=[]);var o=r.length,s=e.attributes,l=s.length,d=e.firstChild,c=e.tagName;n=H===e.namespaceURI||n,t.push('<',c);for(var p=0,i;p<l;p++)i=s.item(p),'xmlns'==i.prefix?r.push({prefix:i.localName,namespace:i.value}):'xmlns'==i.nodeName&&r.push({prefix:'',namespace:i.value});for(var p=0,i;p<l;p++){if(i=s.item(p),M(i,n,r)){var u=i.prefix||'',g=i.namespaceURI,f=u?' xmlns:'+u:' xmlns';t.push(f,'="',g,'"'),r.push({prefix:u,namespace:g})}z(i,t,n,a,r)}if(M(e,n,r)){var u=e.prefix||'',g=e.namespaceURI,f=u?' xmlns:'+u:' xmlns';t.push(f,'="',g,'"'),r.push({prefix:u,namespace:g})}if(d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push('>'),n&&/^script$/i.test(c))for(;d;)d.data?t.push(d.data):z(d,t,n,a,r),d=d.nextSibling;else for(;d;)z(d,t,n,a,r),d=d.nextSibling;t.push('</',c,'>')}else t.push('/>');return;case J:case ee:for(var d=e.firstChild;d;)z(d,t,n,a,r),d=d.nextSibling;return;case V:return t.push(' ',e.name,'="',e.value.replace(/[<&"]/g,h),'"');case Y:return t.push(e.data.replace(/[<&]/g,h));case G:return t.push('<![CDATA[',e.data,']]>');case $:return t.push('<!--',e.data,'-->');case Q:var m=e.publicId,y=e.systemId;if(t.push('<!DOCTYPE ',e.name),m)t.push(' PUBLIC "',m),y&&'.'!=y&&t.push('" "',y),t.push('">');else if(y&&'.'!=y)t.push(' SYSTEM "',y,'">');else{var v=e.internalSubset;v&&t.push(' [',v,']'),t.push('>')}return;case Z:return t.push('<?',e.target,' ',e.data,'?>');case X:return t.push('&',e.nodeName,';');default:t.push('??',e.nodeName);}}function F(e,t,n){var a;switch(t.nodeType){case W:a=t.cloneNode(!1),a.ownerDocument=e;case ee:break;case V:n=!0;}if(a||(a=t.cloneNode(!1)),a.ownerDocument=e,a.parentNode=null,n)for(var r=t.firstChild;r;)a.appendChild(F(e,r,n)),r=r.nextSibling;return a}function j(e,t,a){var r=new t.constructor;for(var s in t){var n=t[s];'object'!=typeof n&&n!=r[s]&&(r[s]=n)}switch(t.childNodes&&(r.childNodes=new o),r.ownerDocument=e,r.nodeType){case W:var d=t.attributes,c=r.attributes=new l,p=d.length;c._ownerElement=r;for(var u=0;u<p;u++)r.setAttributeNode(j(e,d.item(u),!0));break;;case V:a=!0;}if(a)for(var i=t.firstChild;i;)r.appendChild(j(e,i,a)),i=i.nextSibling;return r}function U(e,t,n){e[t]=n}var H='http://www.w3.org/1999/xhtml',q={},W=q.ELEMENT_NODE=1,V=q.ATTRIBUTE_NODE=2,Y=q.TEXT_NODE=3,G=q.CDATA_SECTION_NODE=4,X=q.ENTITY_REFERENCE_NODE=5,K=q.ENTITY_NODE=6,Z=q.PROCESSING_INSTRUCTION_NODE=7,$=q.COMMENT_NODE=8,J=q.DOCUMENT_NODE=9,Q=q.DOCUMENT_TYPE_NODE=10,ee=q.DOCUMENT_FRAGMENT_NODE=11,te=q.NOTATION_NODE=12,ne={},ae={},re=ne.INDEX_SIZE_ERR=(ae[1]='Index size error',1),oe=ne.DOMSTRING_SIZE_ERR=(ae[2]='DOMString size error',2),ie=ne.HIERARCHY_REQUEST_ERR=(ae[3]='Hierarchy request error',3),se=ne.WRONG_DOCUMENT_ERR=(ae[4]='Wrong document',4),le=ne.INVALID_CHARACTER_ERR=(ae[5]='Invalid character',5),de=ne.NO_DATA_ALLOWED_ERR=(ae[6]='No data allowed',6),ce=ne.NO_MODIFICATION_ALLOWED_ERR=(ae[7]='No modification allowed',7),pe=ne.NOT_FOUND_ERR=(ae[8]='Not found',8),ue=ne.NOT_SUPPORTED_ERR=(ae[9]='Not supported',9),ge=ne.INUSE_ATTRIBUTE_ERR=(ae[10]='Attribute in use',10),he=ne.INVALID_STATE_ERR=(ae[11]='Invalid state',11),fe=ne.SYNTAX_ERR=(ae[12]='Syntax error',12),me=ne.INVALID_MODIFICATION_ERR=(ae[13]='Invalid modification',13),ye=ne.NAMESPACE_ERR=(ae[14]='Invalid namespace',14),ve=ne.INVALID_ACCESS_ERR=(ae[15]='Invalid access',15);r.prototype=Error.prototype,n(ne,r);o.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],a=0;a<this.length;a++)z(this[a],n,e,t);return n.join('')}},i.prototype.item=function(e){return s(this),this[e]},a(i,o);l.prototype={length:0,item:o.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new r(ge);var n=this.getNamedItem(e.nodeName);return c(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t=e.ownerElement,n;if(t&&t!=this._ownerElement)throw new r(ge);return n=this.getNamedItemNS(e.namespaceURI,e.localName),c(this._ownerElement,this,e,n),n},removeNamedItem:function(e){var t=this.getNamedItem(e);return p(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return p(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var a=this[n];if(a.localName==t&&a.namespaceURI==e)return a}return null}};u.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)},createDocument:function(e,t,n){var a=new m;if(a.implementation=this,a.childNodes=new o,a.doctype=n,n&&a.appendChild(n),t){var r=a.createElementNS(e,t);a.appendChild(r)}return a},createDocumentType:function(e,t,n){var a=new R;return a.name=e,a.nodeName=e,a.publicId=t,a.systemId=n,a}};g.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return x(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return j(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Y&&e.nodeType==Y?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var a=t._nsMap;if(a)for(var r in a)if(a[r]==e)return r;t=t.nodeType==V?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==V?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},n(q,g),n(q,g.prototype),m.prototype={nodeName:'#document',nodeType:J,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==ee){for(var n=e.firstChild,a;n;)a=n.nextSibling,this.insertBefore(n,t),n=a;return e}return null==this.documentElement&&e.nodeType==W&&(this.documentElement=e),x(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_(this,e)},importNode:function(e,t){return F(this,e,t)},getElementById:function(e){var t=null;return f(this.documentElement,function(n){if(n.nodeType==W&&n.getAttribute('id')==e)return t=n,!0}),t},createElement:function(e){var t=new E;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new o;var n=t.attributes=new l;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new P;return e.ownerDocument=this,e.childNodes=new o,e},createTextNode:function(e){var t=new N;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new T;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new C;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new L;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new S;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new O;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new E,a=t.split(':'),r=n.attributes=new l;return n.childNodes=new o,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==a.length?(n.prefix=a[0],n.localName=a[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new S,a=t.split(':');return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==a.length?(n.prefix=a[0],n.localName=a[1]):n.localName=t,n}},a(m,g);E.prototype={nodeType:W,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||''},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=''+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===ee?this.insertBefore(e,null):k(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||''},setAttributeNS:function(e,t,n){var a=this.ownerDocument.createAttributeNS(e,t);a.value=a.nodeValue=''+n,this.setAttributeNode(a)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new i(this,function(t){var n=[];return f(t,function(a){a!==t&&a.nodeType==W&&('*'===e||a.tagName==e)&&n.push(a)}),n})},getElementsByTagNameNS:function(e,t){return new i(this,function(n){var a=[];return f(n,function(r){r!==n&&r.nodeType===W&&('*'===e||r.namespaceURI===e)&&('*'===t||r.localName==t)&&a.push(r)}),a})}},m.prototype.getElementsByTagName=E.prototype.getElementsByTagName,m.prototype.getElementsByTagNameNS=E.prototype.getElementsByTagNameNS,a(E,g);S.prototype.nodeType=V,a(S,g);w.prototype={data:'',substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(){throw new Error(ae[ie])},deleteData:function(e,t){this.replaceData(e,t,'')},replaceData:function(e,t,n){var a=this.data.substring(0,e),r=this.data.substring(e+t);n=a+n+r,this.nodeValue=this.data=n,this.length=n.length}},a(w,g);N.prototype={nodeName:'#text',nodeType:Y,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var a=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling),a}},a(N,w);T.prototype={nodeName:'#comment',nodeType:$},a(T,w);C.prototype={nodeName:'#cdata-section',nodeType:G},a(C,w);R.prototype.nodeType=Q,a(R,g);A.prototype.nodeType=te,a(A,g);I.prototype.nodeType=K,a(I,g);O.prototype.nodeType=X,a(O,g);P.prototype.nodeName='#document-fragment',P.prototype.nodeType=ee,a(P,g),L.prototype.nodeType=Z,a(L,g),D.prototype.serializeToString=function(e,t,n){return B.call(e,t,n)},g.prototype.toString=B;try{if(Object.defineProperty){function e(t){switch(t.nodeType){case W:case ee:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join('');default:return t.nodeValue;}}Object.defineProperty(i.prototype,'length',{get:function(){return s(this),this.$$length}}),Object.defineProperty(g.prototype,'textContent',{get:function(){return e(this)},set:function(e){switch(this.nodeType){case W:case ee:for(;this.firstChild;)this.removeChild(this.firstChild);(e||e+'')&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e;}}}),U=function(e,t,n){e['$$'+t]=n}}}catch(t){}t.DOMImplementation=u,t.XMLSerializer=D},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(32),l=a(s),d=n(7),c=n(107),p=a(c),u=n(25),g=a(u),h=n(110),f=a(h),m=n(422),y=a(m),v=n(423),b=a(v),_=n(112),x=a(_),k=n(424),E=a(k),S=n(26),w=n(157),N=a(w),T=n(113),C=a(T),R=n(162),A=a(R),I=function(){function e(t,n){r(this,e),this.settings=(0,d.extend)(this.settings||{},{width:null,height:null,ignoreClass:'',manager:'default',view:'iframe',flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1}),(0,d.extend)(this.settings,n),'object'===o(this.settings.manager)&&(this.manager=this.settings.manager),this.book=t,this.hooks={},this.hooks.display=new p.default(this),this.hooks.serialize=new p.default(this),this.hooks.content=new p.default(this),this.hooks.unloaded=new p.default(this),this.hooks.layout=new p.default(this),this.hooks.render=new p.default(this),this.hooks.show=new p.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new b.default(this),this.annotations=new E.default(this),this.epubcfi=new g.default,this.q=new f.default(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new d.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}return i(e,[{key:'setManager',value:function(e){this.manager=e}},{key:'requireManager',value:function(e){var t;return t='string'==typeof e&&'default'===e?C.default:'string'==typeof e&&'continuous'===e?A.default:e,t}},{key:'requireView',value:function(e){var t;return t='string'==typeof e&&'iframe'===e?N.default:e,t}},{key:'start',value:function(){this.settings.layout||'pre-paginated'!==this.book.package.metadata.layout&&'true'!==this.book.displayOptions.fixedLayout||(this.settings.layout='pre-paginated'),this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(S.EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(S.EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(S.EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(S.EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(S.EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(S.EVENTS.RENDITION.STARTED),this.starting.resolve()}},{key:'attachTo',value:function(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(S.EVENTS.RENDITION.ATTACHED)}.bind(this))}},{key:'display',value:function(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}},{key:'_display',value:function(e){var t=this;if(this.book){var n=this.epubcfi.isCfiString(e),a=new d.defer,r=a.promise,o;return(this.displaying=a,this.book.locations.length()&&(0,d.isFloat)(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),o=this.book.spine.get(e),!o)?(a.reject(new Error('No Section Found')),r):(this.manager.display(o,e).then(function(){a.resolve(o),t.displaying=void 0,t.emit(S.EVENTS.RENDITION.DISPLAYED,o),t.reportLocation()},function(e){t.emit(S.EVENTS.RENDITION.DISPLAY_ERROR,e)}),r)}}},{key:'afterDisplayed',value:function(e){var t=this;e.on(S.EVENTS.VIEWS.MARK_CLICKED,function(n,a){return t.triggerMarkEvent(n,a,e.contents)}),this.hooks.render.trigger(e,this).then(function(){e.contents?t.hooks.content.trigger(e.contents,t).then(function(){t.emit(S.EVENTS.RENDITION.RENDERED,e.section,e)}):t.emit(S.EVENTS.RENDITION.RENDERED,e.section,e)})}},{key:'afterRemoved',value:function(e){var t=this;this.hooks.unloaded.trigger(e,this).then(function(){t.emit(S.EVENTS.RENDITION.REMOVED,e.section,e)})}},{key:'onResized',value:function(e){this.emit(S.EVENTS.RENDITION.RESIZED,{width:e.width,height:e.height}),this.location&&this.location.start&&this.display(this.location.start.cfi)}},{key:'onOrientationChange',value:function(e){this.emit(S.EVENTS.RENDITION.ORIENTATION_CHANGE,e)}},{key:'moveTo',value:function(e){this.manager.moveTo(e)}},{key:'resize',value:function(e,t){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t)}},{key:'clear',value:function(){this.manager.clear()}},{key:'next',value:function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'prev',value:function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'determineLayoutProperties',value:function(e){var t=this.settings.layout||e.layout||'reflowable',n=this.settings.spread||e.spread||'auto',a=this.settings.orientation||e.orientation||'auto',r=this.settings.flow||e.flow||'auto',o=e.viewport||'',i=this.settings.minSpreadWidth||e.minSpreadWidth||800,s=this.settings.direction||e.direction||'ltr',l;return(0===this.settings.width||0<this.settings.width)&&(0===this.settings.height||0<this.settings.height),l={layout:t,spread:n,orientation:a,flow:r,viewport:o,minSpreadWidth:i,direction:s},l}},{key:'flow',value:function(e){var t=e;('scrolled'===e||'scrolled-doc'===e||'scrolled-continuous'===e)&&(t='scrolled'),('auto'===e||'paginated'===e)&&(t='paginated'),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}},{key:'layout',value:function(e){var t=this;return e&&(this._layout=new y.default(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(S.EVENTS.LAYOUT.UPDATED,function(e,n){t.emit(S.EVENTS.RENDITION.LAYOUT,e,n)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}},{key:'spread',value:function(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}},{key:'direction',value:function(e){this.settings.direction=e||'ltr',this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}},{key:'reportLocation',value:function(){return this.q.enqueue(function(){requestAnimationFrame(function(){var e=this.manager.currentLocation();if(e&&e.then&&'function'==typeof e.then)e.then(function(e){var t=this.located(e);t&&t.start&&t.end&&(this.location=t,this.emit(S.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(S.EVENTS.RENDITION.RELOCATED,this.location))}.bind(this));else if(e){var t=this.located(e);if(!t||!t.start||!t.end)return;this.location=t,this.emit(S.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(S.EVENTS.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}},{key:'currentLocation',value:function(){var e=this.manager.currentLocation();if(e&&e.then&&'function'==typeof e.then)e.then(function(e){var t=this.located(e);return t}.bind(this));else if(e){var t=this.located(e);return t}}},{key:'located',value:function(e){if(!e.length)return{};var t=e[0],n=e[e.length-1],a={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:n.index,href:n.href,cfi:n.mapping.end,displayed:{page:n.pages[n.pages.length-1]||1,total:n.totalPages}}},r=this.book.locations.locationFromCfi(t.mapping.start),o=this.book.locations.locationFromCfi(n.mapping.end);null!=r&&(a.start.location=r,a.start.percentage=this.book.locations.percentageFromLocation(r)),null!=o&&(a.end.location=o,a.end.percentage=this.book.locations.percentageFromLocation(o));var i=this.book.pageList.pageFromCfi(t.mapping.start),s=this.book.pageList.pageFromCfi(n.mapping.end);return-1!=i&&(a.start.page=i),-1!=s&&(a.end.page=s),n.index===this.book.spine.last().index&&a.end.displayed.page>=a.end.displayed.total&&(a.atEnd=!0),t.index===this.book.spine.first().index&&1===a.start.displayed.page&&(a.atStart=!0),a}},{key:'destroy',value:function(){this.manager&&this.manager.destroy(),this.book=void 0}},{key:'passEvents',value:function(t){var n=this;S.DOM_EVENTS.forEach(function(a){t.on(a,function(e){return n.triggerViewEvent(e,t)})}),t.on(S.EVENTS.CONTENTS.SELECTED,function(a){return n.triggerSelectedEvent(a,t)})}},{key:'triggerViewEvent',value:function(t,e){this.emit(t.type,t,e)}},{key:'triggerSelectedEvent',value:function(e,t){this.emit(S.EVENTS.RENDITION.SELECTED,e,t)}},{key:'triggerMarkEvent',value:function(e,t,n){this.emit(S.EVENTS.RENDITION.MARK_CLICKED,e,t,n)}},{key:'getRange',value:function(e,t){var n=new g.default(e),a=this.manager.visible().filter(function(e){if(n.spinePos===e.index)return!0});if(a.length)return a[0].contents.range(n,t)}},{key:'adjustImages',value:function(e){if('pre-paginated'===this._layout.name)return new Promise(function(e){e()});var t=e.window.getComputedStyle(e.content,null),n=.95*(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom))),a=parseFloat(t.verticalPadding);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-a+'px':'100%')+'!important',"max-height":n+'px!important',"object-fit":'contain',"page-break-inside":'avoid',"break-inside":'avoid',"box-sizing":'border-box'},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-a+'px':'100%')+'!important',"max-height":n+'px!important',"page-break-inside":'avoid',"break-inside":'avoid'}}),new Promise(function(e){setTimeout(function(){e()},1)})}},{key:'getContents',value:function(){return this.manager?this.manager.getContents():[]}},{key:'views',value:function(){var e=this.manager?this.manager.views:void 0;return e||[]}},{key:'handleLinks',value:function(e){var t=this;e&&e.on(S.EVENTS.CONTENTS.LINK_CLICKED,function(e){var n=t.book.path.relative(e);t.display(n)})}},{key:'injectStylesheet',value:function(e){var t=e.createElement('link');t.setAttribute('type','text/css'),t.setAttribute('rel','stylesheet'),t.setAttribute('href',this.settings.stylesheet),e.getElementsByTagName('head')[0].appendChild(t)}},{key:'injectScript',value:function(e){var t=e.createElement('script');t.setAttribute('type','text/javascript'),t.setAttribute('src',this.settings.script),t.textContent=' ',e.getElementsByTagName('head')[0].appendChild(t)}},{key:'injectIdentifier',value:function(e){var t=this.book.packaging.metadata.identifier,n=e.createElement('meta');n.setAttribute('name','dc.relation.ispartof'),t&&n.setAttribute('content',t),e.getElementsByTagName('head')[0].appendChild(n)}}]),e}();(0,l.default)(I.prototype),t.default=I,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(25),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(7),l=function(){function e(t,n,r,o){a(this,e),this.layout=t,this.horizontal='horizontal'===r,this.direction=n||'ltr',this._dev=o}return r(e,[{key:'section',value:function(e){var t=this.findRanges(e),n=this.rangeListToCfiList(e.section.cfiBase,t);return n}},{key:'page',value:function(e,t,n,a){var o=e&&e.document&&e.document.body,s;if(o){if(s=this.rangePairToCfiPair(t,{start:this.findStart(o,n,a),end:this.findEnd(o,n,a)}),!0===this._dev){var l=e.document,d=new i.default(s.start).toRange(l),c=new i.default(s.end).toRange(l),p=l.defaultView.getSelection(),u=l.createRange();p.removeAllRanges(),u.setStart(d.startContainer,d.startOffset),u.setEnd(c.endContainer,c.endOffset),p.addRange(u)}return s}}},{key:'walk',value:function(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var n={acceptNode:function(e){return 0<e.data.trim().length?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},a=n.acceptNode;a.acceptNode=n.acceptNode;for(var r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,a,!1),o,i;(o=r.nextNode())&&(i=t(o),!i););return i}}},{key:'findRanges',value:function(e){for(var t=[],n=e.contents.scrollWidth(),a=y(n/this.layout.spreadWidth),r=a*this.layout.divisor,o=this.layout.columnWidth,s=this.layout.gap,l=0,i,d;l<r.pages;l++)i=(o+s)*l,d=o*(l+1)+s*l,t.push({start:this.findStart(e.document.body,i,d),end:this.findEnd(e.document.body,i,d)});return t}},{key:'findStart',value:function(e,t,n){for(var a=this,r=[e],o=e,i,l;r.length;)if(i=r.shift(),l=this.walk(i,function(e){var i,l,d,c,p;if(p=(0,s.nodeBounds)(e),a.horizontal&&'ltr'===a.direction){if(i=a.horizontal?p.left:p.top,l=a.horizontal?p.right:p.bottom,i>=t&&i<=n)return e;if(l>t)return e;o=e,r.push(e)}else if(a.horizontal&&'rtl'===a.direction){if(i=p.left,l=p.right,l<=n&&l>=t)return e;if(i<n)return e;o=e,r.push(e)}else{if(d=p.top,c=p.bottom,d>=t&&d<=n)return e;if(c>t)return e;o=e,r.push(e)}}),l)return this.findTextStartRange(l,t,n);return this.findTextStartRange(o,t,n)}},{key:'findEnd',value:function(e,t,n){for(var a=this,r=[e],o=e,i,l;r.length;)if(i=r.shift(),l=this.walk(i,function(e){var i,l,d,c,p;if(p=(0,s.nodeBounds)(e),a.horizontal&&'ltr'===a.direction){if(i=u(p.left),l=u(p.right),i>n&&o)return o;if(l>n)return e;o=e,r.push(e)}else if(a.horizontal&&'rtl'===a.direction){if(i=u(a.horizontal?p.left:p.top),l=u(a.horizontal?p.right:p.bottom),l<t&&o)return o;if(i<t)return e;o=e,r.push(e)}else{if(d=u(p.top),c=u(p.bottom),d>n&&o)return o;if(c>n)return e;o=e,r.push(e)}}),l)return this.findTextEndRange(l,t,n);return this.findTextEndRange(o,t,n)}},{key:'findTextStartRange',value:function(e,t,n){for(var a=this.splitTextNodeIntoRanges(e),r=0,o,i,s,l,d;r<a.length;r++)if(o=a[r],i=o.getBoundingClientRect(),this.horizontal&&'ltr'===this.direction){if(s=i.left,s>=t)return o;}else if(this.horizontal&&'rtl'===this.direction){if(d=i.right,d<=n)return o;}else if(l=i.top,l>=t)return o;return a[0]}},{key:'findTextEndRange',value:function(e,t,n){for(var a=this.splitTextNodeIntoRanges(e),r=0,o,i,s,l,d,c,p;r<a.length;r++){if(i=a[r],s=i.getBoundingClientRect(),this.horizontal&&'ltr'===this.direction){if(l=s.left,d=s.right,l>n&&o)return o;if(d>n)return i}else if(this.horizontal&&'rtl'===this.direction){if(l=s.left,d=s.right,d<t&&o)return o;if(l<t)return i}else{if(c=s.top,p=s.bottom,c>n&&o)return o;if(p>n)return i}o=i}return a[a.length-1]}},{key:'splitTextNodeIntoRanges',value:function(e,t){var n=[],a=e.textContent||'',r=a.trim(),o=e.ownerDocument,i=t||' ',s=r.indexOf(i),l;if(-1===s||e.nodeType!=Node.TEXT_NODE)return l=o.createRange(),l.selectNodeContents(e),[l];for(l=o.createRange(),l.setStart(e,0),l.setEnd(e,s),n.push(l),l=!1;-1!=s;)s=r.indexOf(i,s+1),0<s&&(l&&(l.setEnd(e,s),n.push(l)),l=o.createRange(),l.setStart(e,s+1));return l&&(l.setEnd(e,r.length),n.push(l)),n}},{key:'rangePairToCfiPair',value:function(e,t){var n=t.start,a=t.end;n.collapse(!0),a.collapse(!1);var r=new i.default(n,e).toString(),o=new i.default(a,e).toString();return{start:r,end:o}}},{key:'rangeListToCfiList',value:function(e,t){for(var n=[],a=0,r;a<t.length;a++)r=this.rangePairToCfiPair(e,t[a]),n.push(r);return n}},{key:'axis',value:function(e){return e&&(this.horizontal='horizontal'===e),this.horizontal}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(32),s=a(i),l=n(7),d=n(25),c=a(d),p=n(112),u=a(p),g=n(26),f=n(425),h=function(){function e(t,n){r(this,e),this.settings=(0,l.extend)({ignoreClass:'',axis:n.layout&&'scrolled'===n.layout.props.flow?'vertical':'horizontal',direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0},n||{}),this.id='epubjs-view-'+(0,l.uuid)(),this.section=t,this.index=t.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new c.default,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}return o(e,[{key:'container',value:function(e){var t=document.createElement('div');return t.classList.add('epub-view'),t.style.height='0px',t.style.width='0px',t.style.overflow='hidden',t.style.position='relative',t.style.display='block',t.style.flex=e&&'horizontal'==e?'none':'initial',t}},{key:'create',value:function(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement('iframe'),this.iframe.id=this.id,this.iframe.scrolling='no',this.iframe.style.overflow='hidden',this.iframe.seamless='seamless',this.iframe.style.border='none',this.iframe.setAttribute('enable-annotation','true'),this.resizing=!0,this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.iframe.style.width='0',this.iframe.style.height='0',this._width=0,this._height=0,this.element.setAttribute('ref',this.index),this.added=!0,this.elementBounds=(0,l.bounds)(this.element),this.supportsSrcdoc=!!('srcdoc'in this.iframe),this.settings.method||(this.settings.method=this.supportsSrcdoc?'srcdoc':'write'),this.iframe)}},{key:'render',value:function(e){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(e){return this.load(e)}.bind(this)).then(function(){var e=this;this.layout.format(this.contents);var t=this.contents.writingMode(),n=0===t.indexOf('vertical')?'vertical':'horizontal';return this.setAxis(n),this.emit(g.EVENTS.VIEWS.AXIS,n),this.addListeners(),new Promise(function(t){e.expand(),t()})}.bind(this),function(t){return this.emit(g.EVENTS.VIEWS.LOAD_ERROR,t),new Promise(function(e,n){n(t)})}.bind(this)).then(function(){this.emit(g.EVENTS.VIEWS.RENDERED,this.section)}.bind(this))}},{key:'reset',value:function(){this.iframe&&(this.iframe.style.width='0',this.iframe.style.height='0',this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}},{key:'size',value:function(e,t){var n=e||this.settings.width,a=t||this.settings.height;'pre-paginated'===this.layout.name?this.lock('both',n,a):'horizontal'===this.settings.axis?this.lock('height',n,a):this.lock('width',n,a),this.settings.width=n,this.settings.height=a}},{key:'lock',value:function(e,t,n){var a=(0,l.borders)(this.element),r;r=this.iframe?(0,l.borders)(this.iframe):{width:0,height:0},'width'==e&&(0,l.isNumber)(t)&&(this.lockedWidth=t-a.width-r.width),'height'==e&&(0,l.isNumber)(n)&&(this.lockedHeight=n-a.height-r.height),'both'===e&&(0,l.isNumber)(t)&&(0,l.isNumber)(n)&&(this.lockedWidth=t-a.width-r.width,this.lockedHeight=n-a.height-r.height),this.displayed&&this.iframe&&this.expand()}},{key:'expand',value:function(){var e=this.lockedWidth,t=this.lockedHeight,n;!this.iframe||this._expanding||(this._expanding=!0,'pre-paginated'===this.layout.name?(e=this.layout.columnWidth,t=this.layout.height):'horizontal'===this.settings.axis?(e=this.contents.textWidth(),0<e%this.layout.pageWidth&&(e=y(e/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(n=e/this.layout.pageWidth,1<this.layout.divisor&&'reflowable'===this.layout.name&&0<n%2&&(e+=this.layout.pageWidth))):'vertical'===this.settings.axis&&(t=this.contents.textHeight()),(this._needsReframe||e!=this._width||t!=this._height)&&this.reframe(e,t),this._expanding=!1)}},{key:'reframe',value:function(e,t){var n=this,a;(0,l.isNumber)(e)&&(this.element.style.width=e+'px',this.iframe.style.width=e+'px',this._width=e),(0,l.isNumber)(t)&&(this.element.style.height=t+'px',this.iframe.style.height=t+'px',this._height=t);var r=this.prevBounds?e-this.prevBounds.width:e,o=this.prevBounds?t-this.prevBounds.height:t;a={width:e,height:t,widthDelta:r,heightDelta:o},this.pane&&this.pane.render(),requestAnimationFrame(function(){var e;for(var t in n.marks)n.marks.hasOwnProperty(t)&&(e=n.marks[t],n.placeMark(e.element,e.range))}),this.onResize(this,a),this.emit(g.EVENTS.VIEWS.RESIZED,a),this.prevBounds=a,this.elementBounds=(0,l.bounds)(this.element)}},{key:'load',value:function(e){var t=new l.defer,n=t.promise;if(!this.iframe)return t.reject(new Error('No Iframe Available')),n;if(this.iframe.onload=function(e){this.onLoad(e,t)}.bind(this),'blobUrl'===this.settings.method)this.blobUrl=(0,l.createBlobUrl)(e,'application/xhtml+xml'),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if('srcdoc'===this.settings.method)this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error('No Document Available')),n;this.iframe.contentDocument.open(),this.iframe.contentDocument.write(e),this.iframe.contentDocument.close()}return n}},{key:'onLoad',value:function(e,t){var n=this;this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new u.default(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var a=this.document.querySelector('link[rel=\'canonical\']');a?a.setAttribute('href',this.section.canonical):(a=this.document.createElement('link'),a.setAttribute('rel','canonical'),a.setAttribute('href',this.section.canonical),this.document.querySelector('head').appendChild(a)),this.contents.on(g.EVENTS.CONTENTS.EXPAND,function(){n.displayed&&n.iframe&&(n.expand(),n.contents&&n.layout.format(n.contents))}),this.contents.on(g.EVENTS.CONTENTS.RESIZE,function(){n.displayed&&n.iframe&&(n.expand(),n.contents&&n.layout.format(n.contents))}),t.resolve(this.contents)}},{key:'setLayout',value:function(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}},{key:'setAxis',value:function(e){'scrolled'===this.layout.props.flow&&(e='vertical'),this.settings.axis=e,this.element.style.flex='horizontal'==e?'none':'initial',this.size()}},{key:'addListeners',value:function(){}},{key:'removeListeners',value:function(){}},{key:'display',value:function(e){var t=new l.defer;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(g.EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(e){t.reject(e,this)}),t.promise}},{key:'show',value:function(){this.element.style.visibility='visible',this.iframe&&(this.iframe.style.visibility='visible',this.iframe.style.transform='translateZ(0)',this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(g.EVENTS.VIEWS.SHOWN,this)}},{key:'hide',value:function(){this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.stopExpanding=!0,this.emit(g.EVENTS.VIEWS.HIDDEN,this)}},{key:'offset',value:function(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}},{key:'width',value:function(){return this._width}},{key:'height',value:function(){return this._height}},{key:'position',value:function(){return this.element.getBoundingClientRect()}},{key:'locationOf',value:function(e){var t=this.iframe.getBoundingClientRect(),n=this.contents.locationOf(e,this.settings.ignoreClass);return{left:n.left,top:n.top}}},{key:'onDisplayed',value:function(){}},{key:'onResize',value:function(){}},{key:'bounds',value:function(e){return(e||!this.elementBounds)&&(this.elementBounds=(0,l.bounds)(this.element)),this.elementBounds}},{key:'highlight',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],a=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'epubjs-hl',o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(this.contents){var i=Object.assign({fill:'yellow',"fill-opacity":'0.3',"mix-blend-mode":'multiply'},o),s=this.contents.range(e),l=function(){a.emit(g.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new f.Pane(this.iframe,this.element));var d=new f.Highlight(s,r,t,i),c=this.pane.addMark(d);return this.highlights[e]={mark:c,element:c.element,listeners:[l,n]},c.element.setAttribute('ref',r),c.element.addEventListener('click',l),c.element.addEventListener('touchstart',l),n&&(c.element.addEventListener('click',n),c.element.addEventListener('touchstart',n)),c}}},{key:'underline',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],a=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'epubjs-ul',o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(this.contents){var i=Object.assign({stroke:'black',"stroke-opacity":'0.3',"mix-blend-mode":'multiply'},o),s=this.contents.range(e),l=function(){a.emit(g.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new f.Pane(this.iframe,this.element));var d=new f.Underline(s,r,t,i),c=this.pane.addMark(d);return this.underlines[e]={mark:c,element:c.element,listeners:[l,n]},c.element.setAttribute('ref',r),c.element.addEventListener('click',l),c.element.addEventListener('touchstart',l),n&&(c.element.addEventListener('click',n),c.element.addEventListener('touchstart',n)),c}}},{key:'mark',value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];if(this.contents){if(e in this.marks){var r=this.marks[e];return r}var o=this.contents.range(e);if(o){var i=o.commonAncestorContainer,s=1===i.nodeType?i:i.parentNode,l=function(){t.emit(g.EVENTS.VIEWS.MARK_CLICKED,e,n)};o.collapsed&&1===i.nodeType?(o=new Range,o.selectNodeContents(i)):o.collapsed&&(o=new Range,o.selectNodeContents(s));var d=this.document.createElement('a');return d.setAttribute('ref','epubjs-mk'),d.style.position='absolute',d.dataset.epubcfi=e,n&&Object.keys(n).forEach(function(e){d.dataset[e]=n[e]}),a&&(d.addEventListener('click',a),d.addEventListener('touchstart',a)),d.addEventListener('click',l),d.addEventListener('touchstart',l),this.placeMark(d,o),this.element.appendChild(d),this.marks[e]={element:d,range:o,listeners:[l,a]},s}}}},{key:'placeMark',value:function(e,t){var n,a,r;if('pre-paginated'===this.layout.name||'horizontal'!==this.settings.axis){var o=t.getBoundingClientRect();n=o.top,a=o.right}else for(var s=t.getClientRects(),l=void 0,d=0;d!=s.length;d++)l=s[d],(!r||l.left<r)&&(r=l.left,a=y(r/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,n=l.top);e.style.top=n+'px',e.style.left=a+'px'}},{key:'unhighlight',value:function(e){var t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(function(e){e&&(t.element.removeEventListener('click',e),t.element.removeEventListener('touchstart',e))}),delete this.highlights[e])}},{key:'ununderline',value:function(e){var t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(function(e){e&&(t.element.removeEventListener('click',e),t.element.removeEventListener('touchstart',e))}),delete this.underlines[e])}},{key:'unmark',value:function(e){var t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(function(e){e&&(t.element.removeEventListener('click',e),t.element.removeEventListener('touchstart',e))}),delete this.marks[e])}},{key:'destroy',value:function(){for(var e in this.highlights)this.unhighlight(e);for(var t in this.underlines)this.ununderline(t);for(var n in this.marks)this.unmark(n);this.blobUrl&&(0,l.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}]),e}();(0,s.default)(h.prototype),t.default=h,e.exports=t['default']},function(e,t,n){var a=n(114),r=n(430),o=n(160);e.exports=function(e,t,n){function i(t){var n=b,a=_;return b=_=void 0,g=t,k=e.apply(a,n),k}function s(e){return g=e,E=setTimeout(c,t),m?i(e):k}function l(e){var n=e-S,a=e-g,r=t-n;return y?h(r,x-a):r}function d(e){var n=e-S,a=e-g;return void 0==S||n>=t||0>n||y&&a>=x}function c(){var e=r();return d(e)?p(e):void(E=setTimeout(c,l(e)))}function p(e){return(E=void 0,v&&b)?i(e):(b=_=void 0,k)}function u(){var e=r(),n=d(e);if(b=arguments,_=this,S=e,n){if(void 0===E)return s(S);if(y)return E=setTimeout(c,t),i(S)}return void 0===E&&(E=setTimeout(c,t)),k}var g=0,m=!1,y=!1,v=!0,b,_,x,k,E,S;if('function'!=typeof e)throw new TypeError('Expected a function');return t=o(t)||0,a(n)&&(m=!!n.leading,y='maxWait'in n,x=y?f(o(n.maxWait)||0,t):x,v='trailing'in n?!!n.trailing:v),u.cancel=function(){void 0!==E&&clearTimeout(E),g=0,b=S=_=E=void 0},u.flush=function(){return void 0===E?k:p(r())},u}},function(e,t,n){var a=n(431),r='object'==typeof self&&self&&self.Object===Object&&self,o=a||r||Function('return this')();e.exports=o},function(e,t,n){var a=n(114),r=n(432),o=0/0,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if('number'==typeof e)return e;if(r(e))return o;if(a(e)){var t='function'==typeof e.valueOf?e.valueOf():e;e=a(t)?t+'':t}if('string'!=typeof e)return 0===e?e:+e;e=e.replace(i,'');var n=l.test(e);return n||d.test(e)?c(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t,n){var a=n(115),r=n(433),o=n(434),i=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?'[object Undefined]':'[object Null]':i&&i in Object(e)?r(e):o(e)}},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},l=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(a)},p=n(7),u=n(113),h=a(u),m=n(436),y=a(m),v=n(26),b=n(158),_=a(b),x=n(437),k=a(x),E=n(439),S=a(E),w=n(440),N=a(w),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log('create continous view manager'),n.name='continuous',n.settings=(0,p.extend)(n.settings||{},{infinite:!0,overflow:void 0,axis:void 0,flow:'scrolled',offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10}),(0,p.extend)(n.settings,e.settings||{}),'undefined'!=e.settings.gap&&0===e.settings.gap&&(n.settings.gap=e.settings.gap),n.viewSettings={ignoreClass:n.settings.ignoreClass,axis:n.settings.axis,flow:n.settings.flow,layout:n.layout,width:0,height:0,forceEvenPages:!1},n.scrollTop=0,n.scrollLeft=0,n}return i(t,e),l(t,[{key:'display',value:function(e,t){return console.log('display',e,t),h.default.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}},{key:'fill',value:function(e){var t=this,n=e||new p.defer;return this.q.enqueue(function(){return t.check()}).then(function(e){e?t.fill(n):n.resolve()}),n.promise}},{key:'moveTo',value:function(e){console.log('moveTo',e);var t=0,n=0,a=0,r=0;this.isPaginated?(t=g(e.left/this.layout.delta)*this.layout.delta,a=t+this.settings.offsetDelta):(n=e.top,r=e.top+this.settings.offsetDelta),(0<t||0<n)&&this.scrollBy(t,n,!0)}},{key:'afterResized',value:function(e){console.log('afterResized',e),this.emit(v.EVENTS.MANAGERS.RESIZE,e.section)}},{key:'removeShownListeners',value:function(e){e.onDisplayed=function(){}}},{key:'add',value:function(e){var t=this;console.log('add',e);var n=this.createView(e);return this.views.append(n),n.on(v.EVENTS.VIEWS.RESIZED,function(){n.expanded=!0}),n.on(v.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.display(this.request)}},{key:'append',value:function(e){var t=this;console.log('append',e);var n=this.createView(e);return n.on(v.EVENTS.VIEWS.RESIZED,function(){n.expanded=!0}),n.on(v.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n}},{key:'prepend',value:function(e){var t=this;console.log('prepend',e);var n=this.createView(e);return n.on(v.EVENTS.VIEWS.RESIZED,function(e){t.counter(e),n.expanded=!0}),n.on(v.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n}},{key:'counter',value:function(e){'vertical'===this.settings.axis?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}},{key:'update',value:function(e){console.log('update',e);for(var t=this.bounds(),n=this.views.all(),a=n.length,r=[],o='undefined'==typeof e?this.settings.offset||0:e,s=new p.defer,l=[],d=0,i,c;d<a;d++)if(c=n[d],i=this.isVisible(c,o,o,t),!0===i){if(!c.displayed){var u=c.display(this.request).then(function(e){e.show()},function(){console.log('displaying error'),c.hide()});l.push(u)}else c.show();r.push(c)}else this.q.enqueue(c.destroy.bind(c)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return l.length?Promise.all(l).catch(function(e){s.reject(e)}):(s.resolve(),s.promise)}},{key:'check',value:function(e,t){var n=this;console.log('check',e,t);var a=new p.defer,r=[],o='horizontal'===this.settings.axis,i=this.settings.offset||0;e&&o&&(i=e),t&&!o&&(i=t);var s=this._bounds,l='rtl'===this.settings.direction,d=o&&l?-1:1,c=o?this.scrollLeft:this.scrollTop*d,u=o?g(s.width):s.height,h=o?this.container.scrollWidth:this.container.scrollHeight,f=function(){var e=n.views.first(),t=e&&e.section.prev();t&&r.push(n.prepend(t))},m=function(){var e=n.views.last(),t=e&&e.section.next();t&&r.push(n.append(t))};c+u+i>=h&&(o&&l?f():m()),0>c-i&&(o&&l?m():f());var y=r.map(function(e){return e.displayed});return r.length?(console.log('new view added',r.length),Promise.all(y).then(function(){if('pre-paginated'===n.layout.name&&n.layout.props.spread)return n.check()}).then(function(){return n.update(i)},function(e){return e})):(console.log('no new views added'),this.q.enqueue(function(){this.update()}.bind(this)),a.resolve(!1),a.promise)}},{key:'trim',value:function(){var e=new p.defer,t=this.views.displayed(),n=t[0],a=t[t.length-1],r=this.views.indexOf(n),o=this.views.indexOf(a),s=this.views.slice(0,r),l=this.views.slice(o+1);console.log('trim',{displayed:t,first:n,last:a,firstIndex:r,lastIndex:o,above:s,below:l});var d=(0,S.default)(s,f(s.length-2,0)),c=(0,k.default)(l,f(l.length-2,0)),u=(0,N.default)(d,c);console.log('toRemove',u);var h,m;this.settings.fullsize?(h=window.scrollY,m=window.scrollX):(h=this.container.scrollTop,m=this.container.scrollLeft);for(var y=d.reduce(function(e,t){return e+t.bounds().width},0),v=0;v<u.length;v++)this.views.remove(u[v]);return d.length&&('vertical'===this.settings.axis||(console.log('Scroll!!!',m-g(y)),this.scrollTo(m-g(y),0,!0))),e.resolve(),e.promise}},{key:'erase',value:function(e,t){console.log('erase',e,t);var n,a;this.settings.fullsize?(n=window.scrollY,a=window.scrollX):(n=this.container.scrollTop,a=this.container.scrollLeft);var r=e.bounds();this.views.remove(e),t&&('vertical'===this.settings.axis?this.scrollTo(0,n-r.height,!0):(console.log('scrollTo',a-g(r.width)),this.scrollTo(a-g(r.width),0,!0)))}},{key:'addEventListeners',value:function(){window.addEventListener('unload',function(){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new y.default(this,this.settings.snap&&'object'===s(this.settings.snap)&&this.settings.snap))}},{key:'addScrollListeners',value:function(){var e;this.tick=p.requestAnimationFrame,this.settings.fullsize?(this.prevScrollTop=window.scrollY,this.prevScrollLeft=window.scrollX):(this.prevScrollTop=this.container.scrollTop,this.prevScrollLeft=this.container.scrollLeft),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY,this.scrollLeft=window.scrollX):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener('scroll',this._onScroll),this._scrolled=(0,_.default)(this.scrolled.bind(this),40),this.didScroll=!1}},{key:'removeEventListeners',value:function(){console.log('removeEventListeners');var e;e=this.settings.fullsize?window:this.container,e.removeEventListener('scroll',this._onScroll),this._onScroll=void 0}},{key:'onScroll',value:function(){console.log('onScroll');var e=void 0,t=void 0,n='rtl'===this.settings.direction?-1:1;this.settings.fullsize?(e=window.scrollY*n,t=window.scrollX*n):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=c(e-this.prevScrollTop),this.scrollDeltaHorz+=c(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){}.bind(this),100),clearTimeout(this.afterScrolled),this.didScroll=!1}},{key:'scrolled',value:function(){console.log('scrolled'),this.q.enqueue(function(){this.check()}.bind(this)),this.emit(v.EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(v.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}},{key:'next',value:function(){console.log('next');var e=this.settings.direction,t='pre-paginated'===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&'horizontal'===this.settings.axis?this.scrollBy(t,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))}},{key:'prev',value:function(){console.log('prev');var e=this.settings.direction,t='pre-paginated'===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&'horizontal'===this.settings.axis?this.scrollBy(-t,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))}},{key:'updateFlow',value:function(e){console.log('updtateFlow'),this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'updateFlow',this).call(this,e,'scroll'),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new y.default(this,this.settings.snap&&'object'===s(this.settings.snap)&&this.settings.snap))}},{key:'destroy',value:function(){console.log('destroy'),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'destroy',this).call(this),this.snapper&&this.snapper.destroy()}}]),t}(h.default);t.default=T,e.exports=t['default']},function(e){e.exports=function(e,t,n){var a=-1,r=e.length;0>t&&(t=-t>r?0:r+t),n=n>r?r:n,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++a<r;)o[a]=e[a+t];return o}},function(e,t,n){var a=n(438);e.exports=function(e){var t=a(e),n=t%1;return t===t?n?t-n:t:0}},function(e){e.exports=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}},function(e){var t=Array.isArray;e.exports=t},function(e,t,n){n(168),e.exports=n(370)},function(e,t,n){'use strict';(function(e){function t(e,t,n){e[t]||Object[a](e,t,{writable:!0,configurable:!0,value:n})}if(n(169),n(366),n(367),e._babelPolyfill)throw new Error('only one instance of babel-polyfill is allowed');e._babelPolyfill=!0;var a='defineProperty';t(String.prototype,'padLeft',''.padStart),t(String.prototype,'padRight',''.padEnd),['pop','reverse','shift','keys','values','entries','indexOf','every','some','forEach','map','filter','find','findIndex','includes','join','slice','concat','push','splice','unshift','sort','lastIndexOf','reduce','reduceRight','copyWithin','fill'].forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,n(50))},function(e,t,n){n(170),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(250),n(251),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(101),n(274),n(275),n(135),n(276),n(277),n(278),n(279),n(280),n(138),n(140),n(141),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),e.exports=n(21)},function(e,t,n){'use strict';var a=n(2),r=n(17),o=n(8),i=n(0),s=n(15),l=n(35).KEY,d=n(4),c=n(60),p=n(51),u=n(39),g=n(6),h=n(118),f=n(81),m=n(171),y=n(63),v=n(1),b=n(5),_=n(18),x=n(27),E=n(38),S=n(42),w=n(121),N=n(19),T=n(9),C=n(40),R=N.f,A=T.f,I=w.f,O=a.Symbol,P=a.JSON,L=P&&P.stringify,D='prototype',B=g('_hidden'),M=g('toPrimitive'),z={}.propertyIsEnumerable,F=c('symbol-registry'),U=c('symbols'),H=c('op-symbols'),q=Object[D],W='function'==typeof O,V=a.QObject,Y=!V||!V[D]||!V[D].findChild,G=o&&d(function(){return 7!=S(A({},'a',{get:function(){return A(this,'a',{value:7}).a}})).a})?function(e,t,n){var a=R(q,t);a&&delete q[t],A(e,t,n),a&&e!==q&&A(q,t,a)}:A,X=function(e){var t=U[e]=S(O[D]);return t._k=e,t},K=W&&'symbol'==typeof O.iterator?function(e){return'symbol'==typeof e}:function(e){return e instanceof O},Z=function(e,t,n){return e===q&&Z(H,t,n),v(e),t=x(t,!0),v(n),r(U,t)?(n.enumerable?(r(e,B)&&e[B][t]&&(e[B][t]=!1),n=S(n,{enumerable:E(0,!1)})):(!r(e,B)&&A(e,B,E(1,{})),e[B][t]=!0),G(e,t,n)):A(e,t,n)},$=function(e,t){v(e);for(var n=m(t=_(t)),a=0,r=n.length,o;r>a;)Z(e,o=n[a++],t[o]);return e},J=function(e){var t=z.call(this,e=x(e,!0));return this===q&&r(U,e)&&!r(H,e)?!1:t||!r(this,e)||!r(U,e)||r(this,B)&&this[B][e]?t:!0},Q=function(e,t){if(e=_(e),t=x(t,!0),e!==q||!r(U,t)||r(H,t)){var n=R(e,t);return n&&r(U,t)&&!(r(e,B)&&e[B][t])&&(n.enumerable=!0),n}},ee=function(e){for(var t=I(_(e)),n=[],a=0,o;t.length>a;)r(U,o=t[a++])||o==B||o==l||n.push(o);return n},te=function(e){for(var t=e===q,n=I(t?H:_(e)),a=[],o=0,i;n.length>o;)r(U,i=n[o++])&&(!t||r(q,i))&&a.push(U[i]);return a};W||(O=function(){if(this instanceof O)throw TypeError('Symbol is not a constructor!');var e=u(0<arguments.length?arguments[0]:void 0),t=function(n){this===q&&t.call(H,n),r(this,B)&&r(this[B],e)&&(this[B][e]=!1),G(this,e,E(1,n))};return o&&Y&&G(q,e,{configurable:!0,set:t}),X(e)},s(O[D],'toString',function(){return this._k}),N.f=Q,T.f=Z,n(43).f=w.f=ee,n(58).f=J,n(62).f=te,o&&!n(36)&&s(q,'propertyIsEnumerable',J,!0),h.f=function(e){return X(g(e))}),i(i.G+i.W+i.F*!W,{Symbol:O});for(var ne=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],ae=0;ne.length>ae;)g(ne[ae++]);for(var j=C(g.store),re=0;j.length>re;)f(j[re++]);i(i.S+i.F*!W,'Symbol',{for:function(e){return r(F,e+='')?F[e]:F[e]=O(e)},keyFor:function(e){if(!K(e))throw TypeError(e+' is not a symbol!');for(var t in F)if(F[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),i(i.S+i.F*!W,'Object',{create:function(e,t){return t===void 0?S(e):$(S(e),t)},defineProperty:Z,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),P&&i(i.S+i.F*(!W||d(function(){var e=O();return'[null]'!=L([e])||'{}'!=L({a:e})||'{}'!=L(Object(e))})),'JSON',{stringify:function(e){for(var t=[e],n=1,a,r;arguments.length>n;)t.push(arguments[n++]);if(r=a=t[1],(b(a)||void 0!==e)&&!K(e))return y(a)||(a=function(e,t){if('function'==typeof r&&(t=r.call(this,e,t)),!K(t))return t}),t[1]=a,L.apply(P,t)}}),O[D][M]||n(14)(O[D],M,O[D].valueOf),p(O,'Symbol'),p(Math,'Math',!0),p(a.JSON,'JSON',!0)},function(e,t,n){var a=n(40),r=n(62),o=n(58);e.exports=function(e){var t=a(e),n=r.f;if(n)for(var s=n(e),l=o.f,d=0,i;s.length>d;)l.call(e,i=s[d++])&&t.push(i);return t}},function(e,t,n){var a=n(0);a(a.S,'Object',{create:n(42)})},function(e,t,n){var a=n(0);a(a.S+a.F*!n(8),'Object',{defineProperty:n(9).f})},function(e,t,n){var a=n(0);a(a.S+a.F*!n(8),'Object',{defineProperties:n(120)})},function(e,t,n){var a=n(18),r=n(19).f;n(30)('getOwnPropertyDescriptor',function(){return function(e,t){return r(a(e),t)}})},function(e,t,n){var a=n(11),r=n(20);n(30)('getPrototypeOf',function(){return function(e){return r(a(e))}})},function(e,t,n){var a=n(11),r=n(40);n(30)('keys',function(){return function(e){return r(a(e))}})},function(e,t,n){n(30)('getOwnPropertyNames',function(){return n(121).f})},function(e,t,n){var a=n(5),r=n(35).onFreeze;n(30)('freeze',function(e){return function(t){return e&&a(t)?e(r(t)):t}})},function(e,t,n){var a=n(5),r=n(35).onFreeze;n(30)('seal',function(e){return function(t){return e&&a(t)?e(r(t)):t}})},function(e,t,n){var a=n(5),r=n(35).onFreeze;n(30)('preventExtensions',function(e){return function(t){return e&&a(t)?e(r(t)):t}})},function(e,t,n){var a=n(5);n(30)('isFrozen',function(e){return function(t){return!a(t)||!!e&&e(t)}})},function(e,t,n){var a=n(5);n(30)('isSealed',function(e){return function(t){return!a(t)||!!e&&e(t)}})},function(e,t,n){var a=n(5);n(30)('isExtensible',function(e){return function(t){return!!a(t)&&(!e||e(t))}})},function(e,t,n){var a=n(0);a(a.S+a.F,'Object',{assign:n(122)})},function(e,t,n){var a=n(0);a(a.S,'Object',{is:n(187)})},function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var a=n(0);a(a.S,'Object',{setPrototypeOf:n(85).set})},function(e,t,n){'use strict';var a=n(59);({})[n(6)('toStringTag')]='z',n(15)(Object.prototype,'toString',function(){return'[object '+a(this)+']'},!0)},function(e,t,n){var a=n(0);a(a.P,'Function',{bind:n(123)})},function(e,t,n){var a=n(9).f,r=Function.prototype,o=/^\s*function ([^ (]*)/,i='name';i in r||n(8)&&a(r,i,{configurable:!0,get:function(){try{return(''+this).match(o)[1]}catch(t){return''}}})},function(e,t,n){'use strict';var a=n(5),r=n(20),o=n(6)('hasInstance'),i=Function.prototype;o in i||n(9).f(i,o,{value:function(e){if('function'!=typeof this||!a(e))return!1;if(!a(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var a=n(0),r=n(125);a(a.G+a.F*(parseInt!=r),{parseInt:r})},function(e,t,n){var a=n(0),r=n(126);a(a.G+a.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){'use strict';var r=n(2),o=n(17),i=n(23),s=n(87),d=n(27),l=n(4),c=n(43).f,p=n(19).f,u=n(9).f,g=n(52).trim,h='Number',f=r[h],m=f,y=f.prototype,v=i(n(42)(y))==h,b=function(e){var t=d(e,!1);if('string'==typeof t&&2<t.length){t='trim'in a?t.trim():g(t,3);var n=t.charCodeAt(0),r,o,s;if(43===n||45===n){if(r=t.charCodeAt(2),88===r||120===r)return NaN;}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:o=2,s=49;break;case 79:case 111:o=8,s=55;break;default:return+t;}for(var c=t.slice(2),p=0,i=c.length,l;p<i;p++)if(l=c.charCodeAt(p),48>l||l>s)return NaN;return parseInt(c,o)}}return+t};if(!f(' 0o1')||!f('0b1')||f('+0x1')){f=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof f&&(v?l(function(){y.valueOf.call(n)}):i(n)!=h)?s(new m(b(t)),n,f):b(t)};for(var _=n(8)?c(m):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),x=0,k;_.length>x;x++)o(m,k=_[x])&&!o(f,k)&&u(f,k,p(m,k));f.prototype=y,y.constructor=f,n(15)(r,h,f)}},function(e,t,n){'use strict';var a=n(0),r=n(29),o=n(127),l=n(88),i=1 .toFixed,s=g,d=[0,0,0,0,0,0],c='Number.toFixed: incorrect invocation!',p='0',u=function(e,t){for(var n=-1,a=t;6>++n;)a+=e*d[n],d[n]=a%1e7,a=s(a/1e7)},h=function(e){for(var t=6,n=0;0<=--t;)n+=d[t],d[t]=s(n/e),n=1e7*(n%e)},y=function(){for(var e=6,n='';0<=--e;)if(''!=n||0==e||0!==d[e]){var a=d[e]+'';n=''==n?a:n+l.call(p,7-a.length)+a}return n},v=function(e,t,n){return 0===t?n:1==t%2?v(e,t-1,n*e):v(e*e,t/2,n)},b=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t};a(a.P+a.F*('0.000'!==8e-5.toFixed(3)||'1'!==0.9.toFixed(0)||'1.25'!==1.255.toFixed(2)||'1000000000000000128'!==1000000000000000100 .toFixed(0)||!n(4)(function(){i.call({})})),'Number',{toFixed:function(t){var n=o(this,c),a=r(t),i='',s=p,d,g,f,m;if(0>a||20<a)throw RangeError(c);if(n!=n)return'NaN';if(-1e21>=n||1e21<=n)return n+'';if(0>n&&(i='-',n=-n),1e-21<n)if(d=b(n*v(2,69,1))-69,g=0>d?n*v(2,-d,1):n/v(2,d,1),g*=4503599627370496,d=52-d,0<d){for(u(0,g),f=a;7<=f;)u(1e7,0),f-=7;for(u(v(10,f,1),0),f=d-1;23<=f;)h(8388608),f-=23;h(1<<f),u(1,1),h(2),s=y()}else u(0,g),u(1<<-d,0),s=y()+l.call(p,a);return 0<a?(m=s.length,s=i+(m<=a?'0.'+l.call(p,a-m)+s:s.slice(0,m-a)+'.'+s.slice(m-a))):s=i+s,s}})},function(e,t,n){'use strict';var a=n(0),r=n(4),o=n(127),i=1 .toPrecision;a(a.P+a.F*(r(function(){return'1'!==i.call(1,void 0)})||!r(function(){i.call({})})),'Number',{toPrecision:function(e){var t=o(this,'Number#toPrecision: incorrect invocation!');return e===void 0?i.call(t):i.call(t,e)}})},function(e,t,n){var a=n(0);a(a.S,'Number',{EPSILON:2.220446049250313e-16})},function(e,t,n){var a=n(0),r=n(2).isFinite;a(a.S,'Number',{isFinite:function(e){return'number'==typeof e&&r(e)}})},function(e,t,n){var a=n(0);a(a.S,'Number',{isInteger:n(128)})},function(e,t,n){var a=n(0);a(a.S,'Number',{isNaN:function(e){return e!=e}})},function(e,t,n){var a=n(0),r=n(128);a(a.S,'Number',{isSafeInteger:function(e){return r(e)&&9007199254740991>=c(e)}})},function(e,t,n){var a=n(0);a(a.S,'Number',{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var a=n(0);a(a.S,'Number',{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var a=n(0),r=n(126);a(a.S+a.F*(Number.parseFloat!=r),'Number',{parseFloat:r})},function(e,t,n){var a=n(0),r=n(125);a(a.S+a.F*(Number.parseInt!=r),'Number',{parseInt:r})},function(e,t,n){var a=n(0),s=n(129),l=r,d=Math.acosh;a(a.S+a.F*!(d&&710==g(d(Number.MAX_VALUE))&&d(Infinity)==Infinity),'Math',{acosh:function(e){return 1>(e=+e)?NaN:94906265.62425156<e?i(e)+o:s(e-1+l(e-1)*l(e+1))}})},function(e,t,n){function a(e){return isFinite(e=+e)&&0!=e?0>e?-a(-e):i(e+r(e*e+1)):e}var o=n(0),s=Math.asinh;o(o.S+o.F*!(s&&0<1/s(0)),'Math',{asinh:a})},function(e,t,n){var a=n(0),r=Math.atanh;a(a.S+a.F*!(r&&0>1/r(-0)),'Math',{atanh:function(e){return 0==(e=+e)?e:i((1+e)/(1-e))/2}})},function(e,t,n){var a=n(0),r=n(89);a(a.S,'Math',{cbrt:function(e){return r(e=+e)*s(c(e),1/3)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{clz32:function(e){return(e>>>=0)?31-g(i(e+0.5)*Math.LOG2E):32}})},function(e,t,n){var a=n(0),r=l;a(a.S,'Math',{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var a=n(0),r=n(90);a(a.S+a.F*(r!=d),'Math',{expm1:r})},function(e,t,n){var a=n(0);a(a.S,'Math',{fround:n(130)})},function(e,t,n){var a=n(0);a(a.S,'Math',{hypot:function(){for(var e=0,t=0,n=arguments.length,a=0,o,i;t<n;)o=c(arguments[t++]),a<o?(i=a/o,e=e*i*i+1,a=o):0<o?(i=o/a,e+=i*i):e+=o;return a==Infinity?Infinity:a*r(e)}})},function(e,t,n){var a=n(0),r=Math.imul;a(a.S+a.F*n(4)(function(){return-5!=r(4294967295,5)||2!=r.length}),'Math',{imul:function(e,t){var n=65535,a=+e,r=+t,o=n&a,i=n&r;return 0|o*i+((n&a>>>16)*i+o*(n&r>>>16)<<16>>>0)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{log10:function(e){return i(e)*Math.LOG10E}})},function(e,t,n){var a=n(0);a(a.S,'Math',{log1p:n(129)})},function(e,t,n){var a=n(0);a(a.S,'Math',{log2:function(e){return i(e)/o}})},function(e,t,n){var a=n(0);a(a.S,'Math',{sign:n(89)})},function(e,t,n){var a=n(0),r=n(90),o=l;a(a.S+a.F*n(4)(function(){return!0}),'Math',{sinh:function(e){return 1>c(e=+e)?(r(e)-r(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var a=n(0),r=n(90),o=l;a(a.S,'Math',{tanh:function(e){var t=r(e=+e),n=r(-e);return t==Infinity?1:n==Infinity?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var a=n(0);a(a.S,'Math',{trunc:function(e){return(0<e?g:y)(e)}})},function(e,t,n){var a=n(0),r=n(41),o=m,i=String.fromCodePoint;a(a.S+a.F*(!!i&&1!=i.length),'String',{fromCodePoint:function(){for(var e=[],t=arguments.length,n=0,a;t>n;){if(a=+arguments[n++],r(a,1114111)!==a)throw RangeError(a+' is not a valid code point');e.push(65536>a?o(a):o(((a-=65536)>>10)+55296,a%1024+56320))}return e.join('')}})},function(e,t,n){var a=n(0),r=n(18),o=n(10);a(a.S,'String',{raw:function(e){for(var t=r(e.raw),n=o(t.length),a=arguments.length,s=[],l=0;n>l;)s.push(t[l++]+''),l<a&&s.push(arguments[l]+'');return s.join('')}})},function(e,t,n){'use strict';n(52)('trim',function(e){return function(){return e(this,3)}})},function(e,t,n){'use strict';var a=n(91)(!0);n(92)(String,'String',function(e){this._t=e+'',this._i=0},function(){var e=this._t,t=this._i,n;return t>=e.length?{value:void 0,done:!0}:(n=a(e,t),this._i+=n.length,{value:n,done:!1})})},function(e,t,n){'use strict';var a=n(0),r=n(91)(!1);a(a.P,'String',{codePointAt:function(e){return r(this,e)}})},function(e,t,n){'use strict';var a=n(0),r=n(10),o=n(94),i='endsWith',s=''[i];a(a.P+a.F*n(95)(i),'String',{endsWith:function(e){var t=o(this,e,i),n=1<arguments.length?arguments[1]:void 0,a=r(t.length),s=n===void 0?a:h(r(n),a),l=e+'';return t.slice(s-l.length,s)===l}})},function(e,t,n){'use strict';var a=n(0),r=n(94),o='includes';a(a.P+a.F*n(95)(o),'String',{includes:function(e){return!!~r(this,e,o).indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var a=n(0);a(a.P,'String',{repeat:n(88)})},function(e,t,n){'use strict';var a=n(0),r=n(10),o=n(94),i='startsWith',s=''[i];a(a.P+a.F*n(95)(i),'String',{startsWith:function(e){var t=o(this,e,i),n=r(h(1<arguments.length?arguments[1]:void 0,t.length)),a=e+'';return t.slice(n,n+a.length)===a}})},function(e,t,n){'use strict';n(16)('anchor',function(e){return function(t){return e(this,'a','name',t)}})},function(e,t,n){'use strict';n(16)('big',function(e){return function(){return e(this,'big','','')}})},function(e,t,n){'use strict';n(16)('blink',function(e){return function(){return e(this,'blink','','')}})},function(e,t,n){'use strict';n(16)('bold',function(e){return function(){return e(this,'b','','')}})},function(e,t,n){'use strict';n(16)('fixed',function(e){return function(){return e(this,'tt','','')}})},function(e,t,n){'use strict';n(16)('fontcolor',function(e){return function(t){return e(this,'font','color',t)}})},function(e,t,n){'use strict';n(16)('fontsize',function(e){return function(t){return e(this,'font','size',t)}})},function(e,t,n){'use strict';n(16)('italics',function(e){return function(){return e(this,'i','','')}})},function(e,t,n){'use strict';n(16)('link',function(e){return function(t){return e(this,'a','href',t)}})},function(e,t,n){'use strict';n(16)('small',function(e){return function(){return e(this,'small','','')}})},function(e,t,n){'use strict';n(16)('strike',function(e){return function(){return e(this,'strike','','')}})},function(e,t,n){'use strict';n(16)('sub',function(e){return function(){return e(this,'sub','','')}})},function(e,t,n){'use strict';n(16)('sup',function(e){return function(){return e(this,'sup','','')}})},function(e,t,n){var a=n(0);a(a.S,'Date',{now:function(){return new Date().getTime()}})},function(e,t,n){'use strict';var a=n(0),r=n(11),o=n(27);a(a.P+a.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),'Date',{toJSON:function(){var e=r(this),t=o(e);return'number'!=typeof t||isFinite(t)?e.toISOString():null}})},function(e,t,n){var a=n(0),r=n(249);a(a.P+a.F*(Date.prototype.toISOString!==r),'Date',{toISOString:r})},function(e,t,n){'use strict';var a=n(4),r=Date.prototype.getTime,o=Date.prototype.toISOString,i=function(e){return 9<e?e:'0'+e};e.exports=a(function(){return'0385-07-25T07:06:39.999Z'!=o.call(new Date(-50000000000001))})||!a(function(){o.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError('Invalid time value');var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),a=0>t?'-':9999<t?'+':'';return a+('00000'+c(t)).slice(a?-6:-4)+'-'+i(e.getUTCMonth()+1)+'-'+i(e.getUTCDate())+'T'+i(e.getUTCHours())+':'+i(e.getUTCMinutes())+':'+i(e.getUTCSeconds())+'.'+(99<n?n:'0'+i(n))+'Z'}:o},function(e,t,n){var a=Date.prototype,r='Invalid Date',o='toString',i=a[o],s=a.getTime;new Date(NaN)+''!=r&&n(15)(a,o,function(){var e=s.call(this);return e===e?i.call(this):r})},function(e,t,n){var a=n(6)('toPrimitive'),r=Date.prototype;a in r||n(14)(r,a,n(252))},function(e,t,n){'use strict';var a=n(1),r=n(27),o='number';e.exports=function(e){if('string'!==e&&e!==o&&'default'!==e)throw TypeError('Incorrect hint');return r(a(this),e!=o)}},function(e,t,n){var a=n(0);a(a.S,'Array',{isArray:n(63)})},function(e,t,n){'use strict';var a=n(22),r=n(0),o=n(11),i=n(131),s=n(96),l=n(10),d=n(97),c=n(98);r(r.S+r.F*!n(65)(function(e){Array.from(e)}),'Array',{from:function(e){var t=o(e),n='function'==typeof this?this:Array,r=arguments.length,p=1<r?arguments[1]:void 0,u=void 0!==p,g=0,h=c(t),f,m,y,v;if(u&&(p=a(p,2<r?arguments[2]:void 0,2)),void 0!=h&&!(n==Array&&s(h)))for(v=h.call(t),m=new n;!(y=v.next()).done;g++)d(m,g,u?i(v,p,[y.value,g],!0):y.value);else for(f=l(t.length),m=new n(f);f>g;g++)d(m,g,u?p(t[g],g):t[g]);return m.length=g,m}})},function(e,t,n){'use strict';var a=n(0),r=n(97);a(a.S+a.F*n(4)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),'Array',{of:function(){for(var e=0,t=arguments.length,n=new('function'==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){'use strict';var a=n(0),r=n(18),o=[].join;a(a.P+a.F*(n(57)!=Object||!n(24)(o)),'Array',{join:function(e){return o.call(r(this),e===void 0?',':e)}})},function(e,t,n){'use strict';var a=n(0),r=n(84),o=n(23),s=n(41),l=n(10),d=[].slice;a(a.P+a.F*n(4)(function(){r&&d.call(r)}),'Array',{slice:function(e,t){var n=l(this.length),a=o(this);if(t=void 0===t?n:t,'Array'==a)return d.call(this,e,t);for(var r=s(e,n),c=s(t,n),p=l(c-r),u=Array(p),g=0;g<p;g++)u[g]='String'==a?this.charAt(r+g):this[r+g];return u}})},function(e,t,n){'use strict';var a=n(0),r=n(13),o=n(11),i=n(4),s=[].sort,l=[1,2,3];a(a.P+a.F*(i(function(){l.sort(void 0)})||!i(function(){l.sort(null)})||!n(24)(s)),'Array',{sort:function(e){return e===void 0?s.call(o(this)):s.call(o(this),r(e))}})},function(e,t,n){'use strict';var a=n(0),r=n(31)(0),o=n(24)([].forEach,!0);a(a.P+a.F*!o,'Array',{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var a=n(5),r=n(63),o=n(6)('species');e.exports=function(e){var t;return r(e)&&(t=e.constructor,'function'==typeof t&&(t===Array||r(t.prototype))&&(t=void 0),a(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){'use strict';var a=n(0),r=n(31)(1);a(a.P+a.F*!n(24)([].map,!0),'Array',{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){'use strict';var a=n(0),r=n(31)(2);a(a.P+a.F*!n(24)([].filter,!0),'Array',{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){'use strict';var a=n(0),r=n(31)(3);a(a.P+a.F*!n(24)([].some,!0),'Array',{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){'use strict';var a=n(0),r=n(31)(4);a(a.P+a.F*!n(24)([].every,!0),'Array',{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){'use strict';var a=n(0),r=n(132);a(a.P+a.F*!n(24)([].reduce,!0),'Array',{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){'use strict';var a=n(0),r=n(132);a(a.P+a.F*!n(24)([].reduceRight,!0),'Array',{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){'use strict';var a=n(0),r=n(61)(!1),o=[].indexOf,i=!!o&&0>1/[1].indexOf(1,-0);a(a.P+a.F*(i||!n(24)(o)),'Array',{indexOf:function(e){return i?o.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){'use strict';var a=n(0),r=n(18),o=n(29),i=n(10),s=[].lastIndexOf,l=!!s&&0>1/[1].lastIndexOf(1,-0);a(a.P+a.F*(l||!n(24)(s)),'Array',{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=r(this),n=i(t.length),a=n-1;for(1<arguments.length&&(a=h(a,o(arguments[1]))),0>a&&(a=n+a);0<=a;a--)if(a in t&&t[a]===e)return a||0;return-1}})},function(e,t,n){var a=n(0);a(a.P,'Array',{copyWithin:n(133)}),n(37)('copyWithin')},function(e,t,n){var a=n(0);a(a.P,'Array',{fill:n(100)}),n(37)('fill')},function(e,t,n){'use strict';var a=n(0),r=n(31)(5),o='find',i=!0;o in[]&&[,][o](function(){i=!1}),a(a.P+a.F*i,'Array',{find:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),n(37)(o)},function(e,t,n){'use strict';var a=n(0),r=n(31)(6),o='findIndex',i=!0;o in[]&&[,][o](function(){i=!1}),a(a.P+a.F*i,'Array',{findIndex:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),n(37)(o)},function(e,t,n){n(44)('Array')},function(e,t,n){var a=n(2),r=n(87),o=n(9).f,s=n(43).f,l=n(64),d=n(66),c=a.RegExp,u=c,g=c.prototype,p=/a/g,h=/a/g,m=new c(p)!==p;if(n(8)&&(!m||n(4)(function(){return h[n(6)('match')]=!1,c(p)!=p||c(h)==h||'/a/i'!=c(p,'i')}))){c=function(e,t){var n=this instanceof c,a=l(e),o=t===void 0;return!n&&a&&e.constructor===c&&o?e:r(m?new u(a&&!o?e.source:e,t):u((a=e instanceof c)?e.source:e,a&&o?d.call(e):t),n?this:g,c)};for(var f=function(e){(e in c)||o(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},y=s(u),v=0;y.length>v;)f(y[v++]);g.constructor=c,c.prototype=g,n(15)(a,'RegExp',c)}n(44)('RegExp')},function(e,t,n){'use strict';n(135);var a=n(1),r=n(66),o=n(8),i='toString',s=/./[i],l=function(e){n(15)(RegExp.prototype,i,e,!0)};n(4)(function(){return'/a/b'!=s.call({source:'a',flags:'b'})})?l(function(){var e=a(this);return'/'.concat(e.source,'/','flags'in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)}):s.name!=i&&l(function(){return s.call(this)})},function(e,t,n){n(67)('match',1,function(e,t,n){return[function(n){'use strict';var a=e(this),r=n==void 0?void 0:n[t];return r===void 0?new RegExp(n)[t](a+''):r.call(n,a)},n]})},function(e,t,n){n(67)('replace',2,function(e,t,n){return[function(a,r){'use strict';var o=e(this),i=a==void 0?void 0:a[t];return i===void 0?n.call(o+'',a,r):i.call(a,o,r)},n]})},function(e,t,n){n(67)('search',1,function(e,t,n){return[function(n){'use strict';var a=e(this),r=n==void 0?void 0:n[t];return r===void 0?new RegExp(n)[t](a+''):r.call(n,a)},n]})},function(e,t,n){n(67)('split',2,function(e,t,a){'use strict';var r=n(64),o=a,s=[].push,i='split',l='length',d='lastIndex';if('c'=='abbc'[i](/(b)*/)[1]||4!='test'[i](/(?:)/,-1)[l]||2!='ab'[i](/(?:ab)*/)[l]||4!='.'[i](/(.?)(.?)/)[l]||1<'.'[i](/()()/)[l]||''[i](/.?/)[l]){var c=/()??/.exec('')[1]===void 0;a=function(e,t){var n=this+'';if(void 0===e&&0===t)return[];if(!r(e))return o.call(n,e,t);var a=[],p=(e.ignoreCase?'i':'')+(e.multiline?'m':'')+(e.unicode?'u':'')+(e.sticky?'y':''),u=0,g=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,p+'g'),f,m,y,v,b;for(c||(f=new RegExp('^'+h.source+'$(?!\\s)',p));(m=h.exec(n))&&(y=m.index+m[0][l],!(y>u&&(a.push(n.slice(u,m.index)),!c&&1<m[l]&&m[0].replace(f,function(){for(b=1;b<arguments[l]-2;b++)void 0===arguments[b]&&(m[b]=void 0)}),1<m[l]&&m.index<n[l]&&s.apply(a,m.slice(1)),v=m[0][l],u=y,a[l]>=g)));)h[d]===m.index&&h[d]++;return u===n[l]?(v||!h.test(''))&&a.push(''):a.push(n.slice(u)),a[l]>g?a.slice(0,g):a}}else'0'[i](void 0,0)[l]&&(a=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,r){var o=e(this),i=n==void 0?void 0:n[t];return i===void 0?a.call(o+'',n,r):i.call(n,o,r)},a]})},function(e,t,n){'use strict';var a=n(36),r=n(2),o=n(22),i=n(59),s=n(0),l=n(5),d=n(13),c=n(45),p=n(46),u=n(68),g=n(102).set,h=n(103)(),f=n(104),m=n(136),y=n(69),v=n(137),b='Promise',_=r.TypeError,x=r.process,k=x&&x.versions,E=k&&k.v8||'',S=r[b],w='process'==i(x),N=function(){},T=M=f.f,C=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(6)('species')]=function(e){e(N,N)};return(w||'function'==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==E.indexOf('6.6')&&-1===y.indexOf('Chrome/66')}catch(t){}}(),R=function(e){var t;return l(e)&&'function'==typeof(t=e.then)&&t},A=function(e,t){if(!e._n){e._n=!0;var n=e._c;h(function(){for(var a=e._v,r=1==e._s,o=0,i=function(t){var n=r?t.ok:t.fail,o=t.resolve,i=t.reject,s=t.domain,l,d,c;try{n?(!r&&(2==e._h&&P(e),e._h=1),!0===n?l=a:(s&&s.enter(),l=n(a),s&&(s.exit(),c=!0)),l===t.promise?i(_('Promise-chain cycle')):(d=R(l))?d.call(l,o,i):o(l)):i(a)}catch(t){s&&!c&&s.exit(),i(t)}};n.length>o;)i(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(r,function(){var t=e._v,n=O(e),a,o,i;if(n&&(a=m(function(){w?x.emit('unhandledRejection',t,e):(o=r.onunhandledrejection)?o({promise:e,reason:t}):(i=r.console)&&i.error&&i.error('Unhandled promise rejection',t)}),e._h=w||O(e)?2:1),e._a=void 0,n&&a.e)throw a.v})},O=function(e){return 1!==e._h&&0===(e._a||e._c).length},P=function(e){g.call(r,function(){var t;w?x.emit('rejectionHandled',e):(t=r.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),A(t,!0))},D=function(e){var t=this,n;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw _('Promise can\'t be resolved itself');(n=R(e))?h(function(){var a={_w:t,_d:!1};try{n.call(e,o(D,a,1),o(L,a,1))}catch(t){L.call(a,t)}}):(t._v=e,t._s=1,A(t,!1))}catch(n){L.call({_w:t,_d:!1},n)}}},B,M,z,F;C||(S=function(e){c(this,S,b,'_h'),d(e),B.call(this);try{e(o(D,this,1),o(L,this,1))}catch(e){L.call(this,e)}},B=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},B.prototype=n(47)(S.prototype,{then:function(e,t){var n=T(u(this,S));return n.ok='function'!=typeof e||e,n.fail='function'==typeof t&&t,n.domain=w?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),z=function(){var e=new B;this.promise=e,this.resolve=o(D,e,1),this.reject=o(L,e,1)},f.f=T=function(e){return e===S||e===F?new z(e):M(e)}),s(s.G+s.W+s.F*!C,{Promise:S}),n(51)(S,b),n(44)(b),F=n(21)[b],s(s.S+s.F*!C,b,{reject:function(e){var t=T(this),n=t.reject;return n(e),t.promise}}),s(s.S+s.F*(a||!C),b,{resolve:function(e){return v(a&&this===F?S:this,e)}}),s(s.S+s.F*!(C&&n(65)(function(e){S.all(e)['catch'](N)})),b,{all:function(e){var t=this,n=T(t),a=n.resolve,r=n.reject,o=m(function(){var n=[],o=0,i=1;p(e,!1,function(e){var s=o++,l=!1;n.push(void 0),i++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--i||a(n))},r)}),--i||a(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=T(t),a=n.reject,r=m(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return r.e&&a(r.v),n.promise}})},function(e,t,n){'use strict';var a=n(142),r=n(54),o='WeakSet';n(70)(o,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return a.def(r(this,o),e,!0)}},a,!1,!0)},function(e,t,n){'use strict';var a=n(0),r=n(71),o=n(105),i=n(1),s=n(41),l=n(10),d=n(5),c=n(2).ArrayBuffer,p=n(68),u=o.ArrayBuffer,g=o.DataView,h=r.ABV&&c.isView,f=u.prototype.slice,m=r.VIEW,y='ArrayBuffer';a(a.G+a.W+a.F*(c!==u),{ArrayBuffer:u}),a(a.S+a.F*!r.CONSTR,y,{isView:function(e){return h&&h(e)||d(e)&&m in e}}),a(a.P+a.U+a.F*n(4)(function(){return!new u(2).slice(1,void 0).byteLength}),y,{slice:function(e,t){if(f!==void 0&&t===void 0)return f.call(i(this),e);for(var n=i(this).byteLength,a=s(e,n),r=s(void 0===t?n:t,n),o=new(p(this,u))(l(r-a)),d=new g(this),c=new g(o),h=0;a<r;)c.setUint8(h++,d.getUint8(a++));return o}}),n(44)(y)},function(e,t,n){var a=n(0);a(a.G+a.W+a.F*!n(71).ABV,{DataView:n(105).DataView})},function(e,t,n){n(33)('Int8',1,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Uint8',1,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Uint8',1,function(e){return function(t,n,a){return e(this,t,n,a)}},!0)},function(e,t,n){n(33)('Int16',2,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Uint16',2,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Int32',4,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Uint32',4,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Float32',4,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){n(33)('Float64',8,function(e){return function(t,n,a){return e(this,t,n,a)}})},function(e,t,n){var a=n(0),r=n(13),o=n(1),i=(n(2).Reflect||{}).apply,s=Function.apply;a(a.S+a.F*!n(4)(function(){i(function(){})}),'Reflect',{apply:function(e,t,n){var a=r(e),l=o(n);return i?i(a,t,l):s.call(a,t,l)}})},function(e,t,n){var a=n(0),r=n(42),o=n(13),i=n(1),s=n(5),l=n(4),d=n(123),c=(n(2).Reflect||{}).construct,p=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),u=!l(function(){c(function(){})});a(a.S+a.F*(p||u),'Reflect',{construct:function(e,t){o(e),i(t);var n=3>arguments.length?e:o(arguments[2]);if(u&&!p)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);}var a=[null];return a.push.apply(a,t),new(d.apply(e,a))}var l=n.prototype,g=r(s(l)?l:Object.prototype),h=Function.apply.call(e,g,t);return s(h)?h:g}})},function(e,t,n){var a=n(9),r=n(0),o=n(1),i=n(27);r(r.S+r.F*n(4)(function(){Reflect.defineProperty(a.f({},1,{value:1}),1,{value:2})}),'Reflect',{defineProperty:function(e,t,n){o(e),t=i(t,!0),o(n);try{return a.f(e,t,n),!0}catch(t){return!1}}})},function(e,t,n){var a=n(0),r=n(19).f,o=n(1);a(a.S,'Reflect',{deleteProperty:function(e,t){var n=r(o(e),t);return n&&!n.configurable?!1:delete e[t]}})},function(e,t,n){'use strict';var a=n(0),r=n(1),o=function(e){this._t=r(e),this._i=0;var t=this._k=[],n;for(n in e)t.push(n)};n(93)(o,'Object',function(){var e=this,t=e._k,n;do if(e._i>=t.length)return{value:void 0,done:!0};while(!((n=t[e._i++])in e._t));return{value:n,done:!1}}),a(a.S,'Reflect',{enumerate:function(e){return new o(e)}})},function(e,t,n){function a(e,t){var n=3>arguments.length?e:arguments[2],s,c;return d(e)===n?e[t]:(s=r.f(e,t))?i(s,'value')?s.value:void 0===s.get?void 0:s.get.call(n):l(c=o(e))?a(c,t,n):void 0}var r=n(19),o=n(20),i=n(17),s=n(0),l=n(5),d=n(1);s(s.S,'Reflect',{get:a})},function(e,t,n){var a=n(19),r=n(0),o=n(1);r(r.S,'Reflect',{getOwnPropertyDescriptor:function(e,t){return a.f(o(e),t)}})},function(e,t,n){var a=n(0),r=n(20),o=n(1);a(a.S,'Reflect',{getPrototypeOf:function(e){return r(o(e))}})},function(e,t,n){var a=n(0);a(a.S,'Reflect',{has:function(e,t){return t in e}})},function(e,t,n){var a=n(0),r=n(1),o=Object.isExtensible;a(a.S,'Reflect',{isExtensible:function(e){return r(e),!o||o(e)}})},function(e,t,n){var a=n(0);a(a.S,'Reflect',{ownKeys:n(144)})},function(e,t,n){var a=n(0),r=n(1),o=Object.preventExtensions;a(a.S,'Reflect',{preventExtensions:function(e){r(e);try{return o&&o(e),!0}catch(t){return!1}}})},function(e,t,n){function a(e,t,n){var l=4>arguments.length?e:arguments[3],u=o.f(c(e),t),g,h;if(!u){if(p(h=i(e)))return a(h,t,n,l);u=d(0)}if(s(u,'value')){if(!1===u.writable||!p(l))return!1;if(g=o.f(l,t)){if(g.get||g.set||!1===g.writable)return!1;g.value=n,r.f(l,t,g)}else r.f(l,t,d(0,n));return!0}return u.set!==void 0&&(u.set.call(l,n),!0)}var r=n(9),o=n(19),i=n(20),s=n(17),l=n(0),d=n(38),c=n(1),p=n(5);l(l.S,'Reflect',{set:a})},function(e,t,n){var a=n(0),r=n(85);r&&a(a.S,'Reflect',{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(t){return!1}}})},function(e,t,n){'use strict';var a=n(0),r=n(61)(!0);a(a.P,'Array',{includes:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),n(37)('includes')},function(e,t,n){'use strict';var a=n(0),r=n(145),o=n(11),i=n(10),s=n(13),l=n(99);a(a.P,'Array',{flatMap:function(e){var t=o(this),n,a;return s(e),n=i(t.length),a=l(t,0),r(a,t,t,n,0,1,e,arguments[1]),a}}),n(37)('flatMap')},function(e,t,n){'use strict';var a=n(0),r=n(145),o=n(11),i=n(10),s=n(29),l=n(99);a(a.P,'Array',{flatten:function(){var e=arguments[0],t=o(this),n=i(t.length),a=l(t,0);return r(a,t,t,n,0,void 0===e?1:s(e)),a}}),n(37)('flatten')},function(e,t,n){'use strict';var a=n(0),r=n(91)(!0);a(a.P,'String',{at:function(e){return r(this,e)}})},function(e,t,n){'use strict';var a=n(0),r=n(146),o=n(69);a(a.P+a.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),'String',{padStart:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,n){'use strict';var a=n(0),r=n(146),o=n(69);a(a.P+a.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),'String',{padEnd:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,n){'use strict';n(52)('trimLeft',function(e){return function(){return e(this,1)}},'trimStart')},function(e,t,n){'use strict';n(52)('trimRight',function(e){return function(){return e(this,2)}},'trimEnd')},function(e,t,n){'use strict';var a=n(0),r=n(28),o=n(10),i=n(64),s=n(66),l=RegExp.prototype,d=function(e,t){this._r=e,this._s=t};n(93)(d,'RegExp String',function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),a(a.P,'String',{matchAll:function(e){if(r(this),!i(e))throw TypeError(e+' is not a regexp!');var t=this+'',n='flags'in l?e.flags+'':s.call(e),a=new RegExp(e.source,~n.indexOf('g')?n:'g'+n);return a.lastIndex=o(e.lastIndex),new d(a,t)}})},function(e,t,n){n(81)('asyncIterator')},function(e,t,n){n(81)('observable')},function(e,t,n){var a=n(0),r=n(144),o=n(18),s=n(19),l=n(97);a(a.S,'Object',{getOwnPropertyDescriptors:function(e){for(var t=o(e),n=s.f,a=r(t),d={},c=0,i,p;a.length>c;)p=n(t,i=a[c++]),void 0!==p&&l(d,i,p);return d}})},function(e,t,n){var a=n(0),r=n(147)(!1);a(a.S,'Object',{values:function(e){return r(e)}})},function(e,t,n){var a=n(0),r=n(147)(!0);a(a.S,'Object',{entries:function(e){return r(e)}})},function(e,t,n){'use strict';var a=n(0),r=n(11),o=n(13),i=n(9);n(8)&&a(a.P+n(72),'Object',{__defineGetter__:function(e,t){i.f(r(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){'use strict';var a=n(0),r=n(11),o=n(13),i=n(9);n(8)&&a(a.P+n(72),'Object',{__defineSetter__:function(e,t){i.f(r(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){'use strict';var a=n(0),r=n(11),o=n(27),i=n(20),s=n(19).f;n(8)&&a(a.P+n(72),'Object',{__lookupGetter__:function(e){var t=r(this),n=o(e,!0),a;do if(a=s(t,n))return a.get;while(t=i(t))}})},function(e,t,n){'use strict';var a=n(0),r=n(11),o=n(27),i=n(20),s=n(19).f;n(8)&&a(a.P+n(72),'Object',{__lookupSetter__:function(e){var t=r(this),n=o(e,!0),a;do if(a=s(t,n))return a.set;while(t=i(t))}})},function(e,t,n){var a=n(0);a(a.P+a.R,'Map',{toJSON:n(148)('Map')})},function(e,t,n){var a=n(0);a(a.P+a.R,'Set',{toJSON:n(148)('Set')})},function(e,t,n){n(73)('Map')},function(e,t,n){n(73)('Set')},function(e,t,n){n(73)('WeakMap')},function(e,t,n){n(73)('WeakSet')},function(e,t,n){n(74)('Map')},function(e,t,n){n(74)('Set')},function(e,t,n){n(74)('WeakMap')},function(e,t,n){n(74)('WeakSet')},function(e,t,n){var a=n(0);a(a.G,{global:n(2)})},function(e,t,n){var a=n(0);a(a.S,'System',{global:n(2)})},function(e,t,n){var a=n(0),r=n(23);a(a.S,'Error',{isError:function(e){return'Error'===r(e)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{clamp:function(e,t,n){return h(n,f(t,e))}})},function(e,t,a){var r=a(0);r(r.S,'Math',{DEG_PER_RAD:n/180})},function(e,t,a){var r=a(0);r(r.S,'Math',{degrees:function(e){return e*(180/n)}})},function(e,t,n){var a=n(0),r=n(150),o=n(130);a(a.S,'Math',{fscale:function(e,t,n,a,i){return o(r(e,t,n,a,i))}})},function(e,t,n){var a=n(0);a(a.S,'Math',{iaddh:function(e,t,n,a){var r=e>>>0,o=n>>>0;return 0|(t>>>0)+(a>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{isubh:function(e,t,n,a){var r=e>>>0,o=n>>>0;return 0|(t>>>0)-(a>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{imulh:function(e,n){var a=65535,r=+e,o=+n,i=r&a,s=o&a,l=r>>16,d=o>>16,c=(l*s>>>0)+(i*s>>>16);return l*d+(c>>16)+((i*d>>>0)+(c&a)>>16)}})},function(e,t,a){var r=a(0);r(r.S,'Math',{RAD_PER_DEG:180/n})},function(e,t,a){var r=a(0);r(r.S,'Math',{radians:function(e){return e*(n/180)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{scale:n(150)})},function(e,t,n){var a=n(0);a(a.S,'Math',{umulh:function(e,n){var a=65535,r=+e,o=+n,i=r&a,s=o&a,l=r>>>16,d=o>>>16,c=(l*s>>>0)+(i*s>>>16);return l*d+(c>>>16)+((i*d>>>0)+(c&a)>>>16)}})},function(e,t,n){var a=n(0);a(a.S,'Math',{signbit:function(e){return(e=+e)==e?0==e?1/e==Infinity:0<e:e}})},function(e,t,n){'use strict';var a=n(0),r=n(21),o=n(2),i=n(68),s=n(137);a(a.P+a.R,'Promise',{finally:function(t){var n=i(this,r.Promise||o.Promise),e='function'==typeof t;return this.then(e?function(e){return s(n,t()).then(function(){return e})}:t,e?function(a){return s(n,t()).then(function(){throw a})}:t)}})},function(e,t,n){'use strict';var a=n(0),r=n(104),o=n(136);a(a.S,'Promise',{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var a=n(34),r=n(1),o=a.key,i=a.set;a.exp({defineMetadata:function(e,t,n,a){i(e,t,r(n),o(a))}})},function(e,t,n){var a=n(34),r=n(1),o=a.key,i=a.map,s=a.store;a.exp({deleteMetadata:function(e,t){var n=3>arguments.length?void 0:o(arguments[2]),a=i(r(t),n,!1);if(void 0===a||!a['delete'](e))return!1;if(a.size)return!0;var l=s.get(t);return l['delete'](n),!!l.size||s['delete'](t)}})},function(e,t,n){var a=n(34),r=n(1),o=n(20),i=a.has,s=a.get,l=a.key,d=function(e,t,n){var a=i(e,t,n);if(a)return s(e,t,n);var r=o(t);return null===r?void 0:d(e,r,n)};a.exp({getMetadata:function(e,t){return d(e,r(t),3>arguments.length?void 0:l(arguments[2]))}})},function(e,t,n){var a=n(140),r=n(149),o=n(34),i=n(1),s=n(20),l=o.keys,d=o.key,c=function(e,t){var n=l(e,t),o=s(e);if(null===o)return n;var i=c(o,t);return i.length?n.length?r(new a(n.concat(i))):i:n};o.exp({getMetadataKeys:function(e){return c(i(e),2>arguments.length?void 0:d(arguments[1]))}})},function(e,t,n){var a=n(34),r=n(1),o=a.get,i=a.key;a.exp({getOwnMetadata:function(e,t){return o(e,r(t),3>arguments.length?void 0:i(arguments[2]))}})},function(e,t,n){var a=n(34),r=n(1),o=a.keys,i=a.key;a.exp({getOwnMetadataKeys:function(e){return o(r(e),2>arguments.length?void 0:i(arguments[1]))}})},function(e,t,n){var a=n(34),r=n(1),o=n(20),i=a.has,s=a.key,l=function(e,t,n){var a=i(e,t,n);if(a)return!0;var r=o(t);return null!==r&&l(e,r,n)};a.exp({hasMetadata:function(e,t){return l(e,r(t),3>arguments.length?void 0:s(arguments[2]))}})},function(e,t,n){var a=n(34),r=n(1),o=a.has,i=a.key;a.exp({hasOwnMetadata:function(e,t){return o(e,r(t),3>arguments.length?void 0:i(arguments[2]))}})},function(e,t,n){var a=n(34),r=n(1),o=n(13),i=a.key,s=a.set;a.exp({metadata:function(e,t){return function(n,a){s(e,t,(a===void 0?o:r)(n),i(a))}}})},function(e,t,n){var a=n(0),r=n(103)(),o=n(2).process,i='process'==n(23)(o);a(a.G,{asap:function(e){var t=i&&o.domain;r(t?t.bind(e):e)}})},function(e,t,n){'use strict';var a=n(0),r=n(2),o=n(21),i=n(103)(),s=n(6)('observable'),l=n(13),d=n(1),c=n(45),p=n(47),u=n(14),g=n(46),h=g.RETURN,f=function(e){return null==e?void 0:l(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return e._o===void 0},m=function(e){v(e)||(e._o=void 0,y(e))},b=function(t,e){d(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),a=n;null!=n&&('function'==typeof n.unsubscribe?n=function(){a.unsubscribe()}:l(n),this._c=n)}catch(n){return void t.error(n)}v(this)&&y(this)};b.prototype=p({},{unsubscribe:function(){m(this)}});var _=function(e){this._s=e};_.prototype=p({},{next:function(e){var t=this._s;if(!v(t)){var n=t._o;try{var a=f(n.next);if(a)return a.call(n,e)}catch(n){try{m(t)}finally{throw n}}}},error:function(e){var t=this._s;if(v(t))throw e;var n=t._o;t._o=void 0;try{var a=f(n.error);if(!a)throw e;e=a.call(n,e)}catch(n){try{y(t)}finally{throw n}}return y(t),e},complete:function(e){var t=this._s;if(!v(t)){var n=t._o;t._o=void 0;try{var a=f(n.complete);e=a?a.call(n,e):void 0}catch(n){try{y(t)}finally{throw n}}return y(t),e}}});var k=function(e){c(this,k,'Observable','_f')._f=l(e)};p(k.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||r.Promise)(function(n,a){l(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(t){a(t),r.unsubscribe()}},error:a,complete:n})})}}),p(k,{from:function(e){var t='function'==typeof this?this:k,n=f(d(e)[s]);if(n){var a=d(n.call(e));return a.constructor===t?a:new t(function(e){return a.subscribe(e)})}return new t(function(t){var n=!1;return i(function(){if(!n){try{if(g(e,!1,function(e){if(t.next(e),n)return h})===h)return}catch(a){if(n)throw a;return void t.error(a)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new('function'==typeof this?this:k)(function(e){var t=!1;return i(function(){if(!t){for(var a=0;a<n.length;++a)if(e.next(n[a]),t)return;e.complete()}}),function(){t=!0}})}}),u(k.prototype,s,function(){return this}),a(a.G,{Observable:k}),n(44)('Observable')},function(e,t,n){var a=n(2),r=n(0),o=n(69),i=[].slice,s=/MSIE .\./.test(o),l=function(e){return function(t,n){var a=2<arguments.length,r=!!a&&i.call(arguments,2);return e(a?function(){('function'==typeof t?t:Function(t)).apply(this,r)}:t,n)}};r(r.G+r.B+r.F*s,{setTimeout:l(a.setTimeout),setInterval:l(a.setInterval)})},function(e,t,n){var a=n(0),r=n(102);a(a.G+a.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){for(var a=n(101),r=n(40),o=n(15),s=n(2),l=n(14),d=n(53),c=n(6),p=c('iterator'),u=c('toStringTag'),g=d.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(h),m=0;m<f.length;m++){var i=f[m],y=h[i],v=s[i],b=v&&v.prototype,_;if(b&&(b[p]||l(b,p,g),b[u]||l(b,u,i),d[i]=g,y))for(_ in a)b[_]||o(b,_,a[_],!0)}},function(e,t,n){(function(t){!function(t){'use strict';function n(e,t,n,a){var o=t&&t.prototype instanceof r?t:r,i=Object.create(o.prototype),s=new g(a||[]);return i._invoke=d(e,n,s),i}function a(e,t,n){try{return{type:'normal',arg:e.call(t,n)}}catch(e){return{type:'throw',arg:e}}}function r(){}function o(){}function i(){}function s(e){['next','throw','return'].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function n(t,r,o,i){var s=a(e[t],e,r);if('throw'===s.type)i(s.arg);else{var l=s.arg,d=l.value;return d&&'object'==typeof d&&y.call(d,'__await')?Promise.resolve(d.__await).then(function(e){n('next',e,o,i)},function(e){n('throw',e,o,i)}):Promise.resolve(d).then(function(e){l.value=e,o(l)},i)}}'object'==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n));var r;this._invoke=function(e,t){function a(){return new Promise(function(a,r){n(e,t,a,r)})}return r=r?r.then(a,a):a()}}function d(e,t,n){var r=S;return function(o,i){if(r==N)throw new Error('Generator is already running');if(r==T){if('throw'===o)throw i;return f()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var l=c(s,n);if(l){if(l===C)continue;return l}}if('next'===n.method)n.sent=n._sent=n.arg;else if('throw'===n.method){if(r==S)throw r=T,n.arg;n.dispatchException(n.arg)}else'return'===n.method&&n.abrupt('return',n.arg);r=N;var d=a(e,t,n);if('normal'===d.type){if(r=n.done?T:w,d.arg===C)continue;return{value:d.arg,done:n.done}}'throw'===d.type&&(r=T,n.method='throw',n.arg=d.arg)}}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,'throw'===t.method){if(e.iterator.return&&(t.method='return',t.arg=void 0,c(e,t),'throw'===t.method))return C;t.method='throw',t.arg=new TypeError('The iterator does not provide a \'throw\' method')}return C}var r=a(n,e.iterator,t.arg);if('throw'===r.type)return t.method='throw',t.arg=r.arg,t.delegate=null,C;var o=r.arg;if(!o)return t.method='throw',t.arg=new TypeError('iterator result is not an object'),t.delegate=null,C;if(o.done)t[e.resultName]=o.value,t.next=e.nextLoc,'return'!==t.method&&(t.method='next',t.arg=void 0);else return o;return t.delegate=null,C}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function g(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(p,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:f}}function f(){return{value:void 0,done:!0}}var m=Object.prototype,y=m.hasOwnProperty,v='function'==typeof Symbol?Symbol:{},b=v.iterator||'@@iterator',_=v.asyncIterator||'@@asyncIterator',x=v.toStringTag||'@@toStringTag',k='object'==typeof e,E=t.regeneratorRuntime;if(E)return void(k&&(e.exports=E));E=t.regeneratorRuntime=k?e.exports:{},E.wrap=n;var S='suspendedStart',w='suspendedYield',N='executing',T='completed',C={},R={};R[b]=function(){return this};var A=Object.getPrototypeOf,I=A&&A(A(h([])));I&&I!==m&&y.call(I,b)&&(R=I);var O=i.prototype=r.prototype=Object.create(R);o.prototype=O.constructor=i,i.constructor=o,i[x]=o.displayName='GeneratorFunction',E.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===o||'GeneratorFunction'===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,!(x in e)&&(e[x]='GeneratorFunction')),e.prototype=Object.create(O),e},E.awrap=function(e){return{__await:e}},s(l.prototype),l.prototype[_]=function(){return this},E.AsyncIterator=l,E.async=function(e,t,a,r){var o=new l(n(e,t,a,r));return E.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(O),O[x]='Generator',O[b]=function(){return this},O.toString=function(){return'[object Generator]'},E.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},E.values=h,g.prototype={constructor:g,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(u),!e)for(var t in this)'t'===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if('throw'===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return o.type='throw',o.arg=e,n.next=t,a&&(n.method='next',n.arg=void 0),!!a}if(this.done)throw e;for(var n=this,a=this.tryEntries.length-1;0<=a;--a){var r=this.tryEntries[a],o=r.completion;if('root'===r.tryLoc)return t('end');if(r.tryLoc<=this.prev){var i=y.call(r,'catchLoc'),s=y.call(r,'finallyLoc');if(i&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);}else if(!s)throw new Error('try statement without catch or finally');else if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.tryLoc<=this.prev&&y.call(a,'finallyLoc')&&this.prev<a.finallyLoc){var r=a;break}r&&('break'===e||'continue'===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method='next',this.next=r.finallyLoc,C):this.complete(o)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),u(n),C},catch:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.tryLoc===e){var a=n.completion;if('throw'===a.type){var r=a.arg;u(n)}return r}throw new Error('illegal catch attempt')},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},'next'===this.method&&(this.arg=void 0),C}}}('object'==typeof t?t:'object'==typeof window?window:'object'==typeof self?self:this)}).call(t,n(50))},function(e,t,n){n(368),e.exports=n(21).RegExp.escape},function(e,t,n){var a=n(0),r=n(369)(/[\\^$*+?.()|[\]{}]/g,'\\$&');a(a.S,'RegExp',{escape:function(e){return r(e)}})},function(e){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return(t+'').replace(e,n)}}},function(e,t,n){'use strict';(function(a){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return new l.default(e,t)}Object.defineProperty(t,'__esModule',{value:!0});var s=n(371),l=o(s),d=n(155),c=o(d),p=n(25),u=o(p),g=n(112),h=o(g),f=n(7),m=r(f),y=n(26),v=n(451),b=r(v),_=n(157),x=o(_),k=n(113),E=o(k),S=n(162),w=o(S);i.VERSION=y.EPUBJS_VERSION,'undefined'!=typeof a&&(a.EPUBJS_VERSION=y.EPUBJS_VERSION),i.Book=l.default,i.Rendition=c.default,i.Contents=h.default,i.CFI=u.default,i.utils=m,t.default=i,e.exports=t['default']}).call(t,n(50))},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(32),s=a(i),l=n(7),d=n(75),c=a(d),p=n(48),u=a(p),g=n(388),h=a(g),f=n(416),m=a(f),y=n(417),v=a(y),b=n(418),_=a(b),x=n(419),k=a(x),E=n(420),S=a(E),w=n(421),N=a(w),T=n(155),C=a(T),R=n(446),A=a(R),I=n(78),O=a(I),P=n(25),L=a(P),D=n(448),B=a(D),M=n(450),z=a(M),F=n(26),j='META-INF/container.xml',U={BINARY:'binary',BASE64:'base64',EPUB:'epub',OPF:'opf',MANIFEST:'json',DIRECTORY:'directory'},H=function(){function e(t,n){var a=this;r(this,e),'undefined'==typeof n&&'string'!=typeof t&&!1==t instanceof Blob&&(n=t,t=void 0),this.settings=(0,l.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),(0,l.extend)(this.settings,n),this.opening=new l.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new l.defer,spine:new l.defer,metadata:new l.defer,cover:new l.defer,navigation:new l.defer,pageList:new l.defer,resources:new l.defer,displayOptions:new l.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||O.default,this.spine=new h.default,this.locations=new m.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),t&&this.open(t,this.settings.openAs).catch(function(){var e=new Error('Cannot load book at '+t);a.emit(F.EVENTS.BOOK.OPEN_FAILED,e)})}return o(e,[{key:'open',value:function(e,t){var n=t||this.determineType(e),a;return n===U.BINARY?(this.archived=!0,this.url=new c.default('/',''),a=this.openEpub(e)):n===U.BASE64?(this.archived=!0,this.url=new c.default('/',''),a=this.openEpub(e,n)):n===U.EPUB?(this.archived=!0,this.url=new c.default('/',''),a=this.request(e,'binary',this.settings.requestCredentials).then(this.openEpub.bind(this))):n==U.OPF?(this.url=new c.default(e),a=this.openPackaging(this.url.Path.toString())):n==U.MANIFEST?(this.url=new c.default(e),a=this.openManifest(this.url.Path.toString())):(this.url=new c.default(e),a=this.openContainer(j).then(this.openPackaging.bind(this))),a}},{key:'openEpub',value:function(e,t){var n=this;return this.unarchive(e,t||this.settings.encoding).then(function(){return n.openContainer(j)}).then(function(e){return n.openPackaging(e)})}},{key:'openContainer',value:function(e){var t=this;return this.load(e).then(function(e){return t.container=new v.default(e),t.resolve(t.container.packagePath)})}},{key:'openPackaging',value:function(e){var t=this;return this.path=new u.default(e),this.load(e).then(function(e){return t.packaging=new _.default(e),t.unpack(t.packaging)})}},{key:'openManifest',value:function(e){var t=this;return this.path=new u.default(e),this.load(e).then(function(e){return t.packaging=new _.default,t.packaging.load(e),t.unpack(t.packaging)})}},{key:'load',value:function(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}},{key:'resolve',value:function(e,t){if(e){var n=e,a=-1<e.indexOf('://');return a?e:(this.path&&(n=this.path.resolve(e)),!1!=t&&this.url&&(n=this.url.resolve(n)),n)}}},{key:'canonical',value:function(e){var t=e;return e?(t=this.settings.canonical?this.settings.canonical(e):this.resolve(e,!0),t):''}},{key:'determineType',value:function(e){var t,n,a;return'base64'===this.settings.encoding?U.BASE64:'string'==typeof e?(t=new c.default(e),n=t.path(),a=n.extension,a?'epub'===a?U.EPUB:'opf'===a?U.OPF:'json'===a?U.MANIFEST:void 0:U.DIRECTORY):U.BINARY}},{key:'unpack',value:function(e){var t=this;this.package=e,''===this.packaging.metadata.layout?this.load(this.url.resolve('META-INF/com.apple.ibooks.display-options.xml')).then(function(e){t.displayOptions=new z.default(e),t.loading.displayOptions.resolve(t.displayOptions)}).catch(function(){t.displayOptions=new z.default,t.loading.displayOptions.resolve(t.displayOptions)}):(this.displayOptions=new z.default,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new S.default(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?'blobUrl':'base64')}),this.loadNavigation(this.packaging).then(function(){t.loading.navigation.resolve(t.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&'none'!=this.settings.replacements?this.replacements().then(function(){t.loaded.displayOptions.then(function(){t.opening.resolve(t)})}).catch(function(e){console.error(e)}):this.loaded.displayOptions.then(function(){t.opening.resolve(t)})}},{key:'loadNavigation',value:function(e){var t=this,n=e.navPath||e.ncxPath,a=e.toc;return a?new Promise(function(n){t.navigation=new k.default(a),e.pageList&&(t.pageList=new N.default(e.pageList)),n(t.navigation)}):n?this.load(n,'xml').then(function(e){return t.navigation=new k.default(e),t.pageList=new N.default(e),t.navigation}):new Promise(function(e){t.navigation=new k.default,t.pageList=new N.default,e(t.navigation)})}},{key:'section',value:function(e){return this.spine.get(e)}},{key:'renderTo',value:function(e,t){return this.rendition=new C.default(this,t),this.rendition.attachTo(e),this.rendition}},{key:'setRequestCredentials',value:function(e){this.settings.requestCredentials=e}},{key:'setRequestHeaders',value:function(e){this.settings.requestHeaders=e}},{key:'unarchive',value:function(e,t){return this.archive=new A.default,this.archive.open(e,t)}},{key:'store',value:function(e){var t=this,n=this.settings.replacements&&'none'!==this.settings.replacements,a=this.url,r=this.settings.requestMethod||O.default.bind(this);return this.storage=new B.default(e,r,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(function(){t.archived&&(t.storage.requester=t.archive.request.bind(t.archive));var e=function(e,n){n.output=t.resources.substitute(e,n.url)};t.resources.settings.replacements=n||'blobUrl',t.resources.replacements().then(function(){return t.resources.replaceCss()}),t.storage.on('offline',function(){t.url=new c.default('/',''),t.spine.hooks.serialize.register(e)}),t.storage.on('online',function(){t.url=a,t.spine.hooks.serialize.deregister(e)})}),this.storage}},{key:'coverUrl',value:function(){var e=this,t=this.loaded.cover.then(function(){return e.archived?e.resources.get(e.cover):e.cover});return t}},{key:'replacements',value:function(){var e=this;return this.spine.hooks.serialize.register(function(t,n){n.output=e.resources.substitute(t,n.url)}),this.resources.replacements().then(function(){return e.resources.replaceCss()})}},{key:'getRange',value:function(e){var t=new L.default(e),n=this.spine.get(t.spinePos),a=this.load.bind(this);return n?n.load(a).then(function(){var e=t.toRange(n.document);return e}):new Promise(function(e,t){t('CFI could not be found')})}},{key:'key',value:function(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return'epubjs:'+F.EPUBJS_VERSION+':'+t}},{key:'destroy',value:function(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}]),e}();(0,s.default)(H.prototype),t.default=H,e.exports=t['default']},function(e,t,n){'use strict';var a=n(373),r=n(381),o=n(382),i=n(383),s;s=e.exports=function(t,n){var o,s,l,d,p;return 2>arguments.length||'string'!=typeof t?(d=n,n=t,t=null):d=arguments[2],null==t?(o=l=!0,s=!1):(o=i.call(t,'c'),s=i.call(t,'e'),l=i.call(t,'w')),p={value:n,configurable:o,enumerable:s,writable:l},d?a(r(d),p):p},s.gs=function(t,n,s){var l,d,p,u;return'string'==typeof t?p=arguments[3]:(p=s,s=n,n=t,t=null),null==n?n=void 0:o(n)?null==s?s=void 0:!o(s)&&(p=s,s=void 0):(p=n,n=s=void 0),null==t?(l=!0,d=!1):(l=i.call(t,'c'),d=i.call(t,'e')),u={get:n,set:s,configurable:l,enumerable:d},p?a(r(p),u):u}},function(e,t,n){'use strict';e.exports=n(374)()?Object.assign:n(375)},function(e){'use strict';e.exports=function(){var e=Object.assign,t;return!('function'!=typeof e)&&(t={foo:'raz'},e(t,{bar:'dwa'},{trzy:'trzy'}),'razdwatrzy'===t.foo+t.bar+t.trzy)}},function(e,t,n){'use strict';var a=n(376),r=n(380);e.exports=function(e,t){var n=f(arguments.length,2),o,s,i;for(e=Object(r(e)),i=function(n){try{e[n]=t[n]}catch(t){o||(o=t)}},s=1;s<n;++s)t=arguments[s],a(t).forEach(i);if(o!==void 0)throw o;return e}},function(e,t,n){'use strict';e.exports=n(377)()?Object.keys:n(378)},function(e){'use strict';e.exports=function(){try{return Object.keys('primitive'),!0}catch(t){return!1}}},function(e,t,n){'use strict';var a=n(106),r=Object.keys;e.exports=function(e){return r(a(e)?Object(e):e)}},function(e){'use strict';e.exports=function(){}},function(e,t,n){'use strict';var a=n(106);e.exports=function(e){if(!a(e))throw new TypeError('Cannot use null or undefined');return e}},function(e,t,n){'use strict';var a=n(106),r=Array.prototype.forEach,o=Object.create,i=function(e,t){for(var n in e)t[n]=e[n]};e.exports=function(){var e=o(null);return r.call(arguments,function(t){a(t)&&i(Object(t),e)}),e}},function(e){'use strict';e.exports=function(e){return'function'==typeof e}},function(e,t,n){'use strict';e.exports=n(384)()?a.contains:n(385)},function(e){'use strict';var t='razdwatrzy';e.exports=function(){return!('function'!=typeof t.contains)&&!0===t.contains('dwa')&&!1===t.contains('foo')}},function(e){'use strict';var t=a.indexOf;e.exports=function(e){return-1<t.call(this,e,arguments[1])}},function(e){'use strict';e.exports=function(e){if('function'!=typeof e)throw new TypeError(e+' is not a function');return e}},function(t){t.exports=e},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(25),s=a(i),l=n(107),d=a(l),c=n(389),p=a(c),u=n(77),g=function(){function e(){r(this,e),this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new d.default,this.hooks.content=new d.default,this.hooks.content.register(u.replaceBase),this.hooks.content.register(u.replaceCanonical),this.hooks.content.register(u.replaceMeta),this.epubcfi=new s.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}return o(e,[{key:'unpack',value:function(e,t,n){var a=this;this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||'',this.length=this.items.length,this.items.forEach(function(e,r){var o=a.manifest[e.idref],i;e.index=r,e.cfiBase=a.epubcfi.generateChapterComponent(a.spineNodeIndex,e.index,e.idref),e.href&&(e.url=t(e.href,!0),e.canonical=n(e.href)),o&&(e.href=o.href,e.url=t(e.href,!0),e.canonical=n(e.href),o.properties.length&&e.properties.push.apply(e.properties,o.properties)),'yes'===e.linear?(e.prev=function(){for(var t=e.index,n;0<t;){if(n=this.get(t-1),n&&n.linear)return n;t-=1}}.bind(a),e.next=function(){for(var t=e.index,n;t<this.spineItems.length-1;){if(n=this.get(t+1),n&&n.linear)return n;t+=1}}.bind(a)):(e.prev=function(){},e.next=function(){}),i=new p.default(e,a.hooks),a.append(i)}),this.loaded=!0}},{key:'get',value:function(e){var t=0;if('undefined'==typeof e)for(;t<this.spineItems.length;){var n=this.spineItems[t];if(n&&n.linear)break;t+=1}else if(this.epubcfi.isCfiString(e)){var a=new s.default(e);t=a.spinePos}else'number'==typeof e||!1===isNaN(e)?t=e:'string'==typeof e&&0===e.indexOf('#')?t=this.spineById[e.substring(1)]:'string'==typeof e&&(e=e.split('#')[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}},{key:'append',value:function(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}},{key:'prepend',value:function(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(e,t){e.index=t}),0}},{key:'remove',value:function(e){var t=this.spineItems.indexOf(e);if(-1<t)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}},{key:'each',value:function(){return this.spineItems.forEach.apply(this.spineItems,arguments)}},{key:'first',value:function(){var e=0;do{var t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}},{key:'last',value:function(){var e=this.spineItems.length-1;do{var t=this.get(e);if(t&&t.linear)return t;e-=1}while(0<=e)}},{key:'destroy',value:function(){this.each(function(e){return e.destroy()}),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}]),e}();t.default=g,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(7),s=n(25),l=a(s),d=n(107),c=a(d),p=n(77),u=function(){function e(t,n){r(this,e),this.idref=t.idref,this.linear='yes'===t.linear,this.properties=t.properties,this.index=t.index,this.href=t.href,this.url=t.url,this.canonical=t.canonical,this.next=t.next,this.prev=t.prev,this.cfiBase=t.cfiBase,n?this.hooks=n:(this.hooks={},this.hooks.serialize=new c.default(this),this.hooks.content=new c.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}return o(e,[{key:'load',value:function(e){var t=e||this.request||n(78),a=new i.defer,r=a.promise;return this.contents?a.resolve(this.contents):t(this.url).then(function(e){return this.document=e,this.contents=e.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){a.resolve(this.contents)}.bind(this)).catch(function(e){a.reject(e)}),r}},{key:'base',value:function(){return(0,p.replaceBase)(this.document,this)}},{key:'render',value:function(e){var t=new i.defer,a=t.promise;return this.output,this.load(e).then(function(e){var t='undefined'!=typeof navigator&&navigator.userAgent||'',a=0<=t.indexOf('Trident'),r;r='undefined'==typeof XMLSerializer||a?n(414).XMLSerializer:XMLSerializer;var o=new r;return this.output=o.serializeToString(e),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(e){t.reject(e)}),a}},{key:'find',value:function(e){var t=this,n=[],a=e.toLowerCase(),r=function(e){for(var r=e.textContent.toLowerCase(),o=t.document.createRange(),i=-1,s=150,l,d,c;-1!=d;)d=r.indexOf(a,i+1),-1!=d&&(o=t.document.createRange(),o.setStart(e,d),o.setEnd(e,d+a.length),l=t.cfiFromRange(o),e.textContent.length<s?c=e.textContent:(c=e.textContent.substring(d-s/2,d+s/2),c='...'+c+'...'),n.push({cfi:l,excerpt:c})),i=d};return(0,i.sprint)(t.document,function(e){r(e)}),n}},{key:'reconcileLayoutSettings',value:function(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(e){var n=e.replace('rendition:',''),a=n.indexOf('-'),r,o;-1!=a&&(r=n.slice(0,a),o=n.slice(a+1),t[r]=o)}),t}},{key:'cfiFromRange',value:function(e){return new l.default(e,this.cfiBase).toString()}},{key:'cfiFromElement',value:function(e){return new l.default(e,this.cfiBase).toString()}},{key:'unload',value:function(){this.document=void 0,this.contents=void 0,this.output=void 0}},{key:'destroy',value:function(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}]),e}();t.default=u,e.exports=t['default']},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(79),n(391),n(392),n(55),n(56),n(108),n(152),n(393),n(153),n(394),n(395),n(396),n(109),n(397),n(49),n(12),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413))})(this,function(e){return e})},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){if('function'==typeof ArrayBuffer){var t=e.lib,n=t.WordArray,a=n.init,r=n.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||'undefined'!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-8*(r%4);a.call(this,n,t)}else a.apply(this,arguments)};r.prototype=n}}(),e.lib.WordArray})},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){function t(e){return 4278255360&e<<8|16711935&e>>>8}var n=e,a=n.lib,r=a.WordArray,o=n.enc,i=o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],r=0,o;r<n;r+=2)o=65535&t[r>>>2]>>>16-8*(r%4),a.push(m(o));return a.join('')},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a++)n[a>>>1]|=e.charCodeAt(a)<<16-16*(a%2);return r.create(n,2*t)}};o.Utf16LE={stringify:function(e){for(var n=e.words,a=e.sigBytes,r=[],o=0,i;o<a;o+=2)i=t(65535&n[o>>>2]>>>16-8*(o%4)),r.push(m(i));return r.join('')},parse:function(e){for(var n=e.length,a=[],o=0;o<n;o++)a[o>>>1]|=t(e.charCodeAt(o)<<16-16*(o%2));return r.create(a,2*n)}}}(),e.enc.Utf16})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(152))})(this,function(e){return function(){var t=e,n=t.lib,a=n.WordArray,r=t.algo,o=r.SHA256,i=r.SHA224=o.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(i),t.HmacSHA224=o._createHmacHelper(i)}(),e.SHA224})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(79),n(153))})(this,function(e){return function(){var t=e,n=t.x64,a=n.Word,r=n.WordArray,o=t.algo,i=o.SHA512,s=o.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=i._createHelper(s),t.HmacSHA384=i._createHmacHelper(s)}(),e.SHA384})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(79))})(this,function(e){return function(){var t=e,n=t.lib,a=n.WordArray,r=n.Hasher,o=t.x64,s=o.Word,i=t.algo,l=[],d=[],c=[];(function(){for(var e=1,n=0,a=0;24>a;a++){l[e+5*n]=(a+1)*(a+2)/2%64;var t=n%5,r=(2*e+3*n)%5;e=t,n=r}for(var e=0;5>e;e++)for(var n=0;5>n;n++)d[e+5*n]=n+5*((2*e+3*n)%5);for(var o=1,p=0;24>p;p++){for(var i=0,u=0,g=0;7>g;g++){if(1&o){var h=(1<<g)-1;32>h?u^=1<<h:i^=1<<h-32}128&o?o=113^o<<1:o<<=1}c[p]=s.create(i,u)}})();var p=[];(function(){for(var e=0;25>e;e++)p[e]=s.create()})();var u=i.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;25>t;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,a=this.blockSize/2,r=0;r<a;r++){var o=e[t+2*r],i=e[t+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);var s=n[r];s.high^=i,s.low^=o}for(var u=0;24>u;u++){for(var g=0;5>g;g++){for(var h=0,f=0,m=0,s;5>m;m++)s=n[g+5*m],h^=s.high,f^=s.low;var y=p[g];y.high=h,y.low=f}for(var g=0;5>g;g++)for(var v=p[(g+4)%5],b=p[(g+1)%5],_=b.high,x=b.low,h=v.high^(_<<1|x>>>31),f=v.low^(x<<1|_>>>31),m=0,s;5>m;m++)s=n[g+5*m],s.high^=h,s.low^=f;for(var k=1;25>k;k++){var s=n[k],E=s.high,S=s.low,w=l[k];if(32>w)var h=E<<w|S>>>32-w,f=S<<w|E>>>32-w;else var h=S<<w-32|E>>>64-w,f=E<<w-32|S>>>64-w;var N=p[d[k]];N.high=h,N.low=f}var T=p[0],C=n[0];T.high=C.high,T.low=C.low;for(var g=0;5>g;g++)for(var m=0;5>m;m++){var k=g+5*m,s=n[k],R=p[k],A=p[(g+1)%5+5*m],I=p[(g+2)%5+5*m];s.high=R.high^~A.high&I.high,s.low=R.low^~A.low&I.low}var s=n[0],O=c[u];s.high^=O.high,s.low^=O.low}},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes,o=32*this.blockSize;t[r>>>5]|=1<<24-r%32,t[(y((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var s=this._state,l=this.cfg.outputLength/8,d=[],c=0;c<l/8;c++){var i=s[c],p=i.high,u=i.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),d.push(u),d.push(p)}return new a.init(d,l)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;25>n;n++)t[n]=t[n].clone();return e}});t.SHA3=r._createHelper(u),t.HmacSHA3=r._createHmacHelper(u)}(Math),e.SHA3})},function(e,t,n){(function(a,r){e.exports=t=r(n(3))})(this,function(e){return function(){function n(e,t,n){return e^t^n}function a(e,t,n){return e&t|~e&n}function r(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function s(e,t,n){return e^(t|~n)}function l(e,t){return e<<t|e>>>32-t}var t=e,i=t.lib,d=i.WordArray,c=i.Hasher,p=t.algo,u=d.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=d.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=d.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=d.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=d.create([0,1518500249,1859775393,2400959708,2840853838]),y=d.create([1352829926,1548603684,1836072691,2053994217,0]),v=p.RIPEMD160=c.extend({_doReset:function(){this._hash=d.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,d){for(var c=0;16>c;c++){var i=d+c,p=e[i];e[i]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}var v=this._hash.words,b=m.words,_=y.words,x=u.words,k=g.words,E=h.words,S=f.words,w,N,T,C,R,A,I,O,P,L;A=w=v[0],I=N=v[1],O=T=v[2],P=C=v[3],L=R=v[4];for(var c=0,D;80>c;c+=1)D=0|w+e[d+x[c]],D+=16>c?n(N,T,C)+b[0]:32>c?a(N,T,C)+b[1]:48>c?r(N,T,C)+b[2]:64>c?o(N,T,C)+b[3]:s(N,T,C)+b[4],D|=0,D=l(D,E[c]),D=0|D+R,w=R,R=C,C=l(T,10),T=N,N=D,D=0|A+e[d+k[c]],D+=16>c?s(I,O,P)+_[0]:32>c?o(I,O,P)+_[1]:48>c?r(I,O,P)+_[2]:64>c?a(I,O,P)+_[3]:n(I,O,P)+_[4],D|=0,D=l(D,S[c]),D=0|D+L,A=L,L=P,P=l(O,10),O=I,I=D;D=0|v[1]+T+P,v[1]=0|v[2]+C+L,v[2]=0|v[3]+R+A,v[3]=0|v[4]+w+I,v[4]=0|v[0]+N+O,v[0]=D},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32,t[(a+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,o=r.words,s=0,i;5>s;s++)i=o[s],o[s]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return r},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});t.RIPEMD160=c._createHelper(v),t.HmacRIPEMD160=c._createHmacHelper(v)}(Math),e.RIPEMD160})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(108),n(109))})(this,function(e){return function(){var t=e,n=t.lib,a=n.Base,r=n.WordArray,o=t.algo,i=o.SHA1,s=o.HMAC,l=o.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=s.create(n.hasher,e),o=r.create(),l=r.create([1]),d=o.words,c=l.words,p=n.keySize,u=n.iterations,g;d.length<p;){g=a.update(t).finalize(l),a.reset();for(var h=g.words,f=h.length,m=g,y=1;y<u;y++){m=a.finalize(m),a.reset();for(var i=m.words,v=0;v<f;v++)h[v]^=i[v]}o.concat(g),c[0]++}return o.sigBytes=4*p,o}});t.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)}}(),e.PBKDF2})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.mode.CFB=function(){function t(e,t,n,a){var r=this._iv;if(r){var o=r.slice(0);this._iv=void 0}else var o=this._prevBlock;a.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var a=this._cipher,r=a.blockSize;t.call(this,e,n,r,a),this._prevBlock=e.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(e,n){var a=this._cipher,r=a.blockSize,o=e.slice(n,n+r);t.call(this,e,n,r,a),this._prevBlock=o}}),n}(),e.mode.CFB})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[a-1]=0|o[a-1]+1;for(var l=0;l<a;l++)e[t+l]^=s[l]}});return t.Decryptor=n,t}(),e.mode.CTR})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.mode.CTRGladman=function(){function t(e){if(255==(255&e>>24)){var t=255&e>>16,n=255&e>>8,a=255&e;255==t?(t=0,255==n?(n=0,255==a?a=0:++a):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=a}else e+=16777216;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var a=e.lib.BlockCipherMode.extend(),r=a.Encryptor=a.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),n(s);var l=s.slice(0);a.encryptBlock(l,0);for(var d=0;d<r;d++)e[t+d]^=l[d]}});return a.Decryptor=r,a}(),e.mode.CTRGladman})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<a;s++)e[t+s]^=o[s]}});return t.Decryptor=n,t}(),e.mode.OFB})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,a=4*t,r=a-n%a,o=n+r-1;e.clamp(),e.words[o>>>2]|=r<<24-8*(o%4),e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.pad.Iso10126={pad:function(t,n){var a=4*n,r=a-t.sigBytes%a;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(255&t[n>>>2]>>>24-8*(n%4));)n--;e.sigBytes=n+1}},e.pad.ZeroPadding})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(12))})(this,function(e){return function(){var t=e,n=t.lib,a=n.CipherParams,r=t.enc,o=r.Hex,i=t.format,s=i.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return a.create({ciphertext:t})}}}(),e.format.Hex})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(55),n(56),n(49),n(12))})(this,function(e){return function(){var t=e,n=t.lib,a=n.BlockCipher,r=t.algo,o=[],i=[],s=[],l=[],c=[],p=[],u=[],g=[],h=[],f=[];(function(){for(var e=[],n=0;256>n;n++)e[n]=128>n?n<<1:283^n<<1;for(var a=0,r=0,n=0,d;256>n;n++){d=r^r<<1^r<<2^r<<3^r<<4,d=99^(d>>>8^255&d),o[a]=d,i[d]=a;var m=e[a],y=e[m],v=e[y],b=257*e[d]^16843008*d;s[a]=b<<24|b>>>8,l[a]=b<<16|b>>>16,c[a]=b<<8|b>>>24,p[a]=b;var b=16843009*v^65537*y^257*m^16843008*a;u[d]=b<<24|b>>>8,g[d]=b<<16|b>>>16,h[d]=b<<8|b>>>24,f[d]=b,a?(a=m^e[e[e[v^m]]],r^=e[e[r]]):a=r=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=a.extend({_doReset:function(){if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var e=this._keyPriorReset=this._key,n=e.words,a=e.sigBytes/4,r=this._nRounds=a+6,i=4*(r+1),s=this._keySchedule=[],l=0;l<i;l++)if(l<a)s[l]=n[l];else{var c=s[l-1];l%a?6<a&&4==l%a&&(c=o[c>>>24]<<24|o[255&c>>>16]<<16|o[255&c>>>8]<<8|o[255&c]):(c=c<<8|c>>>24,c=o[c>>>24]<<24|o[255&c>>>16]<<16|o[255&c>>>8]<<8|o[255&c],c^=d[0|l/a]<<24),s[l]=s[l-a]^c}for(var t=this._invKeySchedule=[],p=0,l;p<i;p++){if(l=i-p,p%4)var c=s[l];else var c=s[l-4];t[p]=4>p||4>=l?c:u[o[c>>>24]]^g[o[255&c>>>16]]^h[o[255&c>>>8]]^f[o[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,l,c,p,o)},decryptBlock:function(e,n){var a=e[n+1];e[n+1]=e[n+3],e[n+3]=a,this._doCryptBlock(e,n,this._invKeySchedule,u,g,h,f,i);var a=e[n+1];e[n+1]=e[n+3],e[n+3]=a},_doCryptBlock:function(e,t,n,a,r,o,i,s){for(var l=this._nRounds,d=e[t]^n[0],c=e[t+1]^n[1],p=e[t+2]^n[2],u=e[t+3]^n[3],g=4,h=1;h<l;h++){var f=a[d>>>24]^r[255&c>>>16]^o[255&p>>>8]^i[255&u]^n[g++],m=a[c>>>24]^r[255&p>>>16]^o[255&u>>>8]^i[255&d]^n[g++],y=a[p>>>24]^r[255&u>>>16]^o[255&d>>>8]^i[255&c]^n[g++],v=a[u>>>24]^r[255&d>>>16]^o[255&c>>>8]^i[255&p]^n[g++];d=f,c=m,p=y,u=v}var f=(s[d>>>24]<<24|s[255&c>>>16]<<16|s[255&p>>>8]<<8|s[255&u])^n[g++],m=(s[c>>>24]<<24|s[255&p>>>16]<<16|s[255&u>>>8]<<8|s[255&d])^n[g++],y=(s[p>>>24]<<24|s[255&u>>>16]<<16|s[255&d>>>8]<<8|s[255&c])^n[g++],v=(s[u>>>24]<<24|s[255&d>>>16]<<16|s[255&c>>>8]<<8|s[255&p])^n[g++];e[t]=f,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});t.AES=a._createHelper(m)}(),e.AES})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(55),n(56),n(49),n(12))})(this,function(e){return function(){function n(e,n){var a=(this._lBlock>>>e^this._rBlock)&n;this._rBlock^=a,this._lBlock^=a<<e}function a(e,n){var a=(this._rBlock>>>e^this._lBlock)&n;this._lBlock^=a,this._rBlock^=a<<e}var t=e,r=t.lib,o=r.WordArray,i=r.BlockCipher,s=t.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],d=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,1:32768,134217728:0,134217729:8421890,268435456:32768,268435457:2,402653184:8421890,402653185:8421376,536870912:8421378,536870913:8421888,671088640:33282,671088641:8388608,805306368:2,805306369:8388608,939524096:32768,939524097:512,1073741824:512,1073741825:8421378,1207959552:8421888,1207959553:32768,1342177280:8421890,1342177281:33280,1476395008:512,1476395009:8388610,1610612736:8389122,1610612737:512,1744830464:8421378,1744830465:2,1879048192:8388608,1879048193:8389122,2013265920:2,2013265921:33282,2147483648:514,2147483649:8421890,2281701376:8389120,2281701377:32770,2415919104:8389120,2415919105:8421376,2550136832:33280,2550136833:8389122,2684354560:33280,2684354561:8388610,2818572288:8421376,2818572289:514,2952790016:8421376,2952790017:33282,3087007744:8389122,3087007745:8421888,3221225472:32770,3221225473:514,3355443200:8388610,3355443201:8389120,3489660928:8388610,3489660929:8389120,3623878656:32770,3623878657:0,3758096384:0,3758096385:32770,3892314112:514,3892314113:33280,4026531840:33282,4026531841:0,4160749568:8388608,4160749569:8421378},{0:1074282512,8388608:1073758208,16777216:16384,25165824:540688,33554432:524288,41943040:16,50331648:1074266128,58720256:1073758224,67108864:1073741840,75497472:1074282512,83886080:1074282496,92274688:1073741824,100663296:1073758208,109051904:524288,117440512:16,125829120:1074266128,134217728:540672,142606336:524304,150994944:1073758224,159383552:0,167772160:1073741824,176160768:16384,184549376:540688,192937984:1074266112,201326592:524304,209715200:1073741840,218103808:0,226492416:540672,234881024:16400,243269632:1074282496,251658240:1074266112,260046848:16400,268435456:0,276824064:540688,285212672:1074266128,293601280:524288,301989888:1073758224,310378496:1074266112,318767104:1074282496,327155712:16384,335544320:1074266112,343932928:1073758208,352321536:16,360710144:1074282512,369098752:540688,377487360:16,385875968:16384,394264576:1073741824,402653184:16400,411041792:1074282496,419430400:524288,427819008:1073741840,436207616:524304,444596224:1073758224,452984832:1073741840,461373440:524304,469762048:540672,478150656:0,486539264:1073758208,494927872:16400,503316480:1073741824,511705088:1074266128,520093696:1074282512,528482304:540672},{0:260,524288:67174656,1048576:0,1572864:67174404,2097152:67109120,2621440:0,3145728:65796,3670016:67109120,4194304:65540,4718592:67108868,5242880:67108868,5767168:65536,6291456:67174660,6815744:65540,7340032:67174400,7864320:260,8388608:67108864,8912896:4,9437184:67174656,9961472:256,10485760:65792,11010048:67174400,11534336:67174404,12058624:65796,12582912:67109124,13107200:65792,13631488:65536,14155776:67109124,14680064:4,15204352:67174660,15728640:256,16252928:67108864,16777216:67174656,17301504:67108864,17825792:65540,18350080:260,18874368:65536,19398656:67174656,19922944:67109120,20447232:0,20971520:256,21495808:65540,22020096:67174660,22544384:67109120,23068672:67108868,23592960:256,24117248:0,24641536:67174404,25165824:67109124,25690112:65536,26214400:67108864,26738688:67174660,27262976:4,27787264:65796,28311552:65792,28835840:67108868,29360128:67174400,29884416:67109124,30408704:260,30932992:67174400,31457280:65796,31981568:4,32505856:67174404,33030144:65792},{0:2151682048,32768:2147487808,65536:2147487808,98304:64,131072:4198464,163840:2151678016,196608:2151677952,229376:2147487744,262144:0,294912:4198400,327680:4198400,360448:2151682112,393216:2147483712,425984:0,458752:4194368,491520:2151677952,524288:2147483648,557056:4096,589824:4194304,622592:2151682048,655360:64,688128:4194304,720896:2147487744,753664:4160,786432:2151678016,819200:2147483648,851968:4160,884736:4194368,917504:4096,950272:4198464,983040:2151682112,1015808:2147483712,1048576:4194368,1081344:2151677952,1114112:4198400,1146880:2151682112,1179648:2147483712,1212416:0,1245184:0,1277952:4198400,1310720:4160,1343488:4194368,1376256:2151678016,1409024:2147483648,1441792:2151682048,1474560:2147487808,1507328:2147487808,1540096:64,1572864:2151682112,1605632:2147483712,1638400:2147483648,1671168:4096,1703936:2151677952,1736704:2147487744,1769472:4198464,1802240:2151678016,1835008:2147487744,1867776:4160,1900544:4194304,1933312:2151682048,1966080:64,1998848:4194304,2031616:4096,2064384:4198464},{0:128,2048:17039488,4096:17039360,6144:553648256,8192:262144,10240:128,12288:536870912,14336:17039360,16384:537133184,18432:262144,20480:16777344,22528:537133184,24576:553648256,26624:553910272,28672:262272,30720:536870912,32768:16777216,34816:537133056,36864:537133056,38912:0,40960:536871040,43008:553910400,45056:553910400,47104:16777344,49152:553910272,51200:536871040,53248:0,55296:553648128,57344:17039488,59392:16777216,61440:553648128,63488:262272,65536:262144,67584:553648256,69632:128,71680:16777216,73728:536870912,75776:17039360,77824:553648256,79872:537133184,81920:16777344,83968:536870912,86016:553910272,88064:17039488,90112:537133184,92160:128,94208:16777216,96256:553910272,98304:553910400,100352:262272,102400:553648128,104448:553910400,106496:17039360,108544:0,110592:537133056,112640:553648128,114688:262272,116736:16777344,118784:536871040,120832:262144,122880:0,124928:537133056,126976:17039488,129024:536871040},{0:268435464,128:270532608,256:8192,384:270540808,512:270532608,640:8,768:270540808,896:2097152,1024:268443648,1152:2105352,1280:2097152,1408:268435464,1536:2097160,1664:268443648,1792:268435456,1920:8200,2048:0,2176:2097160,2304:268443656,2432:8192,2560:2105344,2688:268443656,2816:8,2944:270532616,3072:270532616,3200:0,3328:2105352,3456:270540800,3584:8200,3712:2105344,3840:270540800,3968:268435456,4096:268443648,4224:8,4352:270532616,4480:2105344,4608:270540808,4736:2097152,4864:8200,4992:268435464,5120:2097152,5248:268443648,5376:268435456,5504:8200,5632:268435464,5760:270540808,5888:2105344,6016:270532608,6144:2105352,6272:270540800,6400:0,6528:270532616,6656:8,6784:8192,6912:270532608,7040:2105352,7168:8192,7296:2097160,7424:268443656,7552:0,7680:270540800,7808:268435456,7936:2097160,8064:268443656},{0:1048576,8:34603009,16:33555457,24:0,32:1024,40:33555457,48:1049601,56:34604032,64:34604033,72:1048576,80:0,88:33554433,96:1,104:33554432,112:34603009,120:1025,128:33555456,136:1049601,144:1048577,152:33555456,160:33554433,168:34603008,176:34604032,184:1048577,192:34603008,200:1024,208:1025,216:34604033,224:1049600,232:1,240:33554432,248:1049600,256:33554432,264:1049600,272:1048576,280:33555457,288:33555457,296:34603009,304:34603009,312:1,320:1048577,328:33554432,336:33555456,344:1048576,352:34604032,360:1025,368:1049601,376:34604032,384:1025,392:33554433,400:34604033,408:34603008,416:1049600,424:0,432:1,440:34604033,448:0,456:1049601,464:34603008,472:1024,480:33554433,488:33555456,496:1024,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=s.DES=i.extend({_doReset:function(){for(var e=this._key,t=e.words,n=[],a=0,r;56>a;a++)r=l[a]-1,n[a]=1&t[r>>>5]>>>31-r%32;for(var o=this._subKeys=[],i=0;16>i;i++){for(var s=o[i]=[],p=c[i],a=0;24>a;a++)s[0|a/6]|=n[(d[a]-1+p)%28]<<31-a%6,s[4+(0|a/6)]|=n[28+(d[a+24]-1+p)%28]<<31-a%6;s[0]=s[0]<<1|s[0]>>>31;for(var a=1;7>a;a++)s[a]>>>=4*(a-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var u=this._invSubKeys=[],a=0;16>a;a++)u[a]=o[15-a]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,r,o){this._lBlock=e[r],this._rBlock=e[r+1],n.call(this,4,252645135),n.call(this,16,65535),a.call(this,2,858993459),a.call(this,8,16711935),n.call(this,1,1431655765);for(var s=0;16>s;s++){for(var l=o[s],d=this._lBlock,c=this._rBlock,g=0,h=0;8>h;h++)g|=p[h][((c^l[h])&u[h])>>>0];this._lBlock=c,this._rBlock=d^g}var i=this._lBlock;this._lBlock=this._rBlock,this._rBlock=i,n.call(this,1,1431655765),a.call(this,8,16711935),a.call(this,2,858993459),n.call(this,16,65535),n.call(this,4,252645135),e[r]=this._lBlock,e[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});t.DES=i._createHelper(g);var h=s.TripleDES=i.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=g.createEncryptor(o.create(t.slice(0,2))),this._des2=g.createEncryptor(o.create(t.slice(2,4))),this._des3=g.createEncryptor(o.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(h)}(),e.TripleDES})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(55),n(56),n(49),n(12))})(this,function(e){return function(){function t(){for(var e=this._S,a=this._i,r=this._j,o=0,i=0;4>i;i++){a=(a+1)%256,r=(r+e[a])%256;var n=e[a];e[a]=e[r],e[r]=n,o|=e[(e[a]+e[r])%256]<<24-8*i}return this._i=a,this._j=r,o}var n=e,a=n.lib,r=a.StreamCipher,o=n.algo,s=o.RC4=r.extend({_doReset:function(){for(var e=this._key,n=e.words,a=e.sigBytes,r=this._S=[],o=0;256>o;o++)r[o]=o;for(var o=0,i=0;256>o;o++){var s=o%a,l=255&n[s>>>2]>>>24-8*(s%4);i=(i+r[o]+l)%256;var d=r[o];r[o]=r[i],r[i]=d}this._i=this._j=0},_doProcessBlock:function(e,n){e[n]^=t.call(this)},keySize:8,ivSize:0});n.RC4=r._createHelper(s);var i=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)t.call(this)}});n.RC4Drop=r._createHelper(i)}(),e.RC4})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(55),n(56),n(49),n(12))})(this,function(e){return function(){function t(){for(var e=this._X,t=this._C,n=0;8>n;n++)l[n]=t[n];t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0),this._b=t[7]>>>0<l[7]>>>0?1:0;for(var n=0;8>n;n++){var a=e[n]+t[n],r=65535&a,o=a>>>16;d[n]=((r*r>>>17)+r*o>>>15)+o*o^(0|(4294901760&a)*a)+(0|(65535&a)*a)}e[0]=0|d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16),e[1]=0|d[1]+(d[0]<<8|d[0]>>>24)+d[7],e[2]=0|d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16),e[3]=0|d[3]+(d[2]<<8|d[2]>>>24)+d[1],e[4]=0|d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16),e[5]=0|d[5]+(d[4]<<8|d[4]>>>24)+d[3],e[6]=0|d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16),e[7]=0|d[7]+(d[6]<<8|d[6]>>>24)+d[5]}var n=e,a=n.lib,r=a.StreamCipher,o=n.algo,s=[],l=[],d=[],i=o.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,n=this.cfg.iv,a=0;4>a;a++)e[a]=16711935&(e[a]<<8|e[a]>>>24)|4278255360&(e[a]<<24|e[a]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;4>a;a++)t.call(this);for(var a=0;8>a;a++)o[a]^=r[7&a+4];if(n){var i=n.words,s=i[0],l=i[1],d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),p=d>>>16|4294901760&c,u=c<<16|65535&d;o[0]^=d,o[1]^=p,o[2]^=c,o[3]^=u,o[4]^=d,o[5]^=p,o[6]^=c,o[7]^=u;for(var a=0;4>a;a++)t.call(this)}},_doProcessBlock:function(e,n){var a=this._X;t.call(this),s[0]=a[0]^a[5]>>>16^a[3]<<16,s[1]=a[2]^a[7]>>>16^a[5]<<16,s[2]=a[4]^a[1]>>>16^a[7]<<16,s[3]=a[6]^a[3]>>>16^a[1]<<16;for(var r=0;4>r;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),e[n+r]^=s[r]},blockSize:4,ivSize:2});n.Rabbit=r._createHelper(i)}(),e.Rabbit})},function(e,t,n){(function(a,r){e.exports=t=r(n(3),n(55),n(56),n(49),n(12))})(this,function(e){return function(){function t(){for(var e=this._X,t=this._C,n=0;8>n;n++)l[n]=t[n];t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0),this._b=t[7]>>>0<l[7]>>>0?1:0;for(var n=0;8>n;n++){var a=e[n]+t[n],r=65535&a,o=a>>>16;d[n]=((r*r>>>17)+r*o>>>15)+o*o^(0|(4294901760&a)*a)+(0|(65535&a)*a)}e[0]=0|d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16),e[1]=0|d[1]+(d[0]<<8|d[0]>>>24)+d[7],e[2]=0|d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16),e[3]=0|d[3]+(d[2]<<8|d[2]>>>24)+d[1],e[4]=0|d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16),e[5]=0|d[5]+(d[4]<<8|d[4]>>>24)+d[3],e[6]=0|d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16),e[7]=0|d[7]+(d[6]<<8|d[6]>>>24)+d[5]}var n=e,a=n.lib,r=a.StreamCipher,o=n.algo,s=[],l=[],d=[],i=o.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,n=this.cfg.iv,a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;4>o;o++)t.call(this);for(var o=0;8>o;o++)r[o]^=a[7&o+4];if(n){var i=n.words,s=i[0],l=i[1],d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),p=d>>>16|4294901760&c,u=c<<16|65535&d;r[0]^=d,r[1]^=p,r[2]^=c,r[3]^=u,r[4]^=d,r[5]^=p,r[6]^=c,r[7]^=u;for(var o=0;4>o;o++)t.call(this)}},_doProcessBlock:function(e,n){var a=this._X;t.call(this),s[0]=a[0]^a[5]>>>16^a[3]<<16,s[1]=a[2]^a[7]>>>16^a[5]<<16,s[2]=a[4]^a[1]>>>16^a[7]<<16,s[3]=a[6]^a[3]>>>16^a[1]<<16;for(var r=0;4>r;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),e[n+r]^=s[r]},blockSize:4,ivSize:2});n.RabbitLegacy=r._createHelper(i)}(),e.RabbitLegacy})},function(e,t,n){function a(e){this.options=e||{locator:{}}}function r(e,t,n){function a(t){var a=e[t];!a&&s&&(a=2==e.length?function(n){e(t,n)}:e),r[t]=a&&function(e){a('[xmldom '+t+']\t'+e+i(n))}||function(){}}if(!e){if(t instanceof o)return t;e=t}var r={},s=e instanceof Function;return n=n||{},a('warning'),a('error'),a('fatalError'),r}function o(){this.cdata=!1}function s(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function i(e){if(e)return'\n@'+(e.systemId||'')+'#[line:'+e.lineNumber+',col:'+e.columnNumber+']'}function l(e,t,n){return'string'==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+'':e}function d(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}a.prototype.parseFromString=function(e,t){var n=this.options,a=new c,i=n.domBuilder||new o,s=n.errorHandler,l=n.locator,d=n.xmlns||{},p={lt:'<',gt:'>',amp:'&',quot:'"',apos:'\''};return l&&i.setDocumentLocator(l),a.errorHandler=r(s,i,l),a.domBuilder=n.domBuilder||i,/\/x?html?$/.test(t)&&(p.nbsp='\xA0',p.copy='\xA9',d['']='http://www.w3.org/1999/xhtml'),d.xml=d.xml||'http://www.w3.org/XML/1998/namespace',e?a.parse(e,d,p):a.errorHandler.error('invalid doc source'),i.doc},o.prototype={startDocument:function(){this.doc=new p().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,a){var r=this.doc,o=r.createElementNS(e,n||t),l=a.length;d(this,o),this.currentElement=o,this.locator&&s(this.locator,o);for(var c=0;c<l;c++){var e=a.getURI(c),i=a.getValue(c),n=a.getQName(c),p=r.createAttributeNS(e,n);this.locator&&s(a.getLocator(c),p),p.value=p.nodeValue=i,o.setAttributeNode(p)}},endElement:function(){var e=this.currentElement,t=e.tagName;this.currentElement=e.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&s(this.locator,n),d(this,n)},ignorableWhitespace:function(){},characters:function(e){if(e=l.apply(this,arguments),e){if(this.cdata)var t=this.doc.createCDATASection(e);else var t=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(e)&&this.doc.appendChild(t),this.locator&&s(this.locator,t)}},skippedEntity:function(){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e){e=l.apply(this,arguments);var t=this.doc.createComment(e);this.locator&&s(this.locator,t),d(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var a=this.doc.implementation;if(a&&a.createDocumentType){var r=a.createDocumentType(e,t,n);this.locator&&s(this.locator,r),d(this,r)}},warning:function(e){console.warn('[xmldom warning]\t'+e,i(this.locator))},error:function(e){console.error('[xmldom error]\t'+e,i(this.locator))},fatalError:function(e){throw console.error('[xmldom fatalError]\t'+e,i(this.locator)),e}},'endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl'.replace(/\w+/g,function(e){o.prototype[e]=function(){return null}});var c=n(415).XMLReader,p=t.DOMImplementation=n(154).DOMImplementation;t.XMLSerializer=n(154).XMLSerializer,t.DOMParser=a},function(e,t){function n(){}function a(e,t,n,c,h){function y(e){if(65535<e){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return m(t,n)}return m(e)}function v(e){var t=e.slice(1,-1);return t in n?n[t]:'#'===t.charAt(0)?y(parseInt(t.substr(1).replace('x','0x'))):(h.error('entity not found:'+e),e)}function b(t){if(t>T){var n=e.substring(T,t).replace(/&#?\w+;/g,v);S&&_(T),c.characters(n,0,t-T),T=t}}function _(t,n){for(;t>=k&&(n=E.exec(e));)x=n.index,k=x+n[0].length,S.lineNumber++;S.columnNumber=t-x+1}for(var x=0,k=0,E=/.*(?:\r\n?|\n)|.*$/g,S=c.locator,w=[{currentNSMap:t}],N={},T=0;;){try{var C=e.indexOf('<',T);if(0>C){if(!e.substr(T).match(/^\s*$/)){var R=c.doc,A=R.createTextNode(e.substr(T));R.appendChild(A),c.currentElement=A}return}switch(C>T&&b(C),e.charAt(C+1)){case'/':var I=e.indexOf('>',C+3),O=e.substring(C+2,I),P=w.pop();0>I?(O=e.substring(C+2).replace(/[\s<].*/,''),h.error('end tag name: '+O+' is not complete:'+P.tagName),I=C+1+O.length):O.match(/\s</)&&(O=O.replace(/[\s<].*/,''),h.error('end tag name: '+O+' maybe not complete'),I=C+1+O.length);var L=P.localNSMap,D=P.tagName==O,B=D||P.tagName&&P.tagName.toLowerCase()==O.toLowerCase();if(B){if(c.endElement(P.uri,P.localName,O),L)for(var M in L)c.endPrefixMapping(M);D||h.fatalError('end tag name: '+O+' is not match the current start tagName:'+P.tagName)}else w.push(P);I++;break;case'?':S&&_(C),I=u(e,C,c);break;case'!':S&&_(C),I=p(e,C,c,h);break;default:S&&_(C);var z=new g,F=w[w.length-1].currentNSMap,I=o(e,C,z,F,v,h),j=z.length;if(!z.closed&&d(e,I,z.tagName,N)&&(z.closed=!0,!n.nbsp&&h.warning('unclosed xml attribute')),S&&j){for(var U=r(S,{}),H=0,i;H<j;H++)i=z[H],_(i.offset),i.locator=r(S,{});c.locator=U,s(z,c,F)&&w.push(z),c.locator=S}else s(z,c,F)&&w.push(z);'http://www.w3.org/1999/xhtml'!==z.uri||z.closed?I++:I=l(e,I,z.tagName,v,c);}}catch(t){h.error('element parse error: '+t),I=-1}I>T?T=I:b(f(C,T)+1)}}function r(e,n){return n.lineNumber=e.lineNumber,n.columnNumber=e.columnNumber,n}function o(e,t,n,a,r,o){for(var i=++t,l=_,s,d;;){var p=e.charAt(i);switch(p){case'=':if(l==x)s=e.slice(t,i),l=E;else if(l==k)l=E;else throw new Error('attribute equal must after attrName');break;case'\'':case'"':if(l==E||l==x){if(l==x&&(o.warning('attribute value must after "="'),s=e.slice(t,i)),t=i+1,i=e.indexOf(p,t),0<i)d=e.slice(t,i).replace(/&#?\w+;/g,r),n.add(s,d,t-1),l=w;else throw new Error('attribute value no end \''+p+'\' match');}else if(l==S)d=e.slice(t,i).replace(/&#?\w+;/g,r),n.add(s,d,t),o.warning('attribute "'+s+'" missed start quot('+p+')!!'),t=i+1,l=w;else throw new Error('attribute value must after "="');break;case'/':switch(l){case _:n.setTagName(e.slice(t,i));case w:case N:case T:l=T,n.closed=!0;case S:case x:case k:break;default:throw new Error('attribute invalid close char(\'/\')');}break;case'':return o.error('unexpected end of input'),l==_&&n.setTagName(e.slice(t,i)),i;case'>':switch(l){case _:n.setTagName(e.slice(t,i));case w:case N:case T:break;case S:case x:d=e.slice(t,i),'/'===d.slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case k:l==k&&(d=s),l==S?(o.warning('attribute "'+d+'" missed quot(")!!'),n.add(s,d.replace(/&#?\w+;/g,r),t)):(('http://www.w3.org/1999/xhtml'!==a['']||!d.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),n.add(d,d,t));break;case E:throw new Error('attribute value missed!!');}return i;case'\x80':p=' ';default:if(' '>=p)switch(l){case _:n.setTagName(e.slice(t,i)),l=N;break;case x:s=e.slice(t,i),l=k;break;case S:var d=e.slice(t,i).replace(/&#?\w+;/g,r);o.warning('attribute "'+d+'" missed quot(")!!'),n.add(s,d,t);case w:l=N;}else switch(l){case k:n.tagName;'http://www.w3.org/1999/xhtml'===a['']&&s.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),n.add(s,s,t),t=i,l=x;break;case w:o.warning('attribute space is required"'+s+'"!!');case N:l=x,t=i;break;case E:l=S,t=i;break;case T:throw new Error('elements closed character \'/\' and \'>\' must be connected to');}}i++}}function s(e,t,n){for(var r=e.tagName,o=null,s=e.length;s--;){var i=e[s],a=i.qName,l=i.value,d=a.indexOf(':');if(0<d)var p=i.prefix=a.slice(0,d),u=a.slice(d+1),g='xmlns'===p&&u;else u=a,p=null,g='xmlns'===a&&'';i.localName=u,!1!==g&&(null==o&&(o={},c(n,n={})),n[g]=o[g]=l,i.uri='http://www.w3.org/2000/xmlns/',t.startPrefixMapping(g,l))}for(var s=e.length;s--;){i=e[s];var p=i.prefix;p&&('xml'===p&&(i.uri='http://www.w3.org/XML/1998/namespace'),'xmlns'!==p&&(i.uri=n[p||'']))}var d=r.indexOf(':');0<d?(p=e.prefix=r.slice(0,d),u=e.localName=r.slice(d+1)):(p=null,u=e.localName=r);var h=e.uri=n[p||''];if(t.startElement(h,u,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(h,u,r),o)for(p in o)t.endPrefixMapping(p)}function l(e,t,n,a,r){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf('</'+n+'>',t),i=e.substring(t+1,o);if(/[&<]/.test(i))return /^script$/i.test(n)?(r.characters(i,0,i.length),o):(i=i.replace(/&#?\w+;/g,a),r.characters(i,0,i.length),o)}return t+1}function d(e,t,n,a){var r=a[n];return null==r&&(r=e.lastIndexOf('</'+n+'>'),r<t&&(r=e.lastIndexOf('</'+n)),a[n]=r),r<t}function c(e,t){for(var a in e)t[a]=e[a]}function p(e,t,n,a){var r=e.charAt(t+2);switch(r){case'-':if('-'===e.charAt(t+3)){var o=e.indexOf('-->',t+4);return o>t?(n.comment(e,t+4,o-t-4),o+3):(a.error('Unclosed comment'),-1)}return-1;default:if('CDATA['==e.substr(t+3,6)){var o=e.indexOf(']]>',t+9);return n.startCDATA(),n.characters(e,t+9,o-t-9),n.endCDATA(),o+3}var i=h(e,t),s=i.length;if(1<s&&/!doctype/i.test(i[0][0])){var l=i[1][0],d=3<s&&/^public$/i.test(i[2][0])&&i[3][0],c=4<s&&i[4][0],p=i[s-1];return n.startDTD(l,d&&d.replace(/^(['"])(.*?)\1$/,'$2'),c&&c.replace(/^(['"])(.*?)\1$/,'$2')),n.endDTD(),p.index+p[0].length}}return-1}function u(e,t,n){var a=e.indexOf('?>',t);if(a){var r=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),a+2}return-1}return-1}function g(){}function i(e,t){return e.__proto__=t,e}function h(e,t){var n=[],a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g,r;for(a.lastIndex=t,a.exec(e);r=a.exec(e);)if(n.push(r),r[1])return n}var y=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=new RegExp('[\\-\\.0-9'+y.source.slice(1,-1)+'\\u00B7\\u0300-\\u036F\\u203F-\\u2040]'),b=new RegExp('^'+y.source+v.source+'*(?::'+y.source+v.source+'*)?$'),_=0,x=1,k=2,E=3,S=4,w=5,N=6,T=7;n.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),c(t,t={}),a(e,t,n,r,this.errorHandler),r.endDocument()}},g.prototype={setTagName:function(e){if(!b.test(e))throw new Error('invalid tagName:'+e);this.tagName=e},add:function(e,t,n){if(!b.test(e))throw new Error('invalid attribute:'+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},i({},i.prototype)instanceof i||(i=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=n},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(7),s=n(110),l=a(s),d=n(25),c=a(d),p=n(26),u=n(32),g=a(u),h=function(){function e(t,n,a){r(this,e),this.spine=t,this.request=n,this.pause=a||100,this.q=new l.default(this),this.epubcfi=new c.default,this._locations=[],this.total=0,this.break=150,this._current=0,this.currentLocation='',this._currentCfi='',this.processingTimeout=void 0}return o(e,[{key:'generate',value:function(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(e){e.linear&&this.q.enqueue(this.process.bind(this),e)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}},{key:'createRange',value:function(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}},{key:'process',value:function(e){return e.load(this.request).then(function(t){var n=new i.defer,a=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(a),e.unload(),this.processingTimeout=setTimeout(function(){return n.resolve(a)},this.pause),n.promise}.bind(this))}},{key:'parse',value:function(e,t,n){var a=[],r=e.ownerDocument,o=(0,i.qs)(r,'body'),s=0,l=n||this.break,d,p;if((0,i.sprint)(o,function(e){var n=e.length,r=0,o;if(0===e.textContent.trim().length)return!1;for(0==s&&(d=this.createRange(),d.startContainer=e,d.startOffset=0),o=l-s,o>n&&(s+=n,r=n);r<n;)if(o=l-s,0===s&&(r+=1,d=this.createRange(),d.startContainer=e,d.startOffset=r),r+o>=n)s+=n-r,r=n;else{r+=o,d.endContainer=e,d.endOffset=r;var i=new c.default(d,t).toString();a.push(i),s=0}p=e}.bind(this)),d&&d.startContainer&&p){d.endContainer=p,d.endOffset=p.length;var u=new c.default(d,t).toString();a.push(u),s=0}return a}},{key:'locationFromCfi',value:function(e){var t;return(c.default.prototype.isCfiString(e)&&(e=new c.default(e)),0===this._locations.length)?-1:(t=(0,i.locationOf)(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}},{key:'percentageFromCfi',value:function(e){if(0===this._locations.length)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}},{key:'percentageFromLocation',value:function(e){return e&&this.total?e/this.total:0}},{key:'cfiFromLocation',value:function(e){var t=-1;return'number'!=typeof e&&(e=parseInt(e)),0<=e&&e<this._locations.length&&(t=this._locations[e]),t}},{key:'cfiFromPercentage',value:function(e){var t;if(1<e&&console.warn('Normalize cfiFromPercentage value to between 0 - 1'),1<=e){var n=new c.default(this._locations[this.total]);return n.collapse(),n.toString()}return t=y(this.total*e),this.cfiFromLocation(t)}},{key:'load',value:function(e){return this._locations='string'==typeof e?JSON.parse(e):e,this.total=this._locations.length-1,this._locations}},{key:'save',value:function(){return JSON.stringify(this._locations)}},{key:'getCurrent',value:function(){return this._current}},{key:'setCurrent',value:function(e){var t;if('string'==typeof e)this._currentCfi=e;else if('number'==typeof e)this._current=e;else return;0===this._locations.length||('string'==typeof e?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(p.EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}},{key:'length',value:function(){return this._locations.length}},{key:'destroy',value:function(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}},{key:'currentLocation',get:function(){return this._current},set:function(e){this.setCurrent(e)}}]),e}();(0,g.default)(h.prototype),t.default=h,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(76),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(7),l=function(){function e(t){a(this,e),this.packagePath='',this.directory='',this.encoding='',t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t;if(!e)throw new Error('Container File Not Found');if(t=(0,s.qs)(e,'rootfile'),!t)throw new Error('No RootFile Found');this.packagePath=t.getAttribute('full-path'),this.directory=i.default.dirname(this.packagePath),this.encoding=e.xmlEncoding}},{key:'destroy',value:function(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(7),i=function(){function e(t){a(this,e),this.manifest={},this.navPath='',this.ncxPath='',this.coverPath='',this.spineNodeIndex=0,this.spine=[],this.metadata={},t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t,n,a;if(!e)throw new Error('Package File Not Found');if(t=(0,o.qs)(e,'metadata'),!t)throw new Error('No Metadata Found');if(n=(0,o.qs)(e,'manifest'),!n)throw new Error('No Manifest Found');if(a=(0,o.qs)(e,'spine'),!a)throw new Error('No Spine Found');return this.manifest=this.parseManifest(n),this.navPath=this.findNavPath(n),this.ncxPath=this.findNcxPath(n,a),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=(0,o.indexOfElementNode)(a),this.spine=this.parseSpine(a,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=a.getAttribute('page-progression-direction'),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}},{key:'parseMetadata',value:function(e){var t={title:this.getElementText(e,'title'),creator:this.getElementText(e,'creator'),description:this.getElementText(e,'description'),pubdate:this.getElementText(e,'date'),publisher:this.getElementText(e,'publisher'),identifier:this.getElementText(e,'identifier'),language:this.getElementText(e,'language'),rights:this.getElementText(e,'rights'),modified_date:this.getPropertyText(e,'dcterms:modified'),layout:this.getPropertyText(e,'rendition:layout'),orientation:this.getPropertyText(e,'rendition:orientation'),flow:this.getPropertyText(e,'rendition:flow'),viewport:this.getPropertyText(e,'rendition:viewport'),media_active_class:this.getPropertyText(e,'media:active-class')};return t}},{key:'parseManifest',value:function(e){var t={},n=(0,o.qsa)(e,'item'),a=Array.prototype.slice.call(n);return a.forEach(function(e){var n=e.getAttribute('id'),a=e.getAttribute('href')||'',r=e.getAttribute('media-type')||'',o=e.getAttribute('media-overlay')||'',i=e.getAttribute('properties')||'';t[n]={href:a,type:r,overlay:o,properties:i.length?i.split(' '):[]}}),t}},{key:'parseSpine',value:function(e){var t=[],n=(0,o.qsa)(e,'itemref'),a=Array.prototype.slice.call(n);return a.forEach(function(e,n){var a=e.getAttribute('idref'),r=e.getAttribute('properties')||'',o=r.length?r.split(' '):[],i={idref:a,linear:e.getAttribute('linear')||'yes',properties:o,index:n};t.push(i)}),t}},{key:'findUniqueIdentifier',value:function(e){var t=e.documentElement.getAttribute('unique-identifier');if(!t)return'';var n=e.getElementById(t);return n?'identifier'===n.localName&&'http://purl.org/dc/elements/1.1/'===n.namespaceURI?n.childNodes[0].nodeValue.trim():'':''}},{key:'findNavPath',value:function(e){var t=(0,o.qsp)(e,'item',{properties:'nav'});return!!t&&t.getAttribute('href')}},{key:'findNcxPath',value:function(e,t){var n=(0,o.qsp)(e,'item',{"media-type":'application/x-dtbncx+xml'}),a;return n||(a=t.getAttribute('toc'),a&&(n=e.querySelector('#'+a))),!!n&&n.getAttribute('href')}},{key:'findCoverPath',value:function(e){var t=(0,o.qs)(e,'package'),n=t.getAttribute('version');if('2.0'===n){var a=(0,o.qsp)(e,'meta',{name:'cover'});if(a){var r=a.getAttribute('content'),i=e.getElementById(r);return i?i.getAttribute('href'):''}return!1}var s=(0,o.qsp)(e,'item',{properties:'cover-image'});return s?s.getAttribute('href'):''}},{key:'getElementText',value:function(e,t){var n=e.getElementsByTagNameNS('http://purl.org/dc/elements/1.1/',t),a;return n&&0!==n.length?(a=n[0],a.childNodes.length?a.childNodes[0].nodeValue:''):''}},{key:'getPropertyText',value:function(e,t){var n=(0,o.qsp)(e,'meta',{property:t});return n&&n.childNodes.length?n.childNodes[0].nodeValue:''}},{key:'load',value:function(e){var t=this;this.metadata=e.metadata;var n=e.readingOrder||e.spine;return this.spine=n.map(function(e,t){return e.index=t,e.linear=e.linear||'yes',e}),e.resources.forEach(function(e,n){t.manifest[n]=e,e.rel&&'cover'===e.rel[0]&&(t.coverPath=e.href)}),this.spineNodeIndex=0,this.toc=e.toc.map(function(e){return e.label=e.title,e}),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}},{key:'destroy',value:function(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}]),e}();t.default=i,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(7),i=function(){function e(t){a(this,e),this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t=e.nodeType,n=void 0,a=void 0;t&&(n=(0,o.qs)(e,'html'),a=(0,o.qs)(e,'ncx')),t?n?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):a&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}},{key:'unpack',value:function(e){for(var t=0,n;t<e.length;t++)n=e[t],n.href&&(this.tocByHref[n.href]=t),n.id&&(this.tocById[n.id]=t),this.length++,n.subitems.length&&this.unpack(n.subitems)}},{key:'get',value:function(e){var t;return e?(0===e.indexOf('#')?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.toc[t]):this.toc}},{key:'landmark',value:function(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}},{key:'parseNav',value:function(e){var t=(0,o.querySelectorByType)(e,'nav','toc'),n=t?(0,o.qsa)(t,'li'):[],a=n.length,r={},s=[],l,i,d;if(!n||0===a)return s;for(l=0;l<a;++l)i=this.navItem(n[l]),i&&(r[i.id]=i,i.parent?(d=r[i.parent],d.subitems.push(i)):s.push(i));return s}},{key:'navItem',value:function(e){var t=e.getAttribute('id')||void 0,n=(0,o.filterChildren)(e,'a',!0);if(n){var a=n.getAttribute('href')||'';t||(t=a);var r=n.textContent||'',i=(0,o.getParentByTagName)(e,'li'),s=void 0;if(i&&(s=i.getAttribute('id'),!s)){var l=(0,o.filterChildren)(i,'a',!0);s=l&&l.getAttribute('href')}for(;!s&&i;)if(i=(0,o.getParentByTagName)(i,'li'),i&&(s=i.getAttribute('id'),!s)){var d=(0,o.filterChildren)(i,'a',!0);s=d&&d.getAttribute('href')}return{id:t,href:a,label:r,subitems:[],parent:s}}}},{key:'parseLandmarks',value:function(e){var t=(0,o.querySelectorByType)(e,'nav','landmarks'),n=t?(0,o.qsa)(t,'li'):[],a=n.length,r=[],s,i;if(!n||0===a)return r;for(s=0;s<a;++s)i=this.landmarkItem(n[s]),i&&(r.push(i),this.landmarksByType[i.type]=s);return r}},{key:'landmarkItem',value:function(e){var t=(0,o.filterChildren)(e,'a',!0);if(t){var n=t.getAttributeNS('http://www.idpf.org/2007/ops','type')||void 0,a=t.getAttribute('href')||'',r=t.textContent||'';return{href:a,label:r,type:n}}}},{key:'parseNcx',value:function(e){var t=(0,o.qsa)(e,'navPoint'),n=t.length,a={},r=[],s,i,l;if(!t||0===n)return r;for(s=0;s<n;++s)i=this.ncxItem(t[s]),a[i.id]=i,i.parent?(l=a[i.parent],l.subitems.push(i)):r.push(i);return r}},{key:'ncxItem',value:function(e){var t=e.getAttribute('id')||!1,n=(0,o.qs)(e,'content'),a=n.getAttribute('src'),r=(0,o.qs)(e,'navLabel'),i=r.textContent?r.textContent:'',s=e.parentNode,l;return s&&('navPoint'===s.nodeName||'navPoint'===s.nodeName.split(':').slice(-1)[0])&&(l=s.getAttribute('id')),{id:t,href:a,label:i,subitems:[],parent:l}}},{key:'load',value:function(e){var t=this;return e.map(function(e){return e.label=e.title,e.subitems=e.children?t.load(e.children):[],e})}},{key:'forEach',value:function(e){return this.toc.forEach(e)}}]),e}();t.default=i,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(77),s=n(7),l=n(75),d=a(l),c=n(111),p=a(c),u=n(48),g=a(u),h=n(76),f=a(h),m=function(){function e(t,n){r(this,e),this.settings={replacements:n&&n.replacements||'base64',archive:n&&n.archive,resolver:n&&n.resolver,request:n&&n.request},this.process(t)}return o(e,[{key:'process',value:function(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}},{key:'split',value:function(){this.html=this.resources.filter(function(e){if('application/xhtml+xml'===e.type||'text/html'===e.type)return!0}),this.assets=this.resources.filter(function(e){if('application/xhtml+xml'!==e.type&&'text/html'!==e.type)return!0}),this.css=this.resources.filter(function(e){if('text/css'===e.type)return!0})}},{key:'splitUrls',value:function(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}},{key:'createUrl',value:function(e){var t=new d.default(e),n=p.default.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:'base64'===this.settings.replacements}):'base64'===this.settings.replacements?this.settings.request(e,'blob').then(function(e){return(0,s.blob2base64)(e)}).then(function(e){return(0,s.createBase64Url)(e,n)}):this.settings.request(e,'blob').then(function(e){return(0,s.createBlobUrl)(e,n)})}},{key:'replacements',value:function(){var e=this;if('none'===this.settings.replacements)return new Promise(function(e){e(this.urls)}.bind(this));var t=this.urls.map(function(t){var n=e.settings.resolver(t);return e.createUrl(n).catch(function(e){return console.error(e),null})});return Promise.all(t).then(function(t){return e.replacementUrls=t.filter(function(e){return'string'==typeof e}),t})}},{key:'replaceCss',value:function(e,t){var n=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(a){var r=this.createCssFile(a,e,t).then(function(e){var t=this.urls.indexOf(a);-1<t&&(this.replacementUrls[t]=e)}.bind(this));n.push(r)}.bind(this)),Promise.all(n)}},{key:'createCssFile',value:function(e){var t=this,n;if(f.default.isAbsolute(e))return new Promise(function(e){e()});var a=this.settings.resolver(e),r;r=this.settings.archive?this.settings.archive.getText(a):this.settings.request(a,'text');var o=this.urls.map(function(e){var n=t.settings.resolver(e),r=new g.default(a).relative(n);return r});return r?r.then(function(e){return e=(0,i.substitute)(e,o,t.replacementUrls),n='base64'===t.settings.replacements?(0,s.createBase64Url)(e,'text/css'):(0,s.createBlobUrl)(e,'text/css'),n},function(){return new Promise(function(e){e()})}):new Promise(function(e){e()})}},{key:'relativeTo',value:function(e,t){return t=t||this.settings.resolver,this.urls.map(function(n){var a=t(n),r=new g.default(e).relative(a);return r}.bind(this))}},{key:'get',value:function(e){var t=this.urls.indexOf(e);return-1===t?void 0:this.replacementUrls.length?new Promise(function(e){e(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}},{key:'substitute',value:function(e,t){var n;return n=t?this.relativeTo(t):this.urls,(0,i.substitute)(e,n,this.replacementUrls)}},{key:'destroy',value:function(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}]),e}();t.default=m,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(25),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(7),l=function(){function e(t){a(this,e),this.pages=[],this.locations=[],this.epubcfi=new i.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,t&&(this.pageList=this.parse(t)),this.pageList&&this.pageList.length&&this.process(this.pageList)}return r(e,[{key:'parse',value:function(e){var t=(0,s.qs)(e,'html'),n=(0,s.qs)(e,'ncx');return t?this.parseNav(e):n?this.parseNcx(e):void 0}},{key:'parseNav',value:function(e){var t=(0,s.querySelectorByType)(e,'nav','page-list'),n=t?(0,s.qsa)(t,'li'):[],a=n.length,r=[],o,i;if(!n||0===a)return r;for(o=0;o<a;++o)i=this.item(n[o]),r.push(i);return r}},{key:'parseNcx',value:function(e){var t=[],n=0,a=0,r,o,i;if(o=(0,s.qs)(e,'pageList'),!o)return t;if(i=(0,s.qsa)(o,'pageTarget'),a=i.length,!i||0===i.length)return t;for(n=0;n<a;++n)r=this.ncxItem(i[n]),t.push(r);return t}},{key:'ncxItem',value:function(e){var t=(0,s.qs)(e,'navLabel'),n=(0,s.qs)(t,'text'),a=n.textContent,r=(0,s.qs)(e,'content'),o=r.getAttribute('src'),i=parseInt(a,10);return{href:o,page:i}}},{key:'item',value:function(e){var t=(0,s.qs)(e,'a'),n=t.getAttribute('href')||'',a=t.textContent||'',r=parseInt(a),o=n.indexOf('epubcfi'),i,l,d;return-1==o?{href:n,page:r}:(i=n.split('#'),l=i[0],d=!!(1<i.length)&&i[1],{cfi:d,href:n,packageUrl:l,page:r})}},{key:'process',value:function(e){e.forEach(function(e){this.pages.push(e.page),e.cfi&&this.locations.push(e.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}},{key:'pageFromCfi',value:function(e){var t=-1;if(0===this.locations.length)return-1;var n=(0,s.indexOfSorted)(e,this.locations,this.epubcfi.compare);return-1==n?(n=(0,s.locationOf)(e,this.locations,this.epubcfi.compare),t=0<=n-1?this.pages[n-1]:this.pages[0],void 0!==t||(t=-1)):t=this.pages[n],t}},{key:'cfiFromPage',value:function(e){var t=-1;'number'!=typeof e&&(e=parseInt(e));var n=this.pages.indexOf(e);return-1!=n&&(t=this.locations[n]),t}},{key:'pageFromPercentage',value:function(e){var t=u(this.totalPages*e);return t}},{key:'percentageFromPage',value:function(e){var t=(e-this.firstPage)/this.totalPages;return u(1e3*t)/1e3}},{key:'percentageFromCfi',value:function(e){var t=this.pageFromCfi(e),n=this.percentageFromPage(t);return n}},{key:'destroy',value:function(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(7),i=n(26),s=n(32),l=function(e){return e&&e.__esModule?e:{default:e}}(s),d=function(){function e(t){a(this,e),this.settings=t,this.name=t.layout||'reflowable',this._spread='none'!==t.spread,this._minSpreadWidth=t.minSpreadWidth||800,this._evenSpreads=t.evenSpreads||!1,this._flow='scrolled'===t.flow||'scrolled-continuous'===t.flow||'scrolled-doc'===t.flow?'scrolled':'paginated',this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}return r(e,[{key:'flow',value:function(e){return'undefined'!=typeof e&&(this._flow='scrolled'===e||'scrolled-continuous'===e||'scrolled-doc'===e?'scrolled':'paginated',this.update({flow:this._flow})),this._flow}},{key:'spread',value:function(e,t){return e&&(this._spread='none'!==e,this.update({spread:this._spread})),0<=t&&(this._minSpreadWidth=t),this._spread}},{key:'calculate',value:function(e,t,n){var a=1,r=n||0,o=e,i=t,s=g(o/12),l,d,c,p;a=this._spread&&o>=this._minSpreadWidth?2:1,'reflowable'!==this.name||'paginated'!==this._flow||0<=n||(r=0==s%2?s:s-1),'pre-paginated'===this.name&&(r=0),1<a?(l=o/a-r,c=l+r):(l=o,c=o),'pre-paginated'===this.name&&1<a&&(o=l),d=l*a+r,p=o,this.width=o,this.height=i,this.spreadWidth=d,this.pageWidth=c,this.delta=p,this.columnWidth=l,this.gap=r,this.divisor=a,this.update({width:o,height:i,spreadWidth:d,pageWidth:c,delta:p,columnWidth:l,gap:r,divisor:a})}},{key:'format',value:function(e){var t;return t='pre-paginated'===this.name?e.fit(this.columnWidth,this.height):'paginated'===this._flow?e.columns(this.width,this.height,this.columnWidth,this.gap):e.size(this.width,null),t}},{key:'count',value:function(e,t){var n,a;return'pre-paginated'===this.name?(n=1,a=1):'paginated'===this._flow?(t=t||this.delta,n=y(e/t),a=n*this.divisor):(t=t||this.height,n=y(e/t),a=n),{spreads:n,pages:a}}},{key:'update',value:function(e){var t=this;if(Object.keys(e).forEach(function(n){t.props[n]===e[n]&&delete e[n]}),0<Object.keys(e).length){var n=(0,o.extend)(this.props,e);this.emit(i.EVENTS.LAYOUT.UPDATED,n,e)}}}]),e}();(0,l.default)(d.prototype),t.default=d,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(75),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(){function e(t){a(this,e),this.rendition=t,this._themes={default:{rules:{},url:'',serialized:''}},this._overrides={},this._current='default',this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}return o(e,[{key:'register',value:function(){return 0===arguments.length?void 0:1===arguments.length&&'object'===r(arguments[0])?this.registerThemes(arguments[0]):1===arguments.length&&'string'==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&'string'==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&'object'===r(arguments[1])?this.registerRules(arguments[0],arguments[1]):void 0}},{key:'default',value:function(e){return e?'string'==typeof e?this.registerUrl('default',e):'object'===('undefined'==typeof e?'undefined':r(e))?this.registerRules('default',e):void 0:void 0}},{key:'registerThemes',value:function(e){for(var t in e)e.hasOwnProperty(t)&&('string'==typeof e[t]?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}},{key:'registerUrl',value:function(e,t){var n=new s.default(t);this._themes[e]={url:n.toString()},this._injected[e]&&this.update(e)}},{key:'registerRules',value:function(e,t){this._themes[e]={rules:t},this._injected[e]&&this.update(e)}},{key:'select',value:function(e){var t=this._current,n;this._current=e,this.update(e),n=this.rendition.getContents(),n.forEach(function(n){n.removeClass(t),n.addClass(e)})}},{key:'update',value:function(e){var t=this,n=this.rendition.getContents();n.forEach(function(n){t.add(e,n)})}},{key:'inject',value:function(e){var t=[],n=this._themes,a;for(var r in n)n.hasOwnProperty(r)&&(r===this._current||'default'==r)&&(a=n[r],(a.rules&&0<Object.keys(a.rules).length||a.url&&-1===t.indexOf(a.url))&&this.add(r,e),this._injected.push(r));'default'!=this._current&&e.addClass(this._current)}},{key:'add',value:function(e,t){var n=this._themes[e];n&&t&&(n.url?t.addStylesheet(n.url):n.serialized||n.rules&&(t.addStylesheetRules(n.rules),n.injected=!0))}},{key:'override',value:function(e,t,n){var a=this,r=this.rendition.getContents();this._overrides[e]={value:t,priority:!0===n},r.forEach(function(t){t.css(e,a._overrides[e].value,a._overrides[e].priority)})}},{key:'overrides',value:function(e){var t=this._overrides;for(var n in t)t.hasOwnProperty(n)&&e.css(n,t[n].value,t[n].priority)}},{key:'fontSize',value:function(e){this.override('font-size',e)}},{key:'font',value:function(e){this.override('font-family',e,!0)}},{key:'destroy',value:function(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(32),s=a(i),l=n(25),d=a(l),c=n(26),p=function(){function e(t){r(this,e),this.rendition=t,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}return o(e,[{key:'add',value:function(e,t,n,a,r,o){var i=encodeURI(t+e),s=new d.default(t),l=s.spinePos,c=new u({type:e,cfiRange:t,data:n,sectionIndex:l,cb:a,className:r,styles:o});this._annotations[i]=c,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(i):this._annotationsBySectionIndex[l]=[i];var p=this.rendition.views();return p.forEach(function(e){c.sectionIndex===e.index&&c.attach(e)}),c}},{key:'remove',value:function(e,t){var n=this,a=encodeURI(e+t);if(a in this._annotations){var r=this._annotations[a];if(t&&r.type!==t)return;var o=this.rendition.views();o.forEach(function(e){n._removeFromAnnotationBySectionIndex(r.sectionIndex,a),r.sectionIndex===e.index&&r.detach(e)}),delete this._annotations[a]}}},{key:'_removeFromAnnotationBySectionIndex',value:function(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(function(e){return e!==t})}},{key:'_annotationsAt',value:function(e){return this._annotationsBySectionIndex[e]}},{key:'highlight',value:function(e,t,n,a,r){return this.add('highlight',e,t,n,a,r)}},{key:'underline',value:function(e,t,n,a,r){return this.add('underline',e,t,n,a,r)}},{key:'mark',value:function(e,t,n){return this.add('mark',e,t,n)}},{key:'each',value:function(){return this._annotations.forEach.apply(this._annotations,arguments)}},{key:'inject',value:function(e){var t=this,n=e.index;if(n in this._annotationsBySectionIndex){var a=this._annotationsBySectionIndex[n];a.forEach(function(n){var a=t._annotations[n];a.attach(e)})}}},{key:'clear',value:function(e){var t=this,n=e.index;if(n in this._annotationsBySectionIndex){var a=this._annotationsBySectionIndex[n];a.forEach(function(n){var a=t._annotations[n];a.detach(e)})}}},{key:'show',value:function(){}},{key:'hide',value:function(){}}]),e}(),u=function(){function e(t){var n=t.type,a=t.cfiRange,o=t.data,i=t.sectionIndex,s=t.cb,l=t.className,d=t.styles;r(this,e),this.type=n,this.cfiRange=a,this.data=o,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=l,this.styles=d}return o(e,[{key:'update',value:function(e){this.data=e}},{key:'attach',value:function(e){var t=this.cfiRange,n=this.data,a=this.type,r=this.mark,o=this.cb,i=this.className,s=this.styles,l=void 0;return'highlight'===a?l=e.highlight(t,n,o,i,s):'underline'===a?l=e.underline(t,n,o,i,s):'mark'===a&&(l=e.mark(t,n,o)),this.mark=l,this.emit(c.EVENTS.ANNOTATION.ATTACH,l),l}},{key:'detach',value:function(e){var t=this.cfiRange,n=this.type,a=void 0;return e&&('highlight'===n?a=e.unhighlight(t):'underline'===n?a=e.ununderline(t):'mark'===n&&(a=e.unmark(t))),this.mark=void 0,this.emit(c.EVENTS.ANNOTATION.DETACH,a),a}},{key:'text',value:function(){}}]),e}();(0,s.default)(u.prototype),t.default=p,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'===('undefined'==typeof t?'undefined':c(t))||'function'==typeof t)?t:e}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof t?'undefined':c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function s(e,t){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect();return{top:a.top-n.top,left:a.left-n.left,height:e.scrollHeight,width:e.scrollWidth}}function l(e,t){e.style.setProperty('top',t.top+'px','important'),e.style.setProperty('left',t.left+'px','important'),e.style.setProperty('height',t.height+'px','important'),e.style.setProperty('width',t.width+'px','important')}function d(e,t){return t.right<=e.right&&t.left>=e.left&&t.top>=e.top&&t.bottom<=e.bottom}var c='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};Object.defineProperty(t,'__esModule',{value:!0}),t.Underline=t.Highlight=t.Mark=t.Pane=void 0;var p=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(a)},u=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=n(426),h=a(g),f=n(427),m=a(f),y=t.Pane=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;i(this,e),this.target=t,this.element=h.default.createElement('svg'),this.marks=[],this.element.style.position='absolute',this.element.setAttribute('pointer-events','none'),m.default.proxyMouse(this.target,this.marks),this.container=n,this.container.appendChild(this.element),this.render()}return u(e,[{key:'addMark',value:function(e){var t=h.default.createElement('g');return this.element.appendChild(t),e.bind(t,this.container),this.marks.push(e),e.render(),e}},{key:'removeMark',value:function(e){var t=this.marks.indexOf(e);if(-1!==t){var n=e.unbind();this.element.removeChild(n),this.marks.splice(t,1)}}},{key:'render',value:function(){l(this.element,s(this.target,this.container));var e=!0,t=!1,n=void 0;try{for(var a=this.marks[Symbol.iterator](),r,o;!(e=(r=a.next()).done);e=!0)o=r.value,o.render()}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}]),e}(),v=t.Mark=function(){function e(){i(this,e),this.element=null}return u(e,[{key:'bind',value:function(e,t){this.element=e,this.container=t}},{key:'unbind',value:function(){var e=this.element;return this.element=null,e}},{key:'render',value:function(){}},{key:'dispatchEvent',value:function(t){this.element&&this.element.dispatchEvent(t)}},{key:'getBoundingClientRect',value:function(){return this.element.getBoundingClientRect()}},{key:'getClientRects',value:function(){for(var e=[],t=this.element.firstChild;t;)e.push(t.getBoundingClientRect()),t=t.nextSibling;return e}},{key:'filteredRanges',value:function(){var e=Array.from(this.range.getClientRects());return e.filter(function(t){for(var n=0;n<e.length;n++){if(e[n]===t)return!0;var a=d(e[n],t);if(a)return!1}return!0})}}]),e}(),b=t.Highlight=function(e){function t(e,n,a,o){i(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.range=e,s.className=n,s.data=a||{},s.attributes=o||{},s}return o(t,e),u(t,[{key:'bind',value:function(e,n){for(var a in p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'bind',this).call(this,e,n),this.data)this.data.hasOwnProperty(a)&&(this.element.dataset[a]=this.data[a]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&this.element.setAttribute(a,this.attributes[a]);this.className&&this.element.classList.add(this.className)}},{key:'render',value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var e=this.element.ownerDocument.createDocumentFragment(),t=this.filteredRanges(),n=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,i=t.length;o<i;o++){var s=t[o],r=h.default.createElement('rect');r.setAttribute('x',s.left-n.left+a.left),r.setAttribute('y',s.top-n.top+a.top),r.setAttribute('height',s.height),r.setAttribute('width',s.width),e.appendChild(r)}this.element.appendChild(e)}}]),t}(v),_=t.Underline=function(e){function t(e,n,a,o){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a,o))}return o(t,e),u(t,[{key:'render',value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var e=this.element.ownerDocument.createDocumentFragment(),t=this.filteredRanges(),n=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,i=t.length;o<i;o++){var s=t[o],r=h.default.createElement('rect');r.setAttribute('x',s.left-n.left+a.left),r.setAttribute('y',s.top-n.top+a.top),r.setAttribute('height',s.height),r.setAttribute('width',s.width),r.setAttribute('fill','none');var l=h.default.createElement('line');l.setAttribute('x1',s.left-n.left+a.left),l.setAttribute('x2',s.left-n.left+a.left+s.width),l.setAttribute('y1',s.top-n.top+a.top+s.height-1),l.setAttribute('y2',s.top-n.top+a.top+s.height-1),l.setAttribute('stroke-width',1),l.setAttribute('stroke','black'),l.setAttribute('stroke-linecap','square'),e.appendChild(r),e.appendChild(l)}this.element.appendChild(e)}}]),t}(b)},function(e,t){'use strict';function n(e){return document.createElementNS('http://www.w3.org/2000/svg',e)}Object.defineProperty(t,'__esModule',{value:!0}),t.createElement=n,t.default={createElement:n}},function(e,t){'use strict';function n(n,o){function t(s){for(var e=o.length-1;0<=e;e--){var i=o[e],t=s.clientX,l=s.clientY;if(s.touches&&s.touches.length&&(t=s.touches[0].clientX,l=s.touches[0].clientY),!!r(i,n,t,l)){i.dispatchEvent(a(s));break}}}if('iframe'===n.nodeName||'IFRAME'===n.nodeName)try{this.target=n.contentDocument}catch(e){this.target=n}else this.target=n;for(var e=['mouseup','mousedown','click','touchstart'],i=0,s;i<e.length;i++)s=e[i],this.target.addEventListener(s,function(n){return t(n)},!1)}function a(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch(a){var n=document.createEvent('MouseEvents');return n.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n}}function r(e,t,n,a){function r(e,t,n){var a=e.top-o.top,r=e.left-o.left,i=a+e.height,s=r+e.width;return a<=n&&r<=t&&i>n&&s>t}var o=t.getBoundingClientRect(),s=e.getBoundingClientRect();if(!r(s,n,a))return!1;for(var l=e.getClientRects(),d=0,i=l.length;d<i;d++)if(r(l[d],n,a))return!0;return!1}Object.defineProperty(t,'__esModule',{value:!0}),t.proxyMouse=n,t.clone=a,t.default={proxyMouse:n}},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(7),i=n(429),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(){function e(t){a(this,e),this.settings=t||{},this.id='epubjs-container-'+(0,o.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}return r(e,[{key:'create',value:function(e){var t=e.height,n=e.width,a=e.overflow||!1,r=e.axis||'vertical',i=e.direction;(0,o.extend)(this.settings,e),e.height&&(0,o.isNumber)(e.height)&&(t=e.height+'px'),e.width&&(0,o.isNumber)(e.width)&&(n=e.width+'px');var s=document.createElement('div');return s.id=this.id,s.classList.add('epub-container'),s.style.wordSpacing='0',s.style.lineHeight='0',s.style.verticalAlign='top',s.style.position='relative','horizontal'===r&&(s.style.display='flex',s.style.flexDirection='row',s.style.flexWrap='nowrap'),n&&(s.style.width=n),t&&(s.style.height=t),a&&('scroll'===a&&'vertical'===r?(s.style['overflow-y']=a,s.style['overflow-x']='hidden'):'scroll'===a&&'horizontal'===r?(s.style['overflow-y']='hidden',s.style['overflow-x']=a):s.style.overflow=a),i&&(s.dir=i,s.style.direction=i),i&&this.settings.fullsize&&(document.body.style.direction=i),s}},{key:'wrap',value:function(e){var t=document.createElement('div');return t.style.visibility='hidden',t.style.overflow='hidden',t.style.width='0',t.style.height='0',t.appendChild(e),t}},{key:'getElement',value:function(e){var t;if((0,o.isElement)(e)?t=e:'string'==typeof e&&(t=document.getElementById(e)),!t)throw new Error('Not an Element');return t}},{key:'attachTo',value:function(e){var t=this.getElement(e),n;if(t)return n=this.settings.hidden?this.wrapper:this.container,t.appendChild(n),this.element=t,t}},{key:'getContainer',value:function(){return this.container}},{key:'onResize',value:function(e){(0,o.isNumber)(this.settings.width)&&(0,o.isNumber)(this.settings.height)||(this.resizeFunc=(0,s.default)(e,50),window.addEventListener('resize',this.resizeFunc,!1))}},{key:'onOrientationChange',value:function(e){this.orientationChangeFunc=e,window.addEventListener('orientationchange',this.orientationChangeFunc,!1)}},{key:'size',value:function(e,t){var n=e||this.settings.width,a=t||this.settings.height,r;null===e?(r=this.element.getBoundingClientRect(),r.width&&(e=g(r.width),this.container.style.width=e+'px')):(0,o.isNumber)(e)?this.container.style.width=e+'px':this.container.style.width=e,null===t?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+'px')):(0,o.isNumber)(t)?this.container.style.height=t+'px':this.container.style.height=t,(0,o.isNumber)(e)||(e=this.container.clientWidth),(0,o.isNumber)(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles['padding-left'])||0,right:parseFloat(this.containerStyles['padding-right'])||0,top:parseFloat(this.containerStyles['padding-top'])||0,bottom:parseFloat(this.containerStyles['padding-bottom'])||0};var i=(0,o.windowBounds)(),s=window.getComputedStyle(document.body),l={left:parseFloat(s['padding-left'])||0,right:parseFloat(s['padding-right'])||0,top:parseFloat(s['padding-top'])||0,bottom:parseFloat(s['padding-bottom'])||0};return n||(e=i.width-l.left-l.right),(!this.settings.fullsize||a)&&a||(t=i.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}},{key:'bounds',value:function(){var e;return'visible'!==this.container.style.overflow&&(e=this.container&&this.container.getBoundingClientRect()),e&&e.width&&e.height?e:(0,o.windowBounds)()}},{key:'getSheet',value:function(){var e=document.createElement('style');return e.appendChild(document.createTextNode('')),document.head.appendChild(e),e.sheet}},{key:'addStyleRules',value:function(e,t){var n='#'+this.id+' ',a='';this.sheet||(this.sheet=this.getSheet()),t.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(a+=t+':'+e[t]+';')}),this.sheet.insertRule(n+e+' {'+a+'}',0)}},{key:'axis',value:function(e){'horizontal'===e?(this.container.style.display='flex',this.container.style.flexDirection='row',this.container.style.flexWrap='nowrap'):this.container.style.display='block',this.settings.axis=e}},{key:'direction',value:function(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}},{key:'overflow',value:function(e){this.container&&('scroll'===e&&'vertical'===this.settings.axis?(this.container.style['overflow-y']=e,this.container.style['overflow-x']='hidden'):'scroll'===e&&'horizontal'===this.settings.axis?(this.container.style['overflow-y']='hidden',this.container.style['overflow-x']=e):this.container.style.overflow=e),this.settings.overflow=e}},{key:'destroy',value:function(){var e;this.element&&(e=this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener('resize',this.resizeFunc),window.removeEventListener('orientationChange',this.orientationChangeFunc))}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){var a=n(158),r=n(114);e.exports=function(e,t,n){var o=!0,i=!0;if('function'!=typeof e)throw new TypeError('Expected a function');return r(n)&&(o='leading'in n?!!n.leading:o,i='trailing'in n?!!n.trailing:i),a(e,t,{leading:o,maxWait:t,trailing:i})}},function(e,t,n){var a=n(159);e.exports=function(){return a.Date.now()}},function(e,t,n){(function(t){var n='object'==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(50))},function(e,t,n){var a=n(161),r=n(116);e.exports=function(e){return'symbol'==typeof e||r(e)&&a(e)=='[object Symbol]'}},function(e,t,n){var a=n(115),r=Object.prototype,o=r.hasOwnProperty,i=r.toString,s=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0}catch(t){}var a=i.call(e);return t?e[s]=n:delete e[s],a}},function(e){var t=Object.prototype,n=t.toString;e.exports=function(e){return n.call(e)}},function(e,t){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.container=t,this._views=[],this.length=0,this.hidden=!1}return a(e,[{key:'all',value:function(){return this._views}},{key:'first',value:function(){return this._views[0]}},{key:'last',value:function(){return this._views[this._views.length-1]}},{key:'indexOf',value:function(e){return this._views.indexOf(e)}},{key:'slice',value:function(){return this._views.slice.apply(this._views,arguments)}},{key:'get',value:function(e){return this._views[e]}},{key:'append',value:function(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}},{key:'prepend',value:function(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}},{key:'insert',value:function(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}},{key:'remove',value:function(e){var t=this._views.indexOf(e);-1<t&&this._views.splice(t,1),this.destroy(e),this.length--}},{key:'destroy',value:function(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}},{key:'forEach',value:function(){return this._views.forEach.apply(this._views,arguments)}},{key:'clear',value:function(){var e=this.length,t;if(this.length){for(var n=0;n<e;n++)t=this._views[n],this.destroy(t);this._views=[],this.length=0}}},{key:'find',value:function(e){for(var t=this.length,n=0,a;n<t;n++)if(a=this._views[n],a.displayed&&a.section.index==e.index)return a}},{key:'displayed',value:function(){for(var e=[],t=this.length,n=0,a;n<t;n++)a=this._views[n],a.displayed&&e.push(a);return e}},{key:'show',value:function(){for(var e=this.length,t=0,n;t<e;t++)n=this._views[t],n.displayed&&n.show();this.hidden=!1}},{key:'hide',value:function(){for(var e=this.length,t=0,n;t<e;t++)n=this._views[t],n.displayed&&n.hide();this.hidden=!0}}]),e}();t.default=r,e.exports=t['default']},function(e,t,a){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(7),l=a(26),d=a(32),g=function(e){return e&&e.__esModule?e:{default:e}}(d),f={easeOutSine:function(e){return p(e*(n/2))},easeInOutSine:function(e){return-0.5*(Math.cos(n*e)-1)},easeInOutQuint:function(e){return 1>(e/=0.5)?0.5*s(e,5):0.5*(s(e-2,5)+2)},easeInCubic:function(e){return s(e,3)}},m=function(){function e(t,n){r(this,e),this.settings=(0,i.extend)({duration:80,minVelocity:0.2,minDistance:10,easing:f.easeInCubic},n||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(t)}return o(e,[{key:'setup',value:function(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling='touch'),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical='vertical'===this.manager.settings.axis,!this.manager.isPaginated||this.isVertical||(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}},{key:'supportsTouch',value:function(){return'ontouchstart'in window||window.DocumentTouch&&document instanceof DocumentTouch}},{key:'disableScroll',value:function(){this.element.style.overflow='hidden'}},{key:'enableScroll',value:function(){this.element.style.overflow=''}},{key:'addListeners',value:function(){this._onResize=this.onResize.bind(this),window.addEventListener('resize',this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener('scroll',this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener('touchstart',this._onTouchStart,{passive:!0}),this.on('touchstart',this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener('touchmove',this._onTouchMove,{passive:!0}),this.on('touchmove',this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener('touchend',this._onTouchEnd,{passive:!0}),this.on('touchend',this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(l.EVENTS.MANAGERS.ADDED,this._afterDisplayed)}},{key:'removeListeners',value:function(){window.removeEventListener('resize',this._onResize),this._onResize=void 0,this.scroller.removeEventListener('scroll',this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener('touchstart',this._onTouchStart,{passive:!0}),this.off('touchstart',this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener('touchmove',this._onTouchMove,{passive:!0}),this.off('touchmove',this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener('touchend',this._onTouchEnd,{passive:!0}),this.off('touchend',this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(l.EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}},{key:'afterDisplayed',value:function(e){var t=this,n=e.contents;['touchstart','touchmove','touchend'].forEach(function(a){n.on(a,function(e){return t.triggerViewEvent(e,n)})})}},{key:'triggerViewEvent',value:function(t,e){this.emit(t.type,t,e)}},{key:'onScroll',value:function(){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}},{key:'onResize',value:function(){this.resizeCanceler=!0}},{key:'onTouchStart',value:function(t){var e=t.touches[0],n=e.screenX,a=e.screenY;this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=n,this.startTouchY=a,this.startTime=this.now()),this.endTouchX=n,this.endTouchY=a,this.endTime=this.now()}},{key:'onTouchMove',value:function(t){var e=t.touches[0],n=e.screenX,a=e.screenY,r=c(a-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&10>r&&(this.element.scrollLeft-=n-this.endTouchX),this.endTouchX=n,this.endTouchY=a,this.endTime=this.now()}},{key:'onTouchEnd',value:function(){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;var e=this.wasSwiped();0===e?this.snap():this.snap(e),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}},{key:'wasSwiped',value:function(){var e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,n=c(t),a=this.endTime-this.startTime,r=t/a,o=this.settings.minVelocity;return n<=this.settings.minDistance||n>=e?0:r>o?-1:r<-o?1:void 0}},{key:'needsSnap',value:function(){var e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return 0!=e%t}},{key:'snap',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor,a=u(t/n)*n;return e&&(a+=e*n),this.smoothScrollTo(a)}},{key:'smoothScrollTo',value:function(e){function t(){var i=this.now(),l=h(1,(i-r)/o),d=s(l);return this.touchCanceler||this.resizeCanceler?(this.resizeCanceler=!1,this.snapping=!1,void n.resolve()):void(1>l?(window.requestAnimationFrame(t.bind(this)),this.scrollTo(a+(e-a)*l,0)):(this.scrollTo(e,0),this.snapping=!1,n.resolve()))}var n=new i.defer,a=this.scrollLeft,r=this.now(),o=this.settings.duration,s=this.settings.easing;return this.snapping=!0,t.call(this),n.promise}},{key:'scrollTo',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}},{key:'now',value:function(){return'now'in window.performance?performance.now():new Date().getTime()}},{key:'destroy',value:function(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}]),e}();(0,g.default)(m.prototype),t.default=m,e.exports=t['default']},function(e,t,n){var a=n(163),r=n(164);e.exports=function(e,t,n){var o=null==e?0:e.length;return o?(t=n||void 0===t?1:r(t),t=o-t,a(e,0>t?0:t,o)):[]}},function(e,t,n){var a=n(160),r=1/0;e.exports=function(e){if(!e)return 0===e?e:0;if(e=a(e),e===r||e===-r){var t=0>e?-1:1;return t*1.7976931348623157e308}return e===e?e:0}},function(e,t,n){var a=n(163),r=n(164);e.exports=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:r(t),a(e,0,0>t?0:t)):[]}},function(e,t,n){var a=n(165),r=n(441),o=n(445),i=n(166);e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],s=e;s--;)t[s-1]=arguments[s];return a(i(n)?o(n):[n],r(t,1))}},function(e,t,n){function a(e,t,n,i,s){var l=-1,d=e.length;for(n||(n=o),s||(s=[]);++l<d;){var c=e[l];0<t&&n(c)?1<t?a(c,t-1,n,i,s):r(s,c):!i&&(s[s.length]=c)}return s}var r=n(165),o=n(442);e.exports=a},function(e,t,n){var a=n(115),r=n(443),o=n(166),i=a?a.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(i&&e&&e[i])}},function(e,t,n){var a=n(444),r=n(116),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,l=a(function(){return arguments}())?a:function(e){return r(e)&&i.call(e,'callee')&&!s.call(e,'callee')};e.exports=l},function(e,t,n){var a=n(161),r=n(116);e.exports=function(e){return r(e)&&a(e)=='[object Arguments]'}},function(e){e.exports=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(7),s=n(78),l=a(s),d=n(111),c=a(d),p=n(48),u=a(p),g=n(151),h=function(){function e(){r(this,e),this.zip=void 0,this.urlCache={},this.checkRequirements()}return o(e,[{key:'checkRequirements',value:function(){try{if('undefined'==typeof JSZip){var e=n(447);this.zip=new e}else this.zip=new JSZip}catch(t){throw new Error('JSZip lib not loaded')}}},{key:'open',value:function(e,t){return this.zip.loadAsync(e,{base64:t})}},{key:'openUrl',value:function(e,t){return(0,l.default)(e,'binary').then(function(e){return this.zip.loadAsync(e,{base64:t})}.bind(this))}},{key:'request',value:function(e,t){var n=new i.defer,a=new u.default(e),r;return t||(t=a.extension),r='blob'==t?this.getBlob(e):this.getText(e),r?r.then(function(e){var a=this.handleResponse(e,t);n.resolve(a)}.bind(this)):n.reject({message:'File not found in the epub: '+e,stack:new Error().stack}),n.promise}},{key:'handleResponse',value:function(e,t){var n=function(e){var t=window.sharedSettings;return t&&t.decryptionKey?(0,g.decrypt)(window.sharedSettings.decryptionKey,e):e}(e),a;return a='json'==t?JSON.parse(n):(0,i.isXml)(t)?(0,i.parse)(n,'text/xml'):'xhtml'==t?(0,i.parse)(n,'application/xhtml+xml'):'html'==t||'htm'==t?(0,i.parse)(n,'text/html'):n,a}},{key:'getBlob',value:function(e,t){var n=window.decodeURIComponent(e.substr(1)),a=this.zip.file(n);if(a)return t=t||c.default.lookup(a.name),a.async('uint8array').then(function(e){return new Blob([e],{type:t})})}},{key:'getText',value:function(e){var t=window.decodeURIComponent(e.substr(1)),n=this.zip.file(t);if(n)return n.async('string').then(function(e){return e});throw new Error('[Archive] File not found url : ',e)}},{key:'getBase64',value:function(e,t){var n=window.decodeURIComponent(e.substr(1)),a=this.zip.file(n);if(a)return t=t||c.default.lookup(a.name),a.async('base64').then(function(e){return'data:'+t+';base64,'+e})}},{key:'createUrl',value:function(e,t){var n=new i.defer,a=window.URL||window.webkitURL||window.mozURL,r=t&&t.base64,o,s;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(r?(s=this.getBase64(e),s&&s.then(function(t){this.urlCache[e]=t,n.resolve(t)}.bind(this))):(s=this.getBlob(e),s&&s.then(function(t){o=a.createObjectURL(t),this.urlCache[e]=o,n.resolve(o)}.bind(this))),s||n.reject({message:'File not found in the epub: '+e,stack:new Error().stack}),n.promise)}},{key:'revokeUrl',value:function(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}},{key:'destroy',value:function(){var e=window.URL||window.webkitURL||window.mozURL;for(var t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}]),e}();t.default=h,e.exports=t['default']},function(n){if('undefined'==typeof t){var a=new Error('Cannot find module "jszip"');throw a.code='MODULE_NOT_FOUND',a}n.exports=t},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(7),s=n(78),l=a(s),d=n(111),c=a(d),p=n(48),u=a(p),g=n(32),h=a(g),f=function(){function e(t,n,a){r(this,e),this.urlCache={},this.storage=void 0,this.name=t,this.requester=n||l.default,this.resolver=a,this.online=!0,this.checkRequirements(),this.addListeners()}return o(e,[{key:'checkRequirements',value:function(){try{var e;e='undefined'==typeof localforage?n(449):localforage,this.storage=e.createInstance({name:this.name})}catch(t){throw new Error('localForage lib not loaded')}}},{key:'addListeners',value:function(){this._status=this.status.bind(this),window.addEventListener('online',this._status),window.addEventListener('offline',this._status)}},{key:'removeListeners',value:function(){window.removeEventListener('online',this._status),window.removeEventListener('offline',this._status),this._status=void 0}},{key:'status',value:function(){var e=navigator.onLine;this.online=e,e?this.emit('online',this):this.emit('offline',this)}},{key:'add',value:function(e,t){var n=this,a=e.resources.map(function(e){var a=e.href,r=n.resolver(a),o=window.encodeURIComponent(r);return n.storage.getItem(o).then(function(e){return!e||t?n.requester(r,'binary').then(function(e){return n.storage.setItem(o,e)}):e})});return Promise.all(a)}},{key:'put',value:function(e,t,n){var a=this,r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(o){return o?o:a.requester(e,'binary',t,n).then(function(e){return a.storage.setItem(r,e)})})}},{key:'request',value:function(e,t,n,a){var r=this;return this.online?this.requester(e,t,n,a).then(function(t){return r.put(e),t}):this.retrieve(e,t)}},{key:'retrieve',value:function(e,t){var n=this,a=new i.defer,r=new u.default(e),o;return t||(t=r.extension),o='blob'==t?this.getBlob(e):this.getText(e),o.then(function(a){var r=new i.defer,o;return a?(o=n.handleResponse(a,t),r.resolve(o)):r.reject({message:'File not found in storage: '+e,stack:new Error().stack}),r.promise})}},{key:'handleResponse',value:function(e,t){var n;return n='json'==t?JSON.parse(e):(0,i.isXml)(t)?(0,i.parse)(e,'text/xml'):'xhtml'==t?(0,i.parse)(e,'application/xhtml+xml'):'html'==t||'htm'==t?(0,i.parse)(e,'text/html'):e,n}},{key:'getBlob',value:function(e,t){var n=window.encodeURIComponent(e);return this.storage.getItem(n).then(function(n){if(n)return t=t||c.default.lookup(e),new Blob([n],{type:t})})}},{key:'getText',value:function(e,t){var n=window.encodeURIComponent(e);return t=t||c.default.lookup(e),this.storage.getItem(n).then(function(e){var n=new i.defer,a=new FileReader,r;if(e)return r=new Blob([e],{type:t}),a.addEventListener('loadend',function(){n.resolve(a.result)}),a.readAsText(r,t),n.promise})}},{key:'getBase64',value:function(e,t){var n=window.encodeURIComponent(e);return t=t||c.default.lookup(e),this.storage.getItem(n).then(function(e){var n=new i.defer,a=new FileReader,r;if(e)return r=new Blob([e],{type:t}),a.addEventListener('loadend',function(){n.resolve(a.result)}),a.readAsDataURL(r,t),n.promise})}},{key:'createUrl',value:function(e,t){var n=new i.defer,a=window.URL||window.webkitURL||window.mozURL,r=t&&t.base64,o,s;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(r?(s=this.getBase64(e),s&&s.then(function(t){this.urlCache[e]=t,n.resolve(t)}.bind(this))):(s=this.getBlob(e),s&&s.then(function(t){o=a.createObjectURL(t),this.urlCache[e]=o,n.resolve(o)}.bind(this))),s||n.reject({message:'File not found in storage: '+e,stack:new Error().stack}),n.promise)}},{key:'revokeUrl',value:function(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}},{key:'destroy',value:function(){var e=window.URL||window.webkitURL||window.mozURL;for(var t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}]),e}();(0,h.default)(f.prototype),t.default=f,e.exports=t['default']},function(e,t,n){(function(t){var n,n;(function(t){e.exports=t()})(function(){return function a(d,e,t){function r(i,o){if(!e[i]){if(!d[i]){if(!o&&'function'==typeof n&&n)return n(i,!0);if(s)return s(i,!0);var c=new Error('Cannot find module \''+i+'\'');throw c.code='MODULE_NOT_FOUND',c}var p=e[i]={exports:{}};d[i][0].call(p.exports,function(t){var e=d[i][1][t];return r(e?e:t)},p,p.exports,a,d,e,t)}return e[i].exports}for(var s='function'==typeof n&&n,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n){(function(e){'use strict';function t(){c=!0;for(var e=d.length,t,n;e;){for(n=d,d=[],t=-1;++t<e;)n[t]();e=d.length}c=!1}var a=e.MutationObserver||e.WebKitMutationObserver,r;if(a){var o=0,i=new a(t),s=e.document.createTextNode('');i.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(!e.setImmediate&&'undefined'!=typeof e.MessageChannel){var l=new e.MessageChannel;l.port1.onmessage=t,r=function(){l.port2.postMessage(0)}}else r='document'in e&&'onreadystatechange'in e.document.createElement('script')?function(){var n=e.document.createElement('script');n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};var d=[],c;n.exports=function(e){1!==d.push(e)||c||r()}}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{}],2:[function(e,t){'use strict';function n(){}function a(e){if('function'!=typeof e)throw new TypeError('resolver must be a function');this.state=g,this.queue=[],this.outcome=void 0,e!==n&&l(this,e)}function r(e,t,n){this.promise=e,'function'==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),'function'==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function o(t,e,n){i(function(){var a;try{a=e(n)}catch(n){return c.reject(t,n)}a===t?c.reject(t,new TypeError('Cannot resolve promise with itself')):c.resolve(t,a)})}function s(e){var t=e&&e.then;if(e&&('object'==typeof e||'function'==typeof e)&&'function'==typeof t)return function(){t.apply(e,arguments)}}function l(e,t){function n(t){r||(r=!0,c.reject(e,t))}function a(t){r||(r=!0,c.resolve(e,t))}var r=!1,o=d(function(){t(a,n)});'error'===o.status&&n(o.value)}function d(e,t){var n={};try{n.value=e(t),n.status='success'}catch(t){n.status='error',n.value=t}return n}var i=e(1),c={},p=['REJECTED'],u=['FULFILLED'],g=['PENDING'];t.exports=a,a.prototype['catch']=function(e){return this.then(null,e)},a.prototype.then=function(e,t){if('function'!=typeof e&&this.state===u||'function'!=typeof t&&this.state===p)return this;var a=new this.constructor(n);if(this.state!==g){var i=this.state===u?e:t;o(a,i,this.outcome)}else this.queue.push(new r(a,e,t));return a},r.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){c.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=d(s,t);if('error'===n.status)return c.reject(e,n.value);var a=n.value;if(a)l(e,a);else{e.state=u,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},c.reject=function(e,t){e.state=p,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callRejected(t);return e},a.resolve=function(e){return e instanceof this?e:c.resolve(new this(n),e)},a.reject=function(e){var t=new this(n);return c.reject(t,e)},a.all=function(e){function t(e,t){a.resolve(e).then(function(e){s[t]=e,++l!==r||o||(o=!0,c.resolve(p,s))},function(e){o||(o=!0,c.reject(p,e))})}var a=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=Array(r),l=0,d=-1,p=new this(n);++d<r;)t(e[d],d);return p},a.race=function(e){function t(e){a.resolve(e).then(function(e){o||(o=!0,c.resolve(i,e))},function(e){o||(o=!0,c.reject(i,e))})}var a=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=-1,i=new this(n);++s<r;)t(e[s]);return i}},{1:1}],3:[function(e){(function(t){'use strict';'function'!=typeof t.Promise&&(t.Promise=e(2))}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{2:2}],4:[function(e,t){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if('TypeError'!==o.name)throw o;for(var n='undefined'==typeof BlobBuilder?'undefined'==typeof MSBlobBuilder?'undefined'==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,a=new n,r=0;r<e.length;r+=1)a.append(e[r]);return a.getBlob(t.type)}}function r(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function o(e,t,n){'function'==typeof t&&e.then(t),'function'==typeof n&&e['catch'](n)}function i(e){return'string'!=typeof e&&(console.warn(e+' used as a key, but it is not a string.'),e+=''),e}function s(){if(arguments.length&&'function'==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function l(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n),r=0;r<t;r++)a[r]=e.charCodeAt(r);return n}function d(e){return new z(function(t){var n=e.transaction(F,W),r=a(['']);n.objectStore(F).put(r,'key'),n.onabort=function(n){n.preventDefault(),n.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||43<=parseInt(e[1],10))}})['catch'](function(){return!1})}function c(e){return'boolean'==typeof j?z.resolve(j):d(e).then(function(e){return j=e,j})}function p(e){var t=U[e.name],n={};n.promise=new z(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then(function(){return n.promise}):n.promise}function u(e){var t=U[e.name],n=t.deferredOperations.pop();if(n)return n.resolve(),n.promise}function g(e,t){var n=U[e.name],a=n.deferredOperations.pop();if(a)return a.reject(t),a.promise}function h(t,e){return new z(function(n,a){if(U[t.name]=U[t.name]||S(),t.db)if(e)p(t),t.db.close();else return n(t.db);var r=[t.name];e&&r.push(t.version);var o=M.open.apply(M,r);e&&(o.onupgradeneeded=function(n){var e=o.result;try{e.createObjectStore(t.storeName),1>=n.oldVersion&&e.createObjectStore(F)}catch(e){if('ConstraintError'===e.name)console.warn('The database "'+t.name+'" has been upgraded from version '+n.oldVersion+' to version '+n.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw e}}),o.onerror=function(t){t.preventDefault(),a(o.error)},o.onsuccess=function(){n(o.result),u(t)}})}function f(e){return h(e,!1)}function m(e){return h(e,!0)}function y(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,r=e.version>e.db.version;if(a&&(e.version!==t&&console.warn('The database "'+e.name+'" can\'t be downgraded from version '+e.db.version+' to version '+e.version+'.'),e.version=e.db.version),r||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function v(t){return new z(function(n,e){var a=new FileReader;a.onerror=e,a.onloadend=function(a){var e=btoa(a.target.result||'');n({__local_forage_encoded_blob:!0,data:e,type:t.type})},a.readAsBinaryString(t)})}function b(e){var t=l(atob(e.data));return a([t],{type:e.type})}function _(e){return e&&e.__local_forage_encoded_blob}function x(e){var t=this,n=t._initReady().then(function(){var e=U[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return o(n,e,e),n}function k(e){p(e);for(var t=U[e.name],n=t.forages,a=0,r;a<n.length;a++)r=n[a],r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null);return e.db=null,f(e).then(function(t){return e.db=t,y(e)?m(e):t}).then(function(a){e.db=t.db=a;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=a})['catch'](function(t){throw g(e,t),t})}function E(e,t,n,a){a===void 0&&(a=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(0<a&&(!e.db||'InvalidStateError'===r.name||'NotFoundError'===r.name))return z.resolve().then(function(){if(!e.db||'NotFoundError'===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),m(e)}).then(function(){return k(e).then(function(){E(e,t,n,a-1)})})['catch'](n);n(r)}}function S(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function w(e){var t=0.75*e.length,n=e.length,a=0,r,o,i,s,l;'='===e[e.length-1]&&(t--,'='===e[e.length-2]&&t--);var d=new ArrayBuffer(t),c=new Uint8Array(d);for(r=0;r<n;r+=4)o=Y.indexOf(e[r]),i=Y.indexOf(e[r+1]),s=Y.indexOf(e[r+2]),l=Y.indexOf(e[r+3]),c[a++]=o<<2|i>>4,c[a++]=(15&i)<<4|s>>2,c[a++]=(3&s)<<6|63&l;return d}function N(e){var t=new Uint8Array(e),n='',a;for(a=0;a<t.length;a+=3)n+=Y[t[a]>>2],n+=Y[(3&t[a])<<4|t[a+1]>>4],n+=Y[(15&t[a+1])<<2|t[a+2]>>6],n+=Y[63&t[a+2]];return 2==t.length%3?n=n.substring(0,n.length-1)+'=':1==t.length%3&&(n=n.substring(0,n.length-2)+'=='),n}function T(e,t,n,a){e.executeSql('CREATE TABLE IF NOT EXISTS '+t.storeName+' (id INTEGER PRIMARY KEY, key unique, value)',[],n,a)}function C(e,n,a,r,o,i){e.executeSql(a,r,o,function(e,s){s.code===s.SYNTAX_ERR?e.executeSql('SELECT name FROM sqlite_master WHERE type=\'table\' AND name = ?',[n.storeName],function(e,t){t.rows.length?i(e,s):T(e,n,function(){e.executeSql(a,r,o,i)},i)},i):i(e,s)},i)}function R(e,t,n,a){var o=this;e=i(e);var s=new z(function(r,i){o.ready().then(function(){void 0===t&&(t=null);var s=t,l=o._dbInfo;l.serializer.serialize(t,function(d,t){t?i(t):l.db.transaction(function(n){C(n,l,'INSERT OR REPLACE INTO '+l.storeName+' (key, value) VALUES (?, ?)',[e,d],function(){r(s)},function(e,t){i(t)})},function(t){if(t.code===t.QUOTA_ERR){if(0<a)return void r(R.apply(o,[e,s,n,a-1]));i(t)}})})})['catch'](i)});return r(s,n),s}function A(e){return new z(function(n,a){e.transaction(function(r){r.executeSql('SELECT name FROM sqlite_master WHERE type=\'table\' AND name <> \'__WebKitDatabaseInfoTable__\'',[],function(a,t){for(var r=[],o=0;o<t.rows.length;o++)r.push(t.rows.item(o).name);n({db:e,storeNames:r})},function(e,t){a(t)})},function(e){a(e)})})}function I(e,t){var n=e.name+'/';return e.storeName!==t.storeName&&(n+=e.storeName+'/'),n}function O(){var e='_localforage_support_test';try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function P(){return!O()||0<localStorage.length}function L(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function D(){for(var e=1,t;e<arguments.length;e++)if(t=arguments[e],t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=he(t[n])?t[n].slice():t[n]);return arguments[0]}var B='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},M=function(){try{if('undefined'!=typeof indexedDB)return indexedDB;if('undefined'!=typeof webkitIndexedDB)return webkitIndexedDB;if('undefined'!=typeof mozIndexedDB)return mozIndexedDB;if('undefined'!=typeof OIndexedDB)return OIndexedDB;if('undefined'!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();'undefined'==typeof Promise&&e(3);var z=Promise,F='local-forage-detect-blob-support',j=void 0,U={},H=Object.prototype.toString,q='readonly',W='readwrite',V={_driver:'asyncStorage',_initStorage:function(e){function t(){return z.resolve()}var n=this,a={db:null};if(e)for(var r in e)a[r]=e[r];var o=U[a.name];o||(o=S(),U[a.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=x);for(var i=[],s=0,l;s<o.forages.length;s++)l=o.forages[s],l!==n&&i.push(l._initReady()['catch'](t));var d=o.forages.slice(0);return z.all(i).then(function(){return a.db=o.db,f(a)}).then(function(e){return a.db=e,y(a,n._defaultConfig.version)?m(a):e}).then(function(e){a.db=o.db=e,n._dbInfo=a;for(var t=0,r;t<d.length;t++)r=d[t],r!==n&&(r._dbInfo.db=a.db,r._dbInfo.version=a.version)})},_support:function(){try{if(!M)return!1;var e='undefined'!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t='function'==typeof fetch&&-1!==fetch.toString().indexOf('[native code');return(!e||t)&&'undefined'!=typeof indexedDB&&'undefined'!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(e,t){var n=this,a=new z(function(t,a){n.ready().then(function(){E(n._dbInfo,q,function(r,o){if(r)return a(r);try{var i=o.objectStore(n._dbInfo.storeName),s=i.openCursor(),l=1;s.onsuccess=function(){var n=s.result;if(n){var a=n.value;_(a)&&(a=b(a));var r=e(a,n.key,l++);void 0===r?n['continue']():t(r)}else t()},s.onerror=function(){a(s.error)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},getItem:function(e,t){var n=this;e=i(e);var a=new z(function(t,a){n.ready().then(function(){E(n._dbInfo,q,function(r,o){if(r)return a(r);try{var i=o.objectStore(n._dbInfo.storeName),s=i.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),_(e)&&(e=b(e)),t(e)},s.onerror=function(){a(s.error)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},setItem:function(e,t,n){var a=this;e=i(e);var o=new z(function(n,r){var o;a.ready().then(function(){return o=a._dbInfo,'[object Blob]'===H.call(t)?c(o.db).then(function(e){return e?t:v(t)}):t}).then(function(t){E(a._dbInfo,W,function(o,i){if(o)return r(o);try{var s=i.objectStore(a._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(t){r(t)}})})['catch'](r)});return r(o,n),o},removeItem:function(e,t){var n=this;e=i(e);var a=new z(function(t,a){n.ready().then(function(){E(n._dbInfo,W,function(r,o){if(r)return a(r);try{var i=o.objectStore(n._dbInfo.storeName),s=i['delete'](e);o.oncomplete=function(){t()},o.onerror=function(){a(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;a(e)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},clear:function(e){var t=this,n=new z(function(e,n){t.ready().then(function(){E(t._dbInfo,W,function(a,r){if(a)return n(a);try{var o=r.objectStore(t._dbInfo.storeName),i=o.clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(t){n(t)}})})['catch'](n)});return r(n,e),n},length:function(e){var t=this,n=new z(function(e,n){t.ready().then(function(){E(t._dbInfo,q,function(a,r){if(a)return n(a);try{var o=r.objectStore(t._dbInfo.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(t){n(t)}})})['catch'](n)});return r(n,e),n},key:function(e,t){var n=this,a=new z(function(t,a){return 0>e?void t(null):void n.ready().then(function(){E(n._dbInfo,q,function(r,o){if(r)return a(r);try{var i=o.objectStore(n._dbInfo.storeName),s=!1,l=i.openCursor();l.onsuccess=function(){var n=l.result;return n?void(0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e))):void t(null)},l.onerror=function(){a(l.error)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},keys:function(e){var t=this,n=new z(function(e,n){t.ready().then(function(){E(t._dbInfo,q,function(a,r){if(a)return n(a);try{var o=r.objectStore(t._dbInfo.storeName),i=o.openCursor(),s=[];i.onsuccess=function(){var t=i.result;return t?void(s.push(t.key),t['continue']()):void e(s)},i.onerror=function(){n(i.error)}}catch(t){n(t)}})})['catch'](n)});return r(n,e),n},dropInstance:function(e,t){t=s.apply(this,arguments);var n=this.config();e='function'!=typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var a=this,o;if(!e.name)o=z.reject('Invalid arguments');else{var i=e.name===n.name&&a._dbInfo.db,l=i?z.resolve(a._dbInfo.db):f(e).then(function(t){var n=U[e.name],a=n.forages;n.db=t;for(var r=0;r<a.length;r++)a[r]._dbInfo.db=t;return t});o=e.storeName?l.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;p(e);var a=U[e.name],r=a.forages;t.close();for(var o=0,i;o<r.length;o++)i=r[o],i._dbInfo.db=null,i._dbInfo.version=n;var s=new z(function(t,a){var r=M.open(e.name,n);r.onerror=function(e){var t=r.result;t.close(),a(e)},r.onupgradeneeded=function(){var t=r.result;t.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}});return s.then(function(e){a.db=e;for(var t=0,n;t<r.length;t++)n=r[t],n._dbInfo.db=e,u(n._dbInfo)})['catch'](function(t){throw(g(e,t)||z.resolve())['catch'](function(){}),t})}}):l.then(function(t){p(e);var n=U[e.name],a=n.forages;t.close();for(var r=0,o;r<a.length;r++)o=a[r],o._dbInfo.db=null;var i=new z(function(t,n){var a=M.deleteDatabase(e.name);a.onerror=a.onblocked=function(e){var t=a.result;t&&t.close(),n(e)},a.onsuccess=function(){var e=a.result;e&&e.close(),t(e)}});return i.then(function(e){n.db=e;for(var t=0,r;t<a.length;t++)r=a[t],u(r._dbInfo)})['catch'](function(t){throw(g(e,t)||z.resolve())['catch'](function(){}),t})})}return r(o,t),o}},Y='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',G=/^~~local_forage_type~([^~]+)~/,X='__lfsc__:',K=X.length,Z='arbf',$='blob',J='si08',Q='ui08',ee='uic8',te='si16',ne='si32',ae='ur16',re='ui32',oe='fl32',ie='fl64',se=K+Z.length,le=Object.prototype.toString,de={serialize:function(t,n){var e='';if(t&&(e=le.call(t)),t&&('[object ArrayBuffer]'===e||t.buffer&&'[object ArrayBuffer]'===le.call(t.buffer))){var a=X,r;t instanceof ArrayBuffer?(r=t,a+=Z):(r=t.buffer,'[object Int8Array]'===e?a+=J:'[object Uint8Array]'===e?a+=Q:'[object Uint8ClampedArray]'===e?a+=ee:'[object Int16Array]'===e?a+=te:'[object Uint16Array]'===e?a+=ae:'[object Int32Array]'===e?a+=ne:'[object Uint32Array]'===e?a+=re:'[object Float32Array]'===e?a+=oe:'[object Float64Array]'===e?a+=ie:n(new Error('Failed to get type for BinaryArray'))),n(a+N(r))}else if('[object Blob]'===e){var o=new FileReader;o.onload=function(){var e='~~local_forage_type~'+t.type+'~'+N(this.result);n(X+$+e)},o.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(a){console.error('Couldn\'t convert value into a JSON string: ',t),n(null,a)}},deserialize:function(e){if(e.substring(0,K)!==X)return JSON.parse(e);var t=e.substring(se),n=e.substring(K,se),r;if(n===$&&G.test(t)){var o=t.match(G);r=o[1],t=t.substring(o[0].length)}var i=w(t);switch(n){case Z:return i;case $:return a([i],{type:r});case J:return new Int8Array(i);case Q:return new Uint8Array(i);case ee:return new Uint8ClampedArray(i);case te:return new Int16Array(i);case ae:return new Uint16Array(i);case ne:return new Int32Array(i);case re:return new Uint32Array(i);case oe:return new Float32Array(i);case ie:return new Float64Array(i);default:throw new Error('Unkown type: '+n);}},stringToBuffer:w,bufferToString:N},ce={_driver:'webSQLStorage',_initStorage:function(e){var t=this,n={db:null};if(e)for(var a in e)n[a]='string'==typeof e[a]?e[a]:e[a].toString();var r=new z(function(e,a){try{n.db=openDatabase(n.name,n.version+'',n.description,n.size)}catch(t){return a(t)}n.db.transaction(function(r){T(r,n,function(){t._dbInfo=n,e()},function(e,t){a(t)})},a)});return n.serializer=de,r},_support:function(){return'function'==typeof openDatabase}(),iterate:function(e,t){var n=this,a=new z(function(a,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){C(n,o,'SELECT * FROM '+o.storeName,[],function(n,t){for(var r=t.rows,s=r.length,l=0;l<s;l++){var i=r.item(l),d=i.value;if(d&&(d=o.serializer.deserialize(d)),d=e(d,i.key,l+1),void 0!==d)return void a(d)}a()},function(e,t){r(t)})})})['catch'](r)});return r(a,t),a},getItem:function(e,t){var n=this;e=i(e);var a=new z(function(a,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){C(n,o,'SELECT * FROM '+o.storeName+' WHERE key = ? LIMIT 1',[e],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),a(n)},function(e,t){r(t)})})})['catch'](r)});return r(a,t),a},setItem:function(e,t,n){return R.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=i(e);var a=new z(function(t,a){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){C(n,r,'DELETE FROM '+r.storeName+' WHERE key = ?',[e],function(){t()},function(e,t){a(t)})})})['catch'](a)});return r(a,t),a},clear:function(e){var t=this,n=new z(function(e,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(r){C(r,a,'DELETE FROM '+a.storeName,[],function(){e()},function(e,t){n(t)})})})['catch'](n)});return r(n,e),n},length:function(e){var t=this,n=new z(function(e,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(r){C(r,a,'SELECT COUNT(key) as c FROM '+a.storeName,[],function(n,t){var a=t.rows.item(0).c;e(a)},function(e,t){n(t)})})})['catch'](n)});return r(n,e),n},key:function(e,t){var n=this,a=new z(function(a,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){C(n,o,'SELECT key FROM '+o.storeName+' WHERE id = ? LIMIT 1',[e+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;a(n)},function(e,t){r(t)})})})['catch'](r)});return r(a,t),a},keys:function(e){var t=this,n=new z(function(e,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(r){C(r,a,'SELECT key FROM '+a.storeName,[],function(n,t){for(var a=[],r=0;r<t.rows.length;r++)a.push(t.rows.item(r).key);e(a)},function(e,t){n(t)})})})['catch'](n)});return r(n,e),n},dropInstance:function(e,t){t=s.apply(this,arguments);var n=this.config();e='function'!=typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var a=this,o;return o=e.name?new z(function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,'','',0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(A(r))}).then(function(e){return new z(function(t,n){e.db.transaction(function(a){function r(e){return new z(function(t,n){a.executeSql('DROP TABLE IF EXISTS '+e,[],function(){t()},function(e,t){n(t)})})}for(var o=[],s=0,i=e.storeNames.length;s<i;s++)o.push(r(e.storeNames[s]));z.all(o).then(function(){t()})['catch'](function(t){n(t)})},function(e){n(e)})})}):z.reject('Invalid arguments'),r(o,t),o}},pe={_driver:'localStorageWrapper',_initStorage:function(e){var t=this,n={};if(e)for(var a in e)n[a]=e[a];return(n.keyPrefix=I(e,t._defaultConfig),!P())?z.reject():(t._dbInfo=n,n.serializer=de,z.resolve())},_support:function(){try{return'undefined'!=typeof localStorage&&'setItem'in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(e,t){var n=this,a=n.ready().then(function(){for(var t=n._dbInfo,a=t.keyPrefix,r=a.length,o=localStorage.length,s=1,l=0,i;l<o;l++)if(i=localStorage.key(l),0===i.indexOf(a)){var d=localStorage.getItem(i);if(d&&(d=t.serializer.deserialize(d)),d=e(d,i.substring(r),s++),void 0!==d)return d}});return r(a,t),a},getItem:function(e,t){var n=this;e=i(e);var a=n.ready().then(function(){var t=n._dbInfo,a=localStorage.getItem(t.keyPrefix+e);return a&&(a=t.serializer.deserialize(a)),a});return r(a,t),a},setItem:function(e,t,n){var a=this;e=i(e);var o=a.ready().then(function(){void 0===t&&(t=null);var n=t;return new z(function(r,o){var i=a._dbInfo;i.serializer.serialize(t,function(t,a){if(a)o(a);else try{localStorage.setItem(i.keyPrefix+e,t),r(n)}catch(t){('QuotaExceededError'===t.name||'NS_ERROR_DOM_QUOTA_REACHED'===t.name)&&o(t),o(t)}})})});return r(o,n),o},removeItem:function(e,t){var n=this;e=i(e);var a=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return r(a,t),a},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1,a;0<=n;n--)a=localStorage.key(n),0===a.indexOf(e)&&localStorage.removeItem(a)});return r(n,e),n},length:function(e){var t=this,n=t.keys().then(function(e){return e.length});return r(n,e),n},key:function(e,t){var n=this,a=n.ready().then(function(){var t=n._dbInfo,a;try{a=localStorage.key(e)}catch(e){a=null}return a&&(a=a.substring(t.keyPrefix.length)),a});return r(a,t),a},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,a=[],r=0,o;r<n;r++)o=localStorage.key(r),0===o.indexOf(e.keyPrefix)&&a.push(o.substring(e.keyPrefix.length));return a});return r(n,e),n},dropInstance:function(e,t){if(t=s.apply(this,arguments),e='function'!=typeof e&&e||{},!e.name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var a=this,o;return o=e.name?new z(function(t){e.storeName?t(I(e,a._defaultConfig)):t(e.name+'/')}).then(function(e){for(var t=localStorage.length-1,n;0<=t;t--)n=localStorage.key(t),0===n.indexOf(e)&&localStorage.removeItem(n)}):z.reject('Invalid arguments'),r(o,t),o}},ue=function(e,t){return e===t||'number'==typeof e&&'number'==typeof t&&isNaN(e)&&isNaN(t)},ge=function(e,t){for(var n=e.length,a=0;a<n;){if(ue(e[a],t))return!0;a++}return!1},he=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},fe={},me={},ye={INDEXEDDB:V,WEBSQL:ce,LOCALSTORAGE:pe},ve=[ye.INDEXEDDB._driver,ye.WEBSQL._driver,ye.LOCALSTORAGE._driver],be=['dropInstance'],_e=['clear','getItem','iterate','key','keys','length','removeItem','setItem'].concat(be),xe={description:'',driver:ve.slice(),name:'localforage',size:4980736,storeName:'keyvaluepairs',version:1},ke=function(){function e(t){for(var a in n(this,e),ye)if(ye.hasOwnProperty(a)){var r=ye[a],o=r._driver;this[a]=o,fe[o]||this.defineDriver(r)}this._defaultConfig=D({},xe),this._config=D({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)['catch'](function(){})}return e.prototype.config=function(e){if('object'===('undefined'==typeof e?'undefined':B(e))){if(this._ready)return new Error('Can\'t call config() after localforage has been used.');for(var t in e){if('storeName'==t&&(e[t]=e[t].replace(/\W/g,'_')),'version'==t&&'number'!=typeof e[t])return new Error('Database version must be a number.');this._config[t]=e[t]}return'driver'in e&&e.driver?this.setDriver(this._config.driver):!0}return'string'==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var a=new z(function(t,n){try{var a=e._driver,o=new Error('Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver');if(!e._driver)return void n(o);for(var s=_e.concat('_initStorage'),l=0,i=s.length;l<i;l++){var d=s[l],c=!ge(be,d);if((c||e[d])&&'function'!=typeof e[d])return void n(o)}var p=function(){for(var t=function(e){return function(){var t=new Error('Method '+e+' is not implemented by the current driver'),n=z.reject(t);return r(n,arguments[arguments.length-1]),n}},n=0,a=be.length,o;n<a;n++)o=be[n],e[o]||(e[o]=t(o))};p();var u=function(n){fe[a]&&console.info('Redefining LocalForage driver: '+a),fe[a]=e,me[a]=n,t()};'_support'in e?e._support&&'function'==typeof e._support?e._support().then(u,n):u(!!e._support):u(!0)}catch(t){n(t)}});return o(a,t,n),a},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var a=fe[e]?z.resolve(fe[e]):z.reject(new Error('Driver not found.'));return o(a,t,n),a},e.prototype.getSerializer=function(e){var t=z.resolve(de);return o(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return o(n,e,e),n},e.prototype.setDriver=function(e,t,n){function a(){s._config.driver=s.driver()}function r(e){return s._extend(e),a(),s._ready=s._initStorage(s._config),s._ready}function i(e){return function(){function t(){for(;n<e.length;){var o=e[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(o).then(r)['catch'](t)}a();var i=new Error('No available storage method found.');return s._driverSet=z.reject(i),s._driverSet}var n=0;return t()}}var s=this;he(e)||(e=[e]);var l=this._getSupportedDrivers(e),d=null===this._driverSet?z.resolve():this._driverSet['catch'](function(){return z.resolve()});return this._driverSet=d.then(function(){var e=l[0];return s._dbInfo=null,s._ready=null,s.getDriver(e).then(function(e){s._driver=e._driver,a(),s._wrapLibraryMethodsWithReady(),s._initDriver=i(l)})})['catch'](function(){a();var e=new Error('No available storage method found.');return s._driverSet=z.reject(e),s._driverSet}),o(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!me[e]},e.prototype._extend=function(e){D(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,a=e.length,r;n<a;n++)r=e[n],this.supports(r)&&t.push(r);return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=_e.length;e<t;e++)L(this,_e[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ee=new ke;t.exports=Ee},{3:3}]},{},[4])(4)})}).call(t,n(50))},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(7),i=function(){function e(t){a(this,e),this.interactive='',this.fixedLayout='',this.openToSpread='',this.orientationLock='',t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t=this;if(!e)return this;var n=(0,o.qs)(e,'display_options');if(!n)return this;var a=(0,o.qsa)(n,'option');return a.forEach(function(e){var n='';switch(e.childNodes.length&&(n=e.childNodes[0].nodeValue),e.attributes.name.value){case'interactive':t.interactive=n;break;case'fixed-layout':t.fixedLayout=n;break;case'open-to-spread':t.openToSpread=n;break;case'orientation-lock':t.orientationLock=n;}}),this}},{key:'destroy',value:function(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}]),e}();t.default=i,e.exports=t['default']},function(e,t,n){(function(e){(function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},a=function(e){return encodeURIComponent(e).replace(/%20/g,'+')},r=function(e){return decodeURIComponent((e+'').replace(/\+/g,' '))};'URLSearchParams'in e&&'a=1'===new e.URLSearchParams('?a=1').toString()||function(){var r=function(e){Object.defineProperty(this,'_entries',{writable:!0,value:{}});var t=typeof e;if('undefined'==t);else if('string'==t)''!==e&&this._fromString(e);else if(e instanceof r){var n=this;e.forEach(function(e,t){n.append(t,e)})}else if(!(null!==e&&'object'==t))throw new TypeError('Unsupported input\'s type for URLSearchParams');else if('[object Array]'===Object.prototype.toString.call(e)){for(var a=0,o;a<e.length;a++)if(o=e[a],'[object Array]'===Object.prototype.toString.call(o)||2!==o.length)this.append(o[0],o[1]);else throw new TypeError('Expected [string, any] as entry at index '+a+' of URLSearchParams\'s input');}else for(var i in e)e.hasOwnProperty(i)&&this.append(i,e[i])},o=r.prototype;o.append=function(e,t){e in this._entries?this._entries[e].push(t+''):this._entries[e]=[t+'']},o.delete=function(e){delete this._entries[e]},o.get=function(e){return e in this._entries?this._entries[e][0]:null},o.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},o.has=function(e){return e in this._entries},o.set=function(e,t){this._entries[e]=[t+'']},o.forEach=function(e,t){var n;for(var a in this._entries)if(this._entries.hasOwnProperty(a)){n=this._entries[a];for(var r=0;r<n.length;r++)e.call(t,n[r],a,this)}},o.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),n(e)},o.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),n(e)},t&&(o[Symbol.iterator]=o.entries),o.toString=function(){var e=[];return this.forEach(function(t,n){e.push(a(n)+'='+a(t))}),e.join('&')},e.URLSearchParams=r}();var o=e.URLSearchParams.prototype;'function'!=typeof o.sort&&(o.sort=function(){var e=this,t=[];this.forEach(function(n,a){t.push([a,n]),e._entries||e.delete(a)}),t.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])}),'function'!=typeof o._fromString&&Object.defineProperty(o,'_fromString',{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach(function(e,n){t.push(n)});for(var n=0;n<t.length;n++)this.delete(t[n])}e=e.replace(/^\?/,'');for(var a=e.split('&'),n=0,o;n<a.length;n++)o=a[n].split('='),this.append(r(o[0]),1<o.length?r(o[1]):'')}})})('undefined'==typeof e?'undefined'==typeof window?'undefined'==typeof self?this:self:window:e),function(e){if(function(){try{var t=new e.URL('b','http://a');return t.pathname='c%20d','http://a/c%20d'===t.href&&t.searchParams}catch(t){return!1}}()||function(){var t=e.URL,n=function(t,n){'string'!=typeof t&&(t+='');var a=document,r;if(n&&(void 0===e.location||n!==e.location.href)){a=document.implementation.createHTMLDocument(''),r=a.createElement('base'),r.href=n,a.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(e){throw new Error('URL unable to set base '+n+' due to '+e)}}var o=a.createElement('a');if(o.href=t,r&&(a.body.appendChild(o),o.href=o.href),':'===o.protocol||!/:/.test(o.href))throw new TypeError('Invalid URL');Object.defineProperty(this,'_anchorElement',{value:o});var i=new e.URLSearchParams(this.search),s=!0,l=!0,d=this;['append','delete','set'].forEach(function(e){var t=i[e];i[e]=function(){t.apply(i,arguments),s&&(l=!1,d.search=i.toString(),l=!0)}}),Object.defineProperty(this,'searchParams',{value:i,enumerable:!0});var c;Object.defineProperty(this,'_updateSearchParams',{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==c&&(c=this.search,l&&(s=!1,this.searchParams._fromString(this.search),s=!0))}})},a=n.prototype,r=function(e){Object.defineProperty(a,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})};['hash','host','hostname','port','protocol'].forEach(function(e){r(e)}),Object.defineProperty(a,'search',{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(a,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,'')},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,'/')},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&''!==this._anchorElement.port;return this._anchorElement.protocol+'//'+this._anchorElement.hostname+(t?':'+this._anchorElement.port:'')},enumerable:!0},password:{get:function(){return''},set:function(){},enumerable:!0},username:{get:function(){return''},set:function(){},enumerable:!0}}),n.createObjectURL=function(){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!('origin'in e.location)){var t=function(){return e.location.protocol+'//'+e.location.hostname+(e.location.port?':'+e.location.port:'')};try{Object.defineProperty(e.location,'origin',{get:t,enumerable:!0})}catch(n){setInterval(function(){e.location.origin=t()},100)}}}('undefined'==typeof e?'undefined'==typeof window?'undefined'==typeof self?this:self:window:e)}).call(t,n(50))}])});